/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","prototype","runtime_dependencies/js-sdk/src/jrs.configs","runtime_dependencies/jrs-ui/src/util/utils.common","runtime_dependencies/jrs-ui/src/repository/repository.search.main"],function(e,n,t){function i(){return window.localContext.rsInitOptions||x.repositorySearch.localContext.rsInitOptions}function o(e){return"DataDefinerUnit"==e.typeSuffix()}function r(e){return"DashboardResource"==e.typeSuffix()||"DashboardModelResource"==e.typeSuffix()}function s(e){return"ContentResource"==e.typeSuffix()}function u(e){return!A()||!["DashboardResource","SemanticLayerDataSource"].include(e.typeSuffix())}function c(e){return"AdhocReportUnit"==e.typeSuffix()}function a(e){return"AdhocDataView"==e.typeSuffix()}function d(e){e=e||O.model.getSelectedResources()[0];var n=!0;return"OlapUnit"!=e.typeSuffix()||i().isAnalysisFeatureEnabled||(n=!1),(!c(e)||!i().isAdHoReportDisabled)&&(!(r(e)&&!i().isDashboardFeatureEnabled)&&(e&&e.isReadable()&&n&&O.runActionFactory[e.typeSuffix()]&&!O.isflowRedirectRunning))}function l(e){return(e=e||O.model.getSelectedResources()[0])&&e.isReadable()&&a(e)&&i().isAdHoReportDisabled&&!O.isflowRedirectRunning}function f(e){return(e=e||O.model.getSelectedResources()[0])&&e.isReadable()&&c(e)&&i().isAdHoReportDisabled&&!O.isflowRedirectRunning}function p(e){e=e||O.model.getSelectedResources()[0];var n=!0;["OlapUnit","XMLAConnection","SecureMondrianConnection"].include(e.typeSuffix())&&!i().isAnalysisFeatureEnabled&&(n=!1);var t=O.editActionFactory[e.typeSuffix()]||h.isCustomDataSource(e),o=e&&e.isEditable()&&n&&t;return!!u(e)&&(!["DashboardResource"].include(e.typeSuffix())&&!c(e)&&o)}function R(e){return window.canBeScheduled(e)}function y(e){return(e=e||O.model.getSelectedResources()[0])&&e.isReadable()&&!c(e)&&[O.ResourceType.REPORT_UNIT,O.ResourceType.ADHOC_REPORT_UNIT,O.ResourceType.DASHBOARD,O.ResourceType.REPORT_OPTIONS].include(e.resourceType)}function S(e){return!!(e=e||O.model.getSelectedResources()[0])&&(!r(e)&&(!o(e)&&(!!u(e)&&(a(e)?!!O.openActionFactory[e.typeSuffix()]:s(e)?e.isReadable()&&O.openActionFactory[e.typeSuffix()]:e.isEditable()&&O.openActionFactory[e.typeSuffix()]))))}function w(e){return e=e||O.model.getSelectedResources()[0],!(r(e)&&!i().isDashboardFeatureEnabled||c(e))&&(!c(e)&&!a(e)&&(!o(e)&&(e&&e.isEditable()&&O.openActionFactory[e.typeSuffix()]&&"ContentResource"!==e.typeSuffix())))}function b(e){var n=O.model.getContextFolder();return!!("OlapClientConnection"!=e&&"OlapUnit"!=e||i().isAnalysisFeatureEnabled)&&(n&&!n.isOrganization()&&!n.isRoot()&&!n.isOrganizationsRoot()&&n.isEditable())}var m=e("prototype"),x=(m.$,e("runtime_dependencies/js-sdk/src/jrs.configs")),D=e("runtime_dependencies/jrs-ui/src/util/utils.common"),A=D.isIPad,g=e("runtime_dependencies/jrs-ui/src/repository/repository.search.main"),O=g.repositorySearch,h=g.ResourcesUtils;O.notSupportedByIPad=["DashboardResource","SemanticLayerDataSource"],window.canResourceBeCreated=b,window.canBeOpenedInDesigner=w,window.canBeOpened=S,window.canBeScheduled=y,window.canBeRunInBackground=R,window.canResourceBeEdited=p,window.canBeConverted=f,window.canBeGenerated=l,window.canBeRun=d,window.isContentResource=s,t.exports=O});