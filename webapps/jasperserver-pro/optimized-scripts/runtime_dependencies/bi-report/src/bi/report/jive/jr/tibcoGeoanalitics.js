/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery"],function(require,exports,module){function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var __disableStrictMode__="use strict",$=require("jquery"),T=T||{};T.settings={geoWebServices:"https:"!=window.location.protocol?"http://geowebservices.maporama.com/":"https://geowebservices.maporama.com/"},document.querySelectorAll||(document.querySelectorAll=function(t,i,e,s,n){var o=document.createStyleSheet();for(n=document.all,i=[],t=t.replace(/\[for\b/gi,"[htmlFor").split(","),e=t.length;e--;){for(o.addRule(t[e],"k:v"),s=n.length;s--;)n[s].currentStyle.k&&i.push(n[s]);o.removeRule(0)}return i}),Array.prototype.reduce||(Array.prototype.reduce=function(t,i){if(null===this||void 0===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,s,n=this.length>>>0,o=!1;for(1<arguments.length&&(s=i,o=!0),e=0;n>e;++e)this.hasOwnProperty(e)&&(o?s=t(s,this[e],e,this):(s=this[e],o=!0));if(!o)throw new TypeError("Reduce of empty array with no initial value");return s}),Array.prototype.map||(Array.prototype.map=function(t){var i=this.length;if("function"!=typeof t)throw new TypeError("func is not a function!");var e,s=[],n=arguments.length>=2?arguments[1]:void 0;for(e=0;e<i;e++)e in this&&(s[e]=t.call(n,this[e],e,this));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var i=this.length;if("function"!=typeof t)throw new TypeError;var e,s=[],n=arguments.length>=2?arguments[1]:void 0;for(e=0;e<i;e++)if(e in this){var o=this[e];t.call(n,o,e,this)&&s.push(o)}return s}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var i=this,e=i.length;if("function"!=typeof t)throw new TypeError;var s=arguments.length>=2?arguments[1]:void 0,n=0;for(n=0;n<e;n++)n in i&&t.call(s,i[n],n,i)}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),function(t){var i=function(){this.events={},this.eventsContext={}};i.prototype={on:function(t,i,e){var s=e?this.bind(i,e):i,n=this.events[t]=this.events[t]||{},o=this.eventsContext[t]=this.eventsContext[t]||{};i.key="fn"+this.now()+"_"+Math.floor(100*Math.random()),i.proxy=s,n[i.key]=s,o[i.key]=e},fire:function(t,i){var e,s=this.events[t];for(e in s)if(s.hasOwnProperty(e)&&"function"==typeof s[e]){var n=s[e];n.apply(this,[i])}},detach:function(t,i){var e=this.events[t];e.hasOwnProperty(i.key)&&delete e[i.key]},detachAll:function(){this.events={}},bind:function(t,i){return function(){return t.apply(i||t,arguments)}},now:function(){return(new Date).getTime()}},t.EventDispatcher=i}(T),function(t){var i=function(t,i){this.x=t,this.y=i};i.prototype={toString:function(){return"Point("+this.x+","+this.y+")"},clone:function(t){return new i(this.x,this.y)},add:function(t){var i=this.clone();return i.x+=t.x,i.y+=t.y,i},substract:function(t){var i=this.clone();return i.x-=t.x,i.y-=t.y,i},multiplyBy:function(t){var i=this.clone();return t instanceof T.Point?(i.x*=t.x,i.y*=t.y):(i.x*=t,i.y*=t),i},divideBy:function(t){var i=this.clone();return t instanceof T.Point?(i.x/=t.x,i.y/=t.y):(i.x/=t,i.y/=t),i},round:function(){var t=this.clone();return t.x=Math.round(this.x),t.y=Math.round(this.y),t},floor:function(){var t=this.clone();return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t},isEqual:function(t){return this.x===t.x&&this.y===t.y},distanceTo:function(t){var i=t.x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)}},t.Point=i}(T),function(t){var i=function(t,i,e,s){this.a=t,this.b=i,this.c=e,this.d=s};i.prototype={transform:function(t,i){var e=t.clone();return i=i||1,e.x=i*(this.a*e.x+this.b),e.y=i*(this.c*e.y+this.d),e},untransform:function(t,i){return i=i||1,new T.Point((t.x/i-this.b)/this.a,(t.y/i-this.d)/this.c)}},t.Transform=i}(T),function(t){var i=function(t,i){this.lat=t,this.lng=i};i.from=function(t,i){return void 0===t||null===t?null:t instanceof T.LatLng?t:T.Util.isArray(t)?new T.LatLng(t[0],t[1]):new T.LatLng(t,i)},i.prototype={toString:function(){return"LatLng("+this.lat+","+this.lng+")"},clone:function(){return new i(this.lat,this.lng)},isEqual:function(t){return this.lat===t.lat&&this.lng===t.lng},round:function(){var t=this.clone();return t.lat=Math.round(this.lat),t.lng=Math.round(this.lng),t}},t.LatLng=i}(T),function(t){var i=function(t,i){t&&(this.extend(t),this.extend(i))};i.from=function(t,i){return void 0===t||null===t?null:t instanceof T.LatLngBounds?t:T.Util.isArray(t)&&T.Util.isArray(i)?new T.LatLngBounds(T.LatLng.from(t),T.LatLng.from(i)):T.Util.isArray(t)&&2===t.length?new T.LatLngBounds(T.LatLng.from(t[0]),T.LatLng.from(t[1])):void 0},i.prototype={extend:function(t){return t?(t instanceof T.LatLng?this.southWest||this.northEast?(this.southWest.lat=Math.min(t.lat,this.southWest.lat),this.southWest.lng=Math.min(t.lng,this.southWest.lng),this.northEast.lat=Math.max(t.lat,this.northEast.lat),this.northEast.lng=Math.max(t.lng,this.northEast.lng)):(this.southWest=new T.LatLng(t.lat,t.lng),this.northEast=new T.LatLng(t.lat,t.lng)):t instanceof T.LatLngBounds&&(this.extend(t.southWest),this.extend(t.northEast)),this):this},getNorthEast:function(){return new T.LatLng(this.northEast.lat,this.northEast.lng)},getNorthWest:function(){return new T.LatLng(this.northEast.lat,this.southWest.lng)},getSouthEast:function(){return new T.LatLng(this.southWest.lat,this.northEast.lng)},getSouthWest:function(){return new T.LatLng(this.southWest.lat,this.southWest.lng)},center:function(){return new T.LatLng((this.southWest.lat+this.northEast.lat)/2,(this.southWest.lng+this.northEast.lng)/2)},getWest:function(){return this.southWest.lng},getSouth:function(){return this.southWest.lat},getEast:function(){return this.northEast.lng},getNorth:function(){return this.northEast.lat}},t.LatLngBounds=i}(T),function(t){var i=function(t,i){t||(t=new T.Point(0,0)),i||(i=new T.Point(0,0)),this.extend(t),this.extend(i)};i.prototype={extend:function(t){if(t)return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},intersect:function(t){var i=new T.Bounds;return i.min.x=Math.max(this.min.x,t.min.x),i.min.y=Math.max(this.min.y,t.min.y),i.max.x=Math.min(this.max.x,t.max.x),i.max.y=Math.min(this.max.y,t.max.y),i},center:function(){return new T.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2)},topLeft:function(){return new T.Point(this.min.x,this.max.y)},topRight:function(){return new T.Point(this.max.x,this.max.y)},bottomLeft:function(){return new T.Point(this.min.x,this.min.y)},bottomRight:function(){return new T.Point(this.max.x,this.min.y)},width:function(){return this.max.x-this.min.x},height:function(){return this.max.y-this.min.y}},t.Bounds=i}(T),"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var i=meta[t];return"string"==typeof i?i:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,i){var e,s,n,o,a,r=gap,h=i[t];switch(h&&"object"===_typeof(h)&&"function"==typeof h.toJSON&&(h=h.toJSON(t)),"function"==typeof rep&&(h=rep.call(i,t,h)),_typeof(h)){case"string":return quote(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(h)){for(o=h.length,e=0;e<o;e+=1)a[e]=str(e,h)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+r+"]":"["+a.join(",")+"]",gap=r,n}if(rep&&"object"===_typeof(rep))for(o=rep.length,e=0;e<o;e+=1)"string"==typeof rep[e]&&(s=rep[e],(n=str(s,h))&&a.push(quote(s)+(gap?": ":":")+n));else for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(n=str(s,h))&&a.push(quote(s)+(gap?": ":":")+n);return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+r+"}":"{"+a.join(",")+"}",gap=r,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,i,e){var s;if(gap="",indent="","number"==typeof e)for(s=0;s<e;s+=1)indent+=" ";else"string"==typeof e&&(indent=e);if(rep=i,i&&"function"!=typeof i&&("object"!==_typeof(i)||"number"!=typeof i.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,i){var e,s,n=t[i];if(n&&"object"===_typeof(n))for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(s=walk(n,e),void 0!==s?n[e]=s:delete n[e]);return reviver.call(t,i,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t){var i=function(t,i,e,s,n,o){for(var a=0,r=0,h=0;h<9;h++)a=1+(h/3|0),r=h%3+1,this["m"+a+r]=a===r?1:0;if("string"==typeof t){var l=t.match(/(-|\+)?\d*\.?\d+(?=,|\))/g);this.m11=Number(l[0]),this.m21=Number(l[1]),this.m12=Number(l[2]),this.m22=Number(l[3]),this.m13=Number(l[4]),this.m23=Number(l[5])}else this.m11=t||this.m11,this.m21=i||this.m21,this.m12=e||this.m12,this.m22=s||this.m22,this.m13=n||this.m13,this.m23=o||this.m23};i.prototype={multiplyBy:function(t){var e=this,s=new i;return s.m11=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31,s.m12=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32,s.m13=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33,s.m21=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31,s.m22=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32,s.m23=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33,s.m31=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31,s.m32=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32,s.m33=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33,s},clone:function(){for(var t=new i,e=0,s=0,n=0;n<9;n++)e=1+(n/3|0),s=n%3+1,t["m"+e+s]=this["m"+e+s]},toString:function(){var t=this.m11.toFixed(6);return t+=", "+this.m21.toFixed(6),t+=", "+this.m12.toFixed(6),t+=", "+this.m22.toFixed(6),t+=", "+this.m13.toFixed(6),"matrix("+(t+=", "+this.m23.toFixed(6))+")"}},t.Matrix2D=i}(T),function(t){function i(){}i.prototype={createXhr:function(t){t&&(this.options=t);var i=this;if(this.isIE()&&!this.isSameWithOrigin(this.url)?(this.xhr=new XDomainRequest,this.xhr.onload=function(){i.onComplete()},this.xhr.onerror=function(){i.onError()},this.xhr.onprogress=function(){},this.xhr.ontimeout=function(){}):window.XMLHttpRequest?this.xhr=new window.XMLHttpRequest:window.ActiveXObject&&(this.xhr=new window.ActiveXObject("Microsoft.XMLHTTP")),!this.xhr)throw new Error("Unable to create XHR object!");this.xhr.onreadystatechange=function(){4===this.readyState&&(501===this.status?i.onSessionTimeout():this.status>=400||0===this.status?i.onError():i.onComplete())},this.xhr.onprogress=function(){},this.xhr.ontimeout=function(){}},abort:function(){this.xhr.abort()},isIE:function(){return-1!==navigator.appVersion.indexOf("MSIE")},isSameWithOrigin:function(t){var i=new RegExp("^http(s)?://.*?(/|$)","i"),e=i.exec(t)[0];return i.exec(window.location.href)[0]===e},attachIsAjaxParameter:function(t){var i=!1,e=0;for(e=0;e<t.length;e++)if("?"===t.charAt(e)){t+="&isajax=true",i=!0;break}return i||(t+="?isajax=true"),t},send:function(t,i){this.options=i,this.url=this.attachIsAjaxParameter(t),this.xhr||this.createXhr(),this.xhr.open(i.method,this.url,!0),this.xhr.timeout=2e6,void 0!==this.xhr.withCredentials&&i.withCredentials&&(this.xhr.withCredentials=i.withCredentials);var e=0;if(this.xhr.setRequestHeader&&i.headers)for(e=0;e<i.headers.length;e++)this.xhr.setRequestHeader(i.headers[e].name,i.headers[e].value);return i.data?this.xhr.send(i.data):this.xhr.send(null),this},onComplete:function(){this.options.on.success&&this.options.on.success(this.xhr.responseText)},onError:function(){this.options.on.error&&this.options.on.error(this.xhr.responseText)},onSessionTimeout:function(){}},t.Ajax=i}(T),function(t){var i=function(){this.state="pending",this.value=null,this.deferred=null,this.rejected=null};i.prototype={then:function(t,i){this._handle(t,i)},resolve:function(t){this.value=t,this.state="resolved",this.deferred&&this._handle(this.deferred)},reject:function(t){t&&(t=JSON.parse(t)),this.rejected(t)},_handle:function(t,i){if("pending"===this.state)return this.deferred=t,void(this.rejected=i);t(this.value)}},t.Promise=i}(T),function(t){var i={extend:function(t){var i,e,s,n=Array.prototype.slice.call(arguments,1),o=n.length;for(e=0;e<o;e++){s=n[e]||{};for(i in s)s.hasOwnProperty(i)&&(t[i]=s[i])}return t},clone:function(t){var i,e={};for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},cloneFunctions:function(t){var i,e={};for(i in t)"function"==typeof t[i]?e[i]=function(){var e=t[i];return function(){return e.apply(this,arguments)}}():e[i]=t[i];return e},inherit:function(t,e){var s=function(){};s.prototype=this.cloneFunctions(e.prototype);var n=new s;t.prototype=i.extend(n,t.prototype),t.prototype.constructor=t,t.base=e.prototype},bind:function(t,i){return function(){return t.apply(i||t,arguments)}},template:function(t,i){return t.replace(/\{ *([\w_]+) *\}/g,function(t,e){var s=i[e];if(void 0===s)throw new Error("No value provided for variable "+t);return"function"==typeof s&&(s=s(i)),s})},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},defaults:function(t,i){if(!t)return i;if(i){var e;for(e in i)i.hasOwnProperty(e)&&(null!==t[e]&&void 0!==t[e]||(t[e]=i[e]))}return t},limitExecByInterval:function(t,i,e){var s,n;return function o(){var a=arguments;if(s)return void(n=!0);s=!0,setTimeout(function(){s=!1,n&&(o.apply(e,a),n=!1)},i),t.apply(e,a)}},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},minMax:function(t,i,e){return Math.max(t,Math.min(i,e))},maxMin:function(t,i,e){return Math.min(t,Math.max(i,e))},floatEqual:function(t,i,e){return e=e||1e-5,Math.abs(t-i)<=e},stamp:function(){var t=0,i="tibcoId";return function(e){return e[i]=e[i]||++t,e[i]}}(),hexToRgba:function(t,i){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t),s=e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:i||1}:null;return s?"rgba("+s.r+","+s.g+","+s.b+","+s.a+")":""},getObjectClass:function(t){if(t&&t.constructor&&t.constructor.toString){var i=t.constructor.toString().match(/function\s*(\w+)/);if(i&&2===i.length)return i[1]}},browserSupportsHistoryApi:function(){return!(!window.history||!history.pushState)},handleBrowserNavigation:function(t){window.onpopstate=t},setBrowserHistory:function(t,i){var e=window.location.href;!t||history.state&&t===history.state.content||-1!==window.location.href.indexOf(t)||(console.log("content: ",t),-1!==window.location.href.indexOf(t.charAt(0))&&(e=window.location.href.substring(0,window.location.href.indexOf(t.charAt(0)))),i?history.replaceState({content:t},null,e+t):history.pushState({content:t},null,e+t))},setBrowserUrlHash:function(t){t&&(window.location.hash=t)},getBrowserUrlHash:function(t){return window.location.hash},geolocate:function(t,i){navigator&&navigator.geolocation||i.call(this,null),navigator.geolocation.getCurrentPosition(T.Util.bind(function(i){t.call(this,i.coords.latitude,i.coords.longitude)},this),T.Util.bind(function(t){i.call(this,t)},this))},browserSupportsGeolocation:function(){return navigator&&navigator.geolocation},browserVersion:function(){var t=navigator.userAgent.toLowerCase();return{ielt9:!!window.ActiveXObject&&!document.addEventListener,webkit:-1!==t.indexOf("webkit"),chrome:-1!==t.indexOf("chrome"),android:-1!==t.indexOf("android")}}(),initOldIE:function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var i=0;for(i=0;i<this.length;i++)if(this[i]===t)return i;return-1})}(),numberToRad:function(){void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180})}()};t.Util=i}(T),function(t){var i={SVG_NS:"http://www.w3.org/2000/svg",get:function(t){return document.getElementById(t)},getNodesByClass:function(t){return document.querySelectorAll("."+t)},create:function(t,i,e,s){var n=document.createElement(t);return n.className=i||"",s&&(n.id=s),e&&e.appendChild(n),n},remove:function(t){t&&t.parentNode.removeChild(t)},html:function(t,i){t&&$(t).html(i)},hasClass:function(t,i){return t.className.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,e){i.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},removeClass:function(t,i){t.className=T.Util.trim((" "+t.className+" ").replace(" "+i+" "," "))},getStyle:function(t,i){var e=t.style[i];if(!e&&t.currentStyle&&(e=t.currentStyle[i]),(!e||"auto"===e)&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);e=s?s[i]:null}return"auto"===e?null:e},setOpacity:function(t,i){t.style.msFilter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*i+")",T.Util.browserVersion.ielt9||(t.style.filter="alpha(opacity="+100*i+")"),t.style.opacity=i,t.style.mozOpacity=i},position:function(t,i){return i&&(t.style.left=i.x+"px",t.style.top=i.y+"px",t.tibcoPosition=i),t.tibcoPosition},size:function(t,i){return i&&(t.style.width=i.x+"px",t.style.height=i.y+"px"),new T.Point(parseInt(t.style.width,10),parseInt(t.style.height,10))},calculateElementClientOffset:function(t){var i=0,e=0,s=t.getBoundingClientRect();return i=s.left,e=s.top,{left:i,top:e}},createSvgElement:function(t){return document.createElementNS(i.SVG_NS,t)},createVmlElement:function(t){var i=document.createElement(t);return i.setAttribute("xmlns","urn:schemas-microsoft.com:vml"),i},getNodeIndex:function(t,i){var e,s=i?i.childNodes:t.parentNode.childNodes;for(e=0;e<s.length;e++)if(t===s[e])return e;return-1},addStyleNode:function(t){var i=document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),i.appendChild(e)},hide:function(t){t.style.display="none"},show:function(t,i){t.style.display=i||"block"},getElementInsideContainer:function(t,i){var e=document.getElementById(i),s=e?e.parentNode:{};return s.id&&s.id===t?e:{}},disableSelection:function(t){t.style.mozUserSelect="none",t.style.khtmlUserSelect="none",t.style.webkitUserSelect="none",t.style.msUserSelect="none",t.style.userSelect="none",t.dtraggable=!1,t.onmousedown=function(t){return t&&(t.preventDefault?t.preventDefault():t.returnValue=!1),!1}},nodeCollectionToArray:function(t){var i=[],e=0;try{i=Array.prototype.slice.call(t)}catch(s){for(e=0;e<t.length;e++)i.push(t[e])}return i}};t.DomUtil=i}(T),function(t){var i={on:function(t,e,s,n){var o,a,r,h=T.Util.stamp(s),l="tibco_"+e+h;return t[l]?this:(o=function(e){return s.call(n||t,e||i.getEvent())},void 0!==t.addEventListener?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1)):"mouseenter"===e||"mouseleave"===e?(a=o,r="mouseenter"===e?"mouseover":"mouseout",o=function(e){if(i.checkMouse(t,e))return a(e)},t.addEventListener(r,o,!1)):t.addEventListener(e,o,!1):void 0!==t.attachEvent&&t.attachEvent("on"+e,o),t[l]=o,this)},off:function(t,i,e){var s=T.Util.stamp(e),n="tibco_"+i+s,o=t[n];return o?(void 0!==t.removeEventListener?"mousewheel"===i?(t.removeEventListener("DOMMouseScroll",o,!1),t.removeEventListener(i,o,!1)):"mouseenter"===i||"mouseleave"===i?t.removeEventListener("mouseenter"===i?"mouseover":"mouseout",o,!1):t.removeEventListener(i,o,!1):void 0!==t.detachEvent&&t.detachEvent("on"+i,o),t[n]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return i.preventDefault(t).stopPropagation(t)},getWheelDelta:function(t){var i=0;return t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),i},checkMouse:function(t,i){var e=i.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(t){return!1}return e!==t},getEvent:function(){var t=window.event;if(!t)for(var i=arguments.callee.caller;i&&(!(t=i.arguments[0])||window.Event!==t.constructor);)i=i.caller;return t}};t.DomEventUtil=i}(T),function(t){var i=function(t,i,e){this.element=t,this.events=new T.EventDispatcher,this.dragTarget=i||t,this.options=T.Util.defaults(e,this.options)};i.prototype={options:{},enable:function(){this.isEnable||(T.DomEventUtil.on(this.dragTarget,"mousedown",this.onDown,this),this.isEnable=!0)},disable:function(){this.isEnable&&(T.DomEventUtil.off(this.dragTarget,"mousedown",this.onDown,this),this.isEnable=!1)},onDown:function(t){T.DomEventUtil.stop(t),this.moved=!1,this.startPoint=new T.Point(t.clientX,t.clientY),this.startPos=this.newPos=T.DomUtil.position(this.element),T.DomEventUtil.on(document,"mousemove",this.onMove,this),T.DomEventUtil.on(document,"mouseup",this.onUp,this),this.events.fire("before-drag")},onMove:function(t){var i=new T.Point(t.clientX,t.clientY),e=i.substract(this.startPoint);T.DomEventUtil.preventDefault(t),this.moved||(this.events.fire("drag-start"),this.moved=!0,this.startPos=T.DomUtil.position(this.element).substract(e)),this.newPos=this.startPos.add(e),this.moving=!0,this.options.limit&&(void 0!==this.options.limit.minX&&this.options.limit.minX>this.newPos.x&&(this.newPos.x=this.options.limit.minX),void 0!==this.options.limit.maxX&&this.options.limit.maxX<this.newPos.x&&(this.newPos.x=this.options.limit.maxX),void 0!==this.options.limit.minY&&this.options.limit.minY>this.newPos.y&&(this.newPos.y=this.options.limit.minY),void 0!==this.options.limit.maxY&&this.options.limit.maxY<this.newPos.y&&(this.newPos.y=this.options.limit.maxY)),this.options.skipInterval&&(this.options.skipInterval.y&&(this.newPos.y=this.newPos.y-this.newPos.y%this.options.skipInterval.y),this.options.skipInterval.x&&(this.newPos.x=this.newPos.x-this.newPos.x%this.options.skipInterval.x)),T.DomUtil.position(this.element,this.newPos),this.events.fire("drag",{offset:e})},onUp:function(t){T.DomEventUtil.off(document,"mousemove",this.onMove,this),T.DomEventUtil.off(document,"mouseup",this.onUp,this),this.events.fire("drag-end"),this.moving=!1,this.moved=!1}},t.DragUtil=i}(T),function(t){var i={getTransform:function(t){var i=getComputedStyle(t),e=i.msTransform||i.webkitTransform||i.transform||"";return-1!==e.search("matrix")?e:null},setMatrix:function(t,i){t.style.msTransform?t.style.msTransform=i:(t.style.webkitTransform=i,t.style.transform=i)},onTransitionEnd:function(t,i){t.removeEventListener("webkitTransitionEnd",t.lastCallback),t.addEventListener("webkitTransitionEnd",i,!1),t.removeEventListener("transitionend",t.lastCallback),t.addEventListener("transitionend",i,!1),t.removeEventListener("otransitionend",t.lastCallback),t.addEventListener("otransitionend",i,!1),t.removeEventListener("MSTransitionEnd",t.lastCallback),t.addEventListener("MSTransitionEnd",i,!1),t.lastCallback=i},transition:function(t,i,e,s){if(s)return t.style.webkitTransition=s+" "+i+"s",void(t.style.transition=s+" "+i+"s");e=e||new T.Point(0,0),t.style.webkitTransition="-webkit-transform "+i+"s cubic-bezier(.17,.67,1,.84)",t.style.transition="transform "+i+"s cubic-bezier(.17,.67,1,.84)",t.style.webkitTransformOrigin=e.x+"px "+e.y+"px",t.style.transformOrigin=e.x+"px "+e.y+"px",t.style.msTransformOrigin=e.x+"px "+e.y+"px"},translate:function(t,i,e){t.style.msTransform?t.style.msTransform="translate("+i+"px,"+e+"px)"+t.style.msTransform:(t.style.webkitTransform="translate("+i+"px,"+e+"px)"+t.style.webkitTransform,t.style.transform="translate("+i+"px,"+e+"px)"+t.style.transform)},scale:function(t,i,e){t.style.msTransform?t.style.msTransform="scale("+i+","+e+")"+t.style.msTransform:(t.style.webkitTransform="scale("+i+","+e+")"+t.style.webkitTransform,t.style.transform="scale("+i+","+e+")"+t.style.transform)},reset:function(t){t.style.webkitTransition="-webkit-transform 0s",t.style.transition="transform 0s",t.style.msTransform?t.style.msTransform="translate(0,0)":(t.style.webkitTransform="translate(0,0)",t.style.transform="translate(0,0)"),t.style.msTransform?t.style.msTransform+="scale(1,1)":(t.style.webkitTransform+="scale(1,1)",t.style.transform+="scale(1,1)")},canAnim:function(){var t=document.createElement("p").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}};t.AnimUtil=i}(T),function(t){var i;"undefined"!=typeof window?i=window:"undefined"!=typeof global?i=global:"undefined"!=typeof self&&(i=self),i.proj4=function(){return function t(i,e,s){function n(a,r){if(!e[a]){if(!i[a]){var h="function"==typeof require&&require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var l=e[a]={exports:{}};i[a][0].call(l.exports,function(t){var e=i[a][1][t];return n(e||t)},l,l.exports,t,i,e,s)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,i,e){function s(t,i,e){if(!(this instanceof s))return new s(t,i,e);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===_typeof(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===i){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=i,this.z=e||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var n=t("mgrs");s.fromMGRS=function(t){return new s(n.toPoint(t))},s.prototype.toMGRS=function(t){return n.forward([this.x,this.y],t)},i.exports=s},{mgrs:66}],2:[function(t,i,e){function s(t,i){if(!(this instanceof s))return new s(t);i=i||function(t){if(t)throw t};var e=n(t);if("object"!==_typeof(e))return void i(t);var a=r(e),h=s.projections.get(a.projName);h?(o(this,a),o(this,h),this.init(),i(null,this)):i(t)}var n=t("./parseCode"),o=t("./extend"),a=t("./projections"),r=t("./deriveConstants");s.projections=a,s.projections.start(),i.exports=s},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(t,i,e){i.exports=function(t,i,e){var s,n,o,a=e.x,r=e.y,h=e.z||0;for(o=0;o<3;o++)if(!i||2!==o||void 0!==e.z)switch(0===o?(s=a,n="x"):1===o?(s=r,n="y"):(s=h,n="z"),t.axis[o]){case"e":e[n]=s;break;case"w":e[n]=-s;break;case"n":e[n]=s;break;case"s":e[n]=-s;break;case"u":void 0!==e[n]&&(e.z=s);break;case"d":void 0!==e[n]&&(e.z=-s);break;default:return null}return e}},{}],4:[function(t,i,e){var s=Math.PI/2,n=t("./sign");i.exports=function(t){return Math.abs(t)<s?t:t-n(t)*Math.PI}},{"./sign":21}],5:[function(t,i,e){var s=2*Math.PI,n=t("./sign");i.exports=function(t){return Math.abs(t)<Math.PI?t:t-n(t)*s}},{"./sign":21}],6:[function(t,i,e){i.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],7:[function(t,i,e){i.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],8:[function(t,i,e){i.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],9:[function(t,i,e){i.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],10:[function(t,i,e){i.exports=function(t){return t*t*t*(35/3072)}},{}],11:[function(t,i,e){i.exports=function(t,i,e){var s=i*e;return t/Math.sqrt(1-s*s)}},{}],12:[function(t,i,e){i.exports=function(t,i,e,s,n){var o,a;o=t/i;for(var r=0;r<15;r++)if(a=(t-(i*o-e*Math.sin(2*o)+s*Math.sin(4*o)-n*Math.sin(6*o)))/(i-2*e*Math.cos(2*o)+4*s*Math.cos(4*o)-6*n*Math.cos(6*o)),o+=a,Math.abs(a)<=1e-10)return o;return NaN}},{}],13:[function(t,i,e){var s=Math.PI/2;i.exports=function(t,i){var e=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(i)-e)<1e-6)return i<0?-1*s:s;for(var n,o,a,r,h=Math.asin(.5*i),l=0;l<30;l++)if(o=Math.sin(h),a=Math.cos(h),r=t*o,n=Math.pow(1-r*r,2)/(2*a)*(i/(1-t*t)-o/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),h+=n,Math.abs(n)<=1e-10)return h;return NaN}},{}],14:[function(t,i,e){i.exports=function(t,i,e,s,n){return t*n-i*Math.sin(2*n)+e*Math.sin(4*n)-s*Math.sin(6*n)}},{}],15:[function(t,i,e){i.exports=function(t,i,e){var s=t*i;return e/Math.sqrt(1-s*s)}},{}],16:[function(t,i,e){var s=Math.PI/2;i.exports=function(t,i){for(var e,n,o=.5*t,a=s-2*Math.atan(i),r=0;r<=15;r++)if(e=t*Math.sin(a),n=s-2*Math.atan(i*Math.pow((1-e)/(1+e),o))-a,a+=n,Math.abs(n)<=1e-10)return a;return-9999}},{}],17:[function(t,i,e){var s=.01068115234375;i.exports=function(t){var i=[];i[0]=1-t*(.25+t*(.046875+t*(.01953125+t*s))),i[1]=t*(.75-t*(.046875+t*(.01953125+t*s)));var e=t*t;return i[2]=e*(.46875-t*(.013020833333333334+.007120768229166667*t)),e*=t,i[3]=e*(.3645833333333333-.005696614583333333*t),i[4]=e*t*.3076171875,i}},{}],18:[function(t,i,e){var s=t("./pj_mlfn");i.exports=function(t,i,e){for(var n=1/(1-i),o=t,a=20;a;--a){var r=Math.sin(o),h=1-i*r*r;if(h=(s(o,r,Math.cos(o),e)-t)*(h*Math.sqrt(h))*n,o-=h,Math.abs(h)<1e-10)return o}return o}},{"./pj_mlfn":19}],19:[function(t,i,e){i.exports=function(t,i,e,s){return e*=i,i*=i,s[0]*t-e*(s[1]+i*(s[2]+i*(s[3]+i*s[4])))}},{}],20:[function(t,i,e){i.exports=function(t,i){var e;return t>1e-7?(e=t*i,(1-t*t)*(i/(1-e*e)-.5/t*Math.log((1-e)/(1+e)))):2*i}},{}],21:[function(t,i,e){i.exports=function(t){return t<0?-1:1}},{}],22:[function(t,i,e){i.exports=function(t,i){return Math.pow((1-t)/(1+t),i)}},{}],23:[function(t,i,e){i.exports=function(t){var i={x:t[0],y:t[1]};return t.length>2&&(i.z=t[2]),t.length>3&&(i.m=t[3]),i}},{}],24:[function(t,i,e){var s=Math.PI/2;i.exports=function(t,i,e){var n=t*e,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(s-i))/n}},{}],25:[function(t,i,e){e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},e.rnb72={
towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(t,i,e){e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},e.hough={a:6378270,rf:297,ellipseName:"Hough"},e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,i,e){e.greenwich=0,e.lisbon=-9.131906111111,e.paris=2.337229166667,e.bogota=-74.080916666667,e.madrid=-3.687938888889,e.rome=12.452333333333,e.bern=7.439583333333,e.jakarta=106.807719444444,e.ferro=-17.666666666667,e.brussels=4.367975,e.stockholm=18.058277777778,e.athens=23.7163375,e.oslo=10.722916666667},{}],28:[function(t,i,e){function s(t,i,e){var s;return Array.isArray(e)?(s=r(t,i,e),3===e.length?[s.x,s.y,s.z]:[s.x,s.y]):r(t,i,e)}function n(t){return t instanceof a?t:t.oProj?t.oProj:a(t)}function o(t,i,e){t=n(t);var o,a=!1;return void 0===i?(i=t,t=h,a=!0):(void 0!==i.x||Array.isArray(i))&&(e=i,i=t,t=h,a=!0),i=n(i),e?s(t,i,e):(o={forward:function(e){return s(t,i,e)},inverse:function(e){return s(i,t,e)}},a&&(o.oProj=i),o)}var a=t("./Proj"),r=t("./transform"),h=a("WGS84");i.exports=o},{"./Proj":2,"./transform":64}],29:[function(t,i,e){var s=Math.PI/2,n=function t(i){if(!(this instanceof t))return new t(i);if(this.datum_type=4,i){if(i.datumCode&&"none"===i.datumCode&&(this.datum_type=5),i.datum_params){for(var e=0;e<i.datum_params.length;e++)i.datum_params[e]=parseFloat(i.datum_params[e]);0===i.datum_params[0]&&0===i.datum_params[1]&&0===i.datum_params[2]||(this.datum_type=1),i.datum_params.length>3&&(0===i.datum_params[3]&&0===i.datum_params[4]&&0===i.datum_params[5]&&0===i.datum_params[6]||(this.datum_type=2,i.datum_params[3]*=484813681109536e-20,i.datum_params[4]*=484813681109536e-20,i.datum_params[5]*=484813681109536e-20,i.datum_params[6]=i.datum_params[6]/1e6+1))}this.datum_type=i.grids?3:this.datum_type,this.a=i.a,this.b=i.b,this.es=i.es,this.ep2=i.ep2,this.datum_params=i.datum_params,3===this.datum_type&&(this.grids=i.grids)}};n.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:2===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:3!==this.datum_type&&3!==t.datum_type||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var i,e,n,o,a,r,h,l=t.x,c=t.y,m=t.z?t.z:0;if(c<-s&&c>-1.001*s)c=-s;else if(c>s&&c<1.001*s)c=s;else if(c<-s||c>s)return null;return l>Math.PI&&(l-=2*Math.PI),a=Math.sin(c),h=Math.cos(c),r=a*a,o=this.a/Math.sqrt(1-this.es*r),i=(o+m)*h*Math.cos(l),e=(o+m)*h*Math.sin(l),n=(o*(1-this.es)+m)*a,t.x=i,t.y=e,t.z=n,0},geocentric_to_geodetic:function(t){var i,e,n,o,a,r,h,l,c,m,u,p,f,d,y,g,v=t.x,M=t.y,x=t.z?t.z:0;if(!1,i=Math.sqrt(v*v+M*M),e=Math.sqrt(v*v+M*M+x*x),i/this.a<1e-12){if(!0,d=0,e/this.a<1e-12)return y=s,void(g=-this.b)}else d=Math.atan2(M,v);n=x/e,o=i/e,a=1/Math.sqrt(1-this.es*(2-this.es)*o*o),l=o*(1-this.es)*a,c=n*a,f=0;do{f++,h=this.a/Math.sqrt(1-this.es*c*c),g=i*l+x*c-h*(1-this.es*c*c),r=this.es*h/(h+g),a=1/Math.sqrt(1-r*(2-r)*o*o),m=o*(1-r)*a,u=n*a,p=u*l-m*c,l=m,c=u}while(p*p>1e-24&&f<30);return y=Math.atan(u/Math.abs(m)),t.x=d,t.y=y,t.z=g,t},geocentric_to_geodetic_noniter:function(t){var i,e,n,o,a,r,h,l,c,m,u,p,f,d,y,g,v,M=t.x,x=t.y,T=t.z?t.z:0;if(M=parseFloat(M),x=parseFloat(x),T=parseFloat(T),v=!1,0!==M)i=Math.atan2(x,M);else if(x>0)i=s;else if(x<0)i=-s;else if(v=!0,i=0,T>0)e=s;else{if(!(T<0))return e=s,void(n=-this.b);e=-s}return a=M*M+x*x,o=Math.sqrt(a),r=1.0026*T,l=Math.sqrt(r*r+a),m=r/l,p=o/l,u=m*m*m,h=T+this.b*this.ep2*u,g=o-this.a*this.es*p*p*p,c=Math.sqrt(h*h+g*g),f=h/c,d=g/c,y=this.a/Math.sqrt(1-this.es*f*f),n=d>=.3826834323650898?o/d-y:d<=-.3826834323650898?o/-d-y:T/f+y*(this.es-1),!1===v&&(e=Math.atan(f/d)),t.x=i,t.y=e,t.z=n,t},geocentric_to_wgs84:function(t){if(1===this.datum_type)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(2===this.datum_type){var i=this.datum_params[0],e=this.datum_params[1],s=this.datum_params[2],n=this.datum_params[3],o=this.datum_params[4],a=this.datum_params[5],r=this.datum_params[6],h=r*(t.x-a*t.y+o*t.z)+i,l=r*(a*t.x+t.y-n*t.z)+e,c=r*(-o*t.x+n*t.y+t.z)+s;t.x=h,t.y=l,t.z=c}},geocentric_from_wgs84:function(t){if(1===this.datum_type)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(2===this.datum_type){var i=this.datum_params[0],e=this.datum_params[1],s=this.datum_params[2],n=this.datum_params[3],o=this.datum_params[4],a=this.datum_params[5],r=this.datum_params[6],h=(t.x-i)/r,l=(t.y-e)/r,c=(t.z-s)/r;t.x=h+a*l-o*c,t.y=-a*h+l+n*c,t.z=o*h-n*l+c}}},i.exports=n},{}],30:[function(t,i,e){var s=1,n=2;i.exports=function(t,i,e){function o(t){return t===s||t===n}var a,r,h;if(t.compare_datums(i))return e;if(5===t.datum_type||5===i.datum_type)return e;var l=t.a,c=t.es,m=i.a,u=i.es,p=t.datum_type;if(3===p)if(0===this.apply_gridshift(t,0,e))t.a=6378137,t.es=.006694379990141316;else{if(!t.datum_params)return t.a=l,t.es=t.es,e;for(a=1,r=0,h=t.datum_params.length;r<h;r++)a*=t.datum_params[r];if(0===a)return t.a=l,t.es=t.es,e;p=t.datum_params.length>3?n:s}return 3===i.datum_type&&(i.a=6378137,i.es=.006694379990141316),(t.es!==i.es||t.a!==i.a||o(p)||o(i.datum_type))&&(t.geodetic_to_geocentric(e),o(t.datum_type)&&t.geocentric_to_wgs84(e),o(i.datum_type)&&i.geocentric_from_wgs84(e),i.geocentric_to_geodetic(e)),3===i.datum_type&&this.apply_gridshift(i,1,e),t.a=l,t.es=c,i.a=m,i.es=u,e}},{}],31:[function(t,i,e){function s(t){var i=this;if(2===arguments.length){var e=arguments[1];"string"==typeof e?"+"===e[0]?s[t]=o(arguments[1]):s[t]=a(arguments[1]):s[t]=e}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?s.apply(i,t):s(t)});if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var n=t("./global"),o=t("./projString"),a=t("./wkt");n(s),i.exports=s},{"./global":34,"./projString":37,"./wkt":65}],32:[function(t,i,e){var s=t("./constants/Datum"),n=t("./constants/Ellipsoid"),o=t("./extend"),a=t("./datum");i.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var i=s[t.datumCode];i&&(t.datum_params=i.towgs84?i.towgs84.split(","):null,t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}if(!t.a){var e=n[t.ellps]?n[t.ellps]:n.WGS84;o(t,e)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<1e-10)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(.16666666666666666+t.es*(.04722222222222222+.022156084656084655*t.es)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum=a(t),t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(t,i,e){i.exports=function(t,i){t=t||{};var e,s;if(!i)return t;for(s in i)void 0!==(e=i[s])&&(t[s]=e);return t}},{}],34:[function(t,i,e){i.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],35:[function(t,i,e){var s=t("./core");s.defaultDatum="WGS84",s.Proj=t("./Proj"),s.WGS84=new s.Proj("WGS84"),s.Point=t("./Point"),s.toPoint=t("./common/toPoint"),s.defs=t("./defs"),s.transform=t("./transform"),s.mgrs=t("mgrs"),s.version=t("../package.json").version,t("./includedProjections")(s),i.exports=s},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"Jf/0WF","./transform":64,mgrs:66}],36:[function(t,i,e){function s(t){return"string"==typeof t}function n(t){return t in h}function o(t){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(i,e){return i+1+t.indexOf(e)},0)}function a(t){return"+"===t[0]}function r(t){return s(t)?n(t)?h[t]:o(t)?l(t):a(t)?c(t):void 0:t}var h=t("./defs"),l=t("./wkt"),c=t("./projString");i.exports=r},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(t,i,e){var s=.017453292519943295,n=t("./constants/PrimeMeridian");i.exports=function(t){var i={},e={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var i=t.split("=");i.push(!0),e[i[0].toLowerCase()]=i[1]});var o,a,r,h={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t,10)},lat_0:function(t){i.lat0=t*s},lat_1:function(t){i.lat1=t*s},lat_2:function(t){i.lat2=t*s},lat_ts:function(t){i.lat_ts=t*s},lon_0:function(t){i.long0=t*s},lon_1:function(t){i.long1=t*s},lon_2:function(t){i.long2=t*s},alpha:function(t){i.alpha=parseFloat(t)*s},lonc:function(t){i.longc=t*s},x_0:function(t){i.x0=parseFloat(t,10)},y_0:function(t){i.y0=parseFloat(t,10)},k_0:function(t){i.k0=parseFloat(t,10)},k:function(t){i.k0=parseFloat(t,10)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map(function(t){return parseFloat(t,10)})},to_meter:function(t){i.to_meter=parseFloat(t,10)},from_greenwich:function(t){i.from_greenwich=t*s},pm:function(t){i.from_greenwich=(n[t]?n[t]:parseFloat(t,10))*s},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)}};for(o in e)a=e[o],o in h?(r=h[o],"function"==typeof r?r(a):i[r]=a):i[o]=a;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}},{"./constants/PrimeMeridian":27}],38:[function(t,i,e){function s(t,i){var e=a.length;return t.names?(a[e]=t,t.names.forEach(function(t){o[t.toLowerCase()]=e}),this):(console.log(i),!0)}var n=[t("./projections/merc"),t("./projections/longlat")],o={},a=[];e.add=s,e.get=function(t){if(!t)return!1;var i=t.toLowerCase();return void 0!==o[i]&&a[o[i]]?a[o[i]]:void 0},e.start=function(){n.forEach(s)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(t,i,e){var s=t("../common/msfnz"),n=t("../common/qsfnz"),o=t("../common/adjust_lon"),a=t("../common/asinz");e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=s(this.e3,this.sin_po,this.cos_po),this.qs1=n(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=s(this.e3,this.sin_po,this.cos_po),this.qs2=n(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=n(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},e.forward=function(t){var i=t.x,e=t.y;this.sin_phi=Math.sin(e),this.cos_phi=Math.cos(e);var s=n(this.e3,this.sin_phi,this.cos_phi),a=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,r=this.ns0*o(i-this.long0),h=a*Math.sin(r)+this.x0,l=this.rh-a*Math.cos(r)+this.y0;return t.x=h,t.y=l,t},e.inverse=function(t){var i,e,s,n,a,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1),n=0,0!==i&&(n=Math.atan2(s*t.x,s*t.y)),s=i*this.ns0/this.a,this.sphere?r=Math.asin((this.c-s*s)/(2*this.ns0)):(e=(this.c-s*s)/this.ns0,r=this.phi1z(this.e3,e)),a=o(n/this.ns0+this.long0),t.x=a,t.y=r,t},e.phi1z=function(t,i){var e,s,n,o,r,h=a(.5*i);if(t<1e-10)return h;for(var l=t*t,c=1;c<=25;c++)if(e=Math.sin(h),s=Math.cos(h),n=t*e,o=1-n*n,r=.5*o*o/s*(i/(1-l)-e/o+.5/t*Math.log((1-n)/(1+n))),h+=r,Math.abs(r)<=1e-7)return h;return null},e.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(t,i,e){var s=t("../common/adjust_lon"),n=Math.PI/2,o=t("../common/mlfn"),a=t("../common/e0fn"),r=t("../common/e1fn"),h=t("../common/e2fn"),l=t("../common/e3fn"),c=t("../common/gN"),m=t("../common/asinz"),u=t("../common/imlfn");e.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},e.forward=function(t){var i,e,m,u,p,f,d,y,g,v,M,x,T,b,C,_,L,w,S,P,E,A,$,k=t.x,D=t.y,U=Math.sin(t.y),O=Math.cos(t.y),I=s(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(n-D)*Math.sin(I),t.y=this.y0-this.a*(n-D)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(n+D)*Math.sin(I),t.y=this.y0+this.a*(n+D)*Math.cos(I),t):(w=this.sin_p12*U+this.cos_p12*O*Math.cos(I),_=Math.acos(w),L=_/Math.sin(_),t.x=this.x0+this.a*L*O*Math.sin(I),t.y=this.y0+this.a*L*(this.cos_p12*U-this.sin_p12*O*Math.cos(I)),t):(i=a(this.es),e=r(this.es),m=h(this.es),u=l(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*o(i,e,m,u,n),f=this.a*o(i,e,m,u,D),t.x=this.x0+(p-f)*Math.sin(I),t.y=this.y0-(p-f)*Math.cos(I),t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*o(i,e,m,u,n),f=this.a*o(i,e,m,u,D),t.x=this.x0+(p+f)*Math.sin(I),t.y=this.y0+(p+f)*Math.cos(I),t):(d=U/O,y=c(this.a,this.e,this.sin_p12),g=c(this.a,this.e,U),v=Math.atan((1-this.es)*d+this.es*y*this.sin_p12/(g*O)),M=Math.atan2(Math.sin(I),this.cos_p12*Math.tan(v)-this.sin_p12*Math.cos(I)),S=0===M?Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.abs(Math.abs(M)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(v)-this.sin_p12*Math.cos(v)):Math.asin(Math.sin(I)*Math.cos(v)/Math.sin(M)),x=this.e*this.sin_p12/Math.sqrt(1-this.es),T=this.e*this.cos_p12*Math.cos(M)/Math.sqrt(1-this.es),b=x*T,C=T*T,P=S*S,E=P*S,A=E*S,$=A*S,_=y*S*(1-P*C*(1-C)/6+E/8*b*(1-2*C)+A/120*(C*(4-7*C)-3*x*x*(1-7*C))-$/48*b),t.x=this.x0+_*Math.sin(M),t.y=this.y0+_*Math.cos(M),t))},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var i,e,p,f,d,y,g,v,M,x,T,b,C,_,L,w,S,P,E,A,$,k,D;if(this.sphere){if((i=Math.sqrt(t.x*t.x+t.y*t.y))>2*n*this.a)return;return e=i/this.a,p=Math.sin(e),f=Math.cos(e),d=this.long0,Math.abs(i)<=1e-10?y=this.lat0:(y=m(f*this.sin_p12+t.y*p*this.cos_p12/i),g=Math.abs(this.lat0)-n,d=s(Math.abs(g)<=1e-10?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*p,i*this.cos_p12*f-t.y*this.sin_p12*p))),t.x=d,t.y=y,t}return v=a(this.es),M=r(this.es),x=h(this.es),T=l(this.es),Math.abs(this.sin_p12-1)<=1e-10?(b=this.a*o(v,M,x,T,n),i=Math.sqrt(t.x*t.x+t.y*t.y),C=b-i,y=u(C/this.a,v,M,x,T),d=s(this.long0+Math.atan2(t.x,-1*t.y)),t.x=d,t.y=y,t):Math.abs(this.sin_p12+1)<=1e-10?(b=this.a*o(v,M,x,T,n),i=Math.sqrt(t.x*t.x+t.y*t.y),C=i-b,y=u(C/this.a,v,M,x,T),d=s(this.long0+Math.atan2(t.x,t.y)),t.x=d,t.y=y,t):(i=Math.sqrt(t.x*t.x+t.y*t.y),w=Math.atan2(t.x,t.y),_=c(this.a,this.e,this.sin_p12),S=Math.cos(w),P=this.e*this.cos_p12*S,E=-P*P/(1-this.es),A=3*this.es*(1-E)*this.sin_p12*this.cos_p12*S/(1-this.es),$=i/_,k=$-E*(1+E)*Math.pow($,3)/6-A*(1+3*E)*Math.pow($,4)/24,D=1-E*k*k/2-$*k*k*k/6,L=Math.asin(this.sin_p12*Math.cos(k)+this.cos_p12*Math.sin(k)*S),d=s(this.long0+Math.asin(Math.sin(w)*Math.sin(k)/Math.cos(L))),y=Math.atan((1-this.es*D*this.sin_p12/Math.sin(L))*Math.tan(L)/(1-this.es)),t.x=d,t.y=y,t)},e.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(t,i,e){var s=t("../common/mlfn"),n=t("../common/e0fn"),o=t("../common/e1fn"),a=t("../common/e2fn"),r=t("../common/e3fn"),h=t("../common/gN"),l=t("../common/adjust_lon"),c=t("../common/adjust_lat"),m=t("../common/imlfn"),u=Math.PI/2;e.init=function(){this.sphere||(this.e0=n(this.es),this.e1=o(this.es),this.e2=a(this.es),this.e3=r(this.es),this.ml0=this.a*s(this.e0,this.e1,this.e2,this.e3,this.lat0))},e.forward=function(t){var i,e,n=t.x,o=t.y;if(n=l(n-this.long0),this.sphere)i=this.a*Math.asin(Math.cos(o)*Math.sin(n)),e=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var a=Math.sin(o),r=Math.cos(o),c=h(this.a,this.e,a),m=Math.tan(o)*Math.tan(o),u=n*Math.cos(o),p=u*u,f=this.es*r*r/(1-this.es),d=this.a*s(this.e0,this.e1,this.e2,this.e3,o);i=c*u*(1-p*m*(1/6-(8-m+8*f)*p/120)),e=d-this.ml0+c*a/r*p*(.5+(5-m+6*f)*p/24)}return t.x=i+this.x0,t.y=e+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var i,e,s=t.x/this.a,n=t.y/this.a;if(this.sphere){var o=n+this.lat0;i=Math.asin(Math.sin(o)*Math.cos(s)),e=Math.atan2(Math.tan(s),Math.cos(o))}else{var a=this.ml0/this.a+n,r=m(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-u)<=1e-10)return t.x=this.long0,t.y=u,n<0&&(t.y*=-1),t;var p=h(this.a,this.e,Math.sin(r)),f=p*p*p/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(r),2),y=s*this.a/p,g=y*y;i=r-p*Math.tan(r)/f*y*y*(.5-(1+3*d)*y*y/24),e=y*(1-g*(d/3+(1+3*d)*d*g/15))/Math.cos(r)}return t.x=l(e+this.long0),t.y=c(i),t},e.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,i,e){var s=t("../common/adjust_lon"),n=t("../common/qsfnz"),o=t("../common/msfnz"),a=t("../common/iqsfnz");e.init=function(){this.sphere||(this.k0=o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},e.forward=function(t){var i,e,o=t.x,a=t.y,r=s(o-this.long0);if(this.sphere)i=this.x0+this.a*r*Math.cos(this.lat_ts),e=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var h=n(this.e,Math.sin(a));i=this.x0+this.a*this.k0*r,e=this.y0+this.a*h*.5/this.k0}return t.x=i,t.y=e,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var i,e;return this.sphere?(i=s(this.long0+t.x/this.a/Math.cos(this.lat_ts)),e=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(e=a(this.e,2*t.y*this.k0/this.a),i=s(this.long0+t.x/(this.a*this.k0))),t.x=i,t.y=e,t},e.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(t,i,e){var s=t("../common/adjust_lon"),n=t("../common/adjust_lat");e.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},e.forward=function(t){var i=t.x,e=t.y,o=s(i-this.long0),a=n(e-this.lat0);return t.x=this.x0+this.a*o*this.rc,t.y=this.y0+this.a*a,t},e.inverse=function(t){var i=t.x,e=t.y;return t.x=s(this.long0+(i-this.x0)/(this.a*this.rc)),t.y=n(this.lat0+(e-this.y0)/this.a),t},e.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(t,i,e){var s=t("../common/e0fn"),n=t("../common/e1fn"),o=t("../common/e2fn"),a=t("../common/e3fn"),r=t("../common/msfnz"),h=t("../common/mlfn"),l=t("../common/adjust_lon"),c=t("../common/adjust_lat"),m=t("../common/imlfn");e.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=s(this.es),this.e1=n(this.es),this.e2=o(this.es),this.e3=a(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=r(this.e,this.sinphi,this.cosphi),this.ml1=h(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=r(this.e,this.sinphi,this.cosphi),this.ml2=h(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},e.forward=function(t){var i,e=t.x,s=t.y;if(this.sphere)i=this.a*(this.g-s);else{var n=h(this.e0,this.e1,this.e2,this.e3,s);i=this.a*(this.g-n)}var o=this.ns*l(e-this.long0),a=this.x0+i*Math.sin(o),r=this.y0+this.rh-i*Math.cos(o);return t.x=a,t.y=r,t},e.inverse=function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var i,e,s,n;this.ns>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1);var o=0;if(0!==e&&(o=Math.atan2(i*t.x,i*t.y)),this.sphere)return n=l(this.long0+o/this.ns),s=c(this.g-e/this.a),t.x=n,t.y=s,t;var a=this.g-e/this.a;return s=m(a,this.e0,this.e1,this.e2,this.e3),n=l(this.long0+o/this.ns),t.x=n,t.y=s,t},e.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(t,i,e){var s=Math.PI/4,n=t("../common/srat"),o=Math.PI/2;e.init=function(){var t=Math.sin(this.lat0),i=Math.cos(this.lat0);i*=i,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*i*i/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s)/(Math.pow(Math.tan(.5*this.lat0+s),this.C)*n(this.e*t,this.ratexp))},e.forward=function(t){var i=t.x,e=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*e+s),this.C)*n(this.e*Math.sin(e),this.ratexp))-o,t.x=this.C*i,t},e.inverse=function(t){for(var i=t.x/this.C,e=t.y,a=Math.pow(Math.tan(.5*e+s)/this.K,1/this.C),r=20;r>0&&(e=2*Math.atan(a*n(this.e*Math.sin(t.y),-.5*this.e))-o,!(Math.abs(e-t.y)<1e-14));--r)t.y=e;return r?(t.x=i,t.y=e,t):null},e.names=["gauss"]},{"../common/srat":22}],46:[function(t,i,e){var s=t("../common/adjust_lon"),n=t("../common/asinz");e.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},e.forward=function(t){var i,e,n,o,a,r,h,l,c=t.x,m=t.y;return n=s(c-this.long0),i=Math.sin(m),e=Math.cos(m),o=Math.cos(n),r=this.sin_p14*i+this.cos_p14*e*o,a=1,r>0||Math.abs(r)<=1e-10?(h=this.x0+this.a*a*e*Math.sin(n)/r,l=this.y0+this.a*a*(this.cos_p14*i-this.sin_p14*e*o)/r):(h=this.x0+this.infinity_dist*e*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*i-this.sin_p14*e*o)),t.x=h,t.y=l,t},e.inverse=function(t){var i,e,o,a,r,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(i=Math.sqrt(t.x*t.x+t.y*t.y))?(a=Math.atan2(i,this.rc),e=Math.sin(a),o=Math.cos(a),h=n(o*this.sin_p14+t.y*e*this.cos_p14/i),r=Math.atan2(t.x*e,i*this.cos_p14*o-t.y*this.sin_p14*e),r=s(this.long0+r)):(h=this.phic0,r=0),t.x=r,t.y=h,t},e.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(t,i,e){var s=t("../common/adjust_lon");e.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},e.forward=function(t){var i,e,n,o,a,r,h,l=t.x,c=t.y,m=s(l-this.long0);return i=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),e=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/i)-this.s45),n=-m*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(e)+Math.sin(this.ad)*Math.cos(e)*Math.cos(n)),a=Math.asin(Math.cos(e)*Math.sin(n)/Math.cos(o)),r=this.n*a,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=h*Math.cos(r)/1,t.x=h*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},e.inverse=function(t){var i,e,s,n,o,a,r,h,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x),n=o/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),i=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(n)),e=Math.asin(Math.cos(s)*Math.sin(n)/Math.cos(i)),t.x=this.long0-e/this.alfa,r=i,h=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(i/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(h=1),r=t.y,c+=1}while(0===h&&c<15);return c>=15?null:t},e.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],48:[function(t,i,e){var s=Math.PI/2,n=Math.PI/4,o=t("../common/qsfnz"),a=t("../common/adjust_lon");e.S_POLE=1,e.N_POLE=2,e.EQUIT=3,e.OBLIQ=4,e.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-s)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var i;switch(this.qp=o(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),i=Math.sin(this.lat0),this.sinb1=o(this.e,i)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*i*i)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},e.forward=function(t){var i,e,r,h,l,c,m,u,p,f,d=t.x,y=t.y;if(d=a(d-this.long0),this.sphere){if(l=Math.sin(y),f=Math.cos(y),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((e=this.mode===this.EQUIT?1+f*r:1+this.sinph0*l+this.cosph0*f*r)<=1e-10)return null;e=Math.sqrt(2/e),i=e*f*Math.sin(d),e*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(y+this.phi0)<1e-10)return null;e=n-.5*y,e=2*(this.mode===this.S_POLE?Math.cos(e):Math.sin(e)),i=e*Math.sin(d),e*=r}}else{switch(m=0,u=0,p=0,r=Math.cos(d),h=Math.sin(d),l=Math.sin(y),c=o(this.e,l),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=c/this.qp,u=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:p=1+this.sinb1*m+this.cosb1*u*r;break;case this.EQUIT:p=1+u*r;break;case this.N_POLE:p=s+y,c=this.qp-c;break;case this.S_POLE:p=y-s,c=this.qp+c}if(Math.abs(p)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),e=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*m-this.sinb1*u*r):(p=Math.sqrt(2/(1+u*r)))*m*this.ymf,i=this.xmf*p*u*h;break;case this.N_POLE:case this.S_POLE:c>=0?(i=(p=Math.sqrt(c))*h,e=r*(this.mode===this.S_POLE?p:-p)):i=e=0}}return t.x=this.a*i+this.x0,t.y=this.a*e+this.y0,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var i,e,n,o,r,h,l,c=t.x/this.a,m=t.y/this.a;if(this.sphere){var u,p=0,f=0;if(u=Math.sqrt(c*c+m*m),(e=.5*u)>1)return null;switch(e=2*Math.asin(e),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(e),p=Math.cos(e)),this.mode){case this.EQUIT:e=Math.abs(u)<=1e-10?0:Math.asin(m*f/u),c*=f,m=p*u;break;case this.OBLIQ:e=Math.abs(u)<=1e-10?this.phi0:Math.asin(p*this.sinph0+m*f*this.cosph0/u),c*=f*this.cosph0,m=(p-Math.sin(e)*this.sinph0)*u;break;case this.N_POLE:m=-m,e=s-e;break;case this.S_POLE:e-=s}i=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,m):0}else{if(l=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,m*=this.dd,(h=Math.sqrt(c*c+m*m))<1e-10)return t.x=0,t.y=this.phi0,t;o=2*Math.asin(.5*h/this.rq),n=Math.cos(o),c*=o=Math.sin(o),this.mode===this.OBLIQ?(l=n*this.sinb1+m*o*this.cosb1/h,r=this.qp*l,m=h*this.cosb1*n-m*this.sinb1*o):(l=m*o/h,r=this.qp*l,m=h*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),!(r=c*c+m*m))return t.x=0,t.y=this.phi0,t;l=1-r/this.qp,this.mode===this.S_POLE&&(l=-l)}i=Math.atan2(c,m),e=this.authlat(Math.asin(l),this.apa)}return t.x=a(this.long0+i),t.y=e,t},e.P00=.3333333333333333,e.P01=.17222222222222222,e.P02=.10257936507936508,e.P10=.06388888888888888,e.P11=.0664021164021164,e.P20=.016415012942191543,e.authset=function(t){var i,e=[];return e[0]=t*this.P00,i=t*t,e[0]+=i*this.P01,e[1]=i*this.P10,i*=t,e[0]+=i*this.P02,e[1]+=i*this.P11,e[2]=i*this.P20,e},e.authlat=function(t,i){var e=t+t;return t+i[0]*Math.sin(e)+i[1]*Math.sin(e+e)+i[2]*Math.sin(e+e+e)},
e.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(t,i,e){var s=t("../common/msfnz"),n=t("../common/tsfnz"),o=Math.PI/2,a=t("../common/sign"),r=t("../common/adjust_lon"),h=t("../common/phi2z");e.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var i=Math.sin(this.lat1),e=Math.cos(this.lat1),o=s(this.e,i,e),a=n(this.e,this.lat1,i),r=Math.sin(this.lat2),h=Math.cos(this.lat2),l=s(this.e,r,h),c=n(this.e,this.lat2,r),m=n(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(o/l)/Math.log(a/c):this.ns=i,isNaN(this.ns)&&(this.ns=i),this.f0=o/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}},e.forward=function(t){var i=t.x,e=t.y;Math.abs(2*Math.abs(e)-Math.PI)<=1e-10&&(e=a(e)*(o-2e-10));var s,h,l=Math.abs(Math.abs(e)-o);if(l>1e-10)s=n(this.e,e,Math.sin(e)),h=this.a*this.f0*Math.pow(s,this.ns);else{if((l=e*this.ns)<=0)return null;h=0}var c=this.ns*r(i-this.long0);return t.x=this.k0*(h*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(c))+this.y0,t},e.inverse=function(t){var i,e,s,n,a,l=(t.x-this.x0)/this.k0,c=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(i=Math.sqrt(l*l+c*c),e=1):(i=-Math.sqrt(l*l+c*c),e=-1);var m=0;if(0!==i&&(m=Math.atan2(e*l,e*c)),0!==i||this.ns>0){if(e=1/this.ns,s=Math.pow(i/(this.a*this.f0),e),-9999===(n=h(this.e,s)))return null}else n=-o;return a=r(m/this.ns+this.long0),t.x=a,t.y=n,t},e.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(t,i,e){function s(t){return t}e.init=function(){},e.forward=s,e.inverse=s,e.names=["longlat","identity"]},{}],51:[function(t,i,e){var s=t("../common/msfnz"),n=Math.PI/2,o=57.29577951308232,a=t("../common/adjust_lon"),r=Math.PI/4,h=t("../common/tsfnz"),l=t("../common/phi2z");e.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=s(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},e.forward=function(t){var i=t.x,e=t.y;if(e*o>90&&e*o<-90&&i*o>180&&i*o<-180)return null;var s,l;if(Math.abs(Math.abs(e)-n)<=1e-10)return null;if(this.sphere)s=this.x0+this.a*this.k0*a(i-this.long0),l=this.y0+this.a*this.k0*Math.log(Math.tan(r+.5*e));else{var c=Math.sin(e),m=h(this.e,e,c);s=this.x0+this.a*this.k0*a(i-this.long0),l=this.y0-this.a*this.k0*Math.log(m)}return t.x=s,t.y=l,t},e.inverse=function(t){var i,e,s=t.x-this.x0,o=t.y-this.y0;if(this.sphere)e=n-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var r=Math.exp(-o/(this.a*this.k0));if(-9999===(e=l(this.e,r)))return null}return i=a(this.long0+s/(this.a*this.k0)),t.x=i,t.y=e,t},e.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(t,i,e){var s=t("../common/adjust_lon");e.init=function(){},e.forward=function(t){var i=t.x,e=t.y,n=s(i-this.long0),o=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+e/2.5))*1.25;return t.x=o,t.y=a,t},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var i=s(this.long0+t.x/this.a),e=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=i,t.y=e,t},e.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],53:[function(t,i,e){var s=t("../common/adjust_lon");e.init=function(){},e.forward=function(t){for(var i=t.x,e=t.y,n=s(i-this.long0),o=e,a=Math.PI*Math.sin(e),r=0;!0;r++){var h=-(o+Math.sin(o)-a)/(1+Math.cos(o));if(o+=h,Math.abs(h)<1e-10)break}o/=2,Math.PI/2-Math.abs(e)<1e-10&&(n=0);var l=.900316316158*this.a*n*Math.cos(o)+this.x0,c=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=l,t.y=c,t},e.inverse=function(t){var i,e;t.x-=this.x0,t.y-=this.y0,e=t.y/(1.4142135623731*this.a),Math.abs(e)>.999999999999&&(e=.999999999999),i=Math.asin(e);var n=s(this.long0+t.x/(.900316316158*this.a*Math.cos(i)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),e=(2*i+Math.sin(2*i))/Math.PI,Math.abs(e)>1&&(e=1);var o=Math.asin(e);return t.x=n,t.y=o,t},e.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],54:[function(t,i,e){e.iterations=1,e.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},e.forward=function(t){var i,e=t.x,s=t.y,n=s-this.lat0,o=e-this.long0,a=n/484813681109536e-20*1e-5,r=o,h=1,l=0;for(i=1;i<=10;i++)h*=a,l+=this.A[i]*h;var c,m,u=l,p=r,f=1,d=0,y=0,g=0;for(i=1;i<=6;i++)c=f*u-d*p,m=d*u+f*p,f=c,d=m,y=y+this.B_re[i]*f-this.B_im[i]*d,g=g+this.B_im[i]*f+this.B_re[i]*d;return t.x=g*this.a+this.x0,t.y=y*this.a+this.y0,t},e.inverse=function(t){var i,e,s,n=t.x,o=t.y,a=n-this.x0,r=o-this.y0,h=r/this.a,l=a/this.a,c=1,m=0,u=0,p=0;for(i=1;i<=6;i++)e=c*h-m*l,s=m*h+c*l,c=e,m=s,u=u+this.C_re[i]*c-this.C_im[i]*m,p=p+this.C_im[i]*c+this.C_re[i]*m;for(var f=0;f<this.iterations;f++){var d,y,g=u,v=p,M=h,x=l;for(i=2;i<=6;i++)d=g*u-v*p,y=v*u+g*p,g=d,v=y,M+=(i-1)*(this.B_re[i]*g-this.B_im[i]*v),x+=(i-1)*(this.B_im[i]*g+this.B_re[i]*v);g=1,v=0;var T=this.B_re[1],b=this.B_im[1];for(i=2;i<=6;i++)d=g*u-v*p,y=v*u+g*p,g=d,v=y,T+=i*(this.B_re[i]*g-this.B_im[i]*v),b+=i*(this.B_im[i]*g+this.B_re[i]*v);var C=T*T+b*b;u=(M*T+x*b)/C,p=(x*T-M*b)/C}var _=u,L=p,w=1,S=0;for(i=1;i<=9;i++)w*=_,S+=this.D[i]*w;var P=this.lat0+484813681109536e-20*S*1e5,E=this.long0+L;return t.x=E,t.y=P,t},e.names=["New_Zealand_Map_Grid","nzmg"]},{}],55:[function(t,i,e){var s=t("../common/tsfnz"),n=t("../common/adjust_lon"),o=t("../common/phi2z"),a=Math.PI/2,r=Math.PI/4;e.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),i=Math.cos(this.lat0),e=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(i,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-e*e);var o=s(this.e,this.lat0,t),a=this.bl/i*Math.sqrt((1-this.es)/(1-e*e));a*a<1&&(a=1);var r,h;if(isNaN(this.longc)){var l=s(this.e,this.lat1,Math.sin(this.lat1)),c=s(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var m=Math.pow(l,this.bl),u=Math.pow(c,this.bl);r=this.el/m,h=.5*(r-1/r);var p=(this.el*this.el-u*m)/(this.el*this.el+u*m),f=(u-m)/(u+m),d=n(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(p*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=n(this.long0);var y=n(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/h),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),h=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},e.forward=function(t){var i,e,o,h=t.x,l=t.y,c=n(h-this.long0);if(Math.abs(Math.abs(l)-a)<=1e-10)o=l>0?-1:1,e=this.al/this.bl*Math.log(Math.tan(r+o*this.gamma0*.5)),i=-1*o*a*this.al/this.bl;else{var m=s(this.e,l,Math.sin(l)),u=this.el/Math.pow(m,this.bl),p=.5*(u-1/u),f=.5*(u+1/u),d=Math.sin(this.bl*c),y=(p*Math.sin(this.gamma0)-d*Math.cos(this.gamma0))/f;e=Math.abs(Math.abs(y)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-y)/(1+y))/this.bl,i=Math.abs(Math.cos(this.bl*c))<=1e-10?this.al*this.bl*c:this.al*Math.atan2(p*Math.cos(this.gamma0)+d*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+i,t.y=this.y0+e):(i-=this.uc,t.x=this.x0+e*Math.cos(this.alpha)+i*Math.sin(this.alpha),t.y=this.y0+i*Math.cos(this.alpha)-e*Math.sin(this.alpha)),t},e.inverse=function(t){var i,e;this.no_rot?(e=t.y-this.y0,i=t.x-this.x0):(e=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),i=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),i+=this.uc);var s=Math.exp(-1*this.bl*e/this.al),r=.5*(s-1/s),h=.5*(s+1/s),l=Math.sin(this.bl*i/this.al),c=(l*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/h,m=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<1e-10?(t.x=this.long0,t.y=a):Math.abs(c+1)<1e-10?(t.x=this.long0,t.y=-1*a):(t.y=o(this.e,m),t.x=n(this.long0-Math.atan2(r*Math.cos(this.gamma0)-l*Math.sin(this.gamma0),Math.cos(this.bl*i/this.al))/this.bl)),t},e.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(t,i,e){var s=t("../common/e0fn"),n=t("../common/e1fn"),o=t("../common/e2fn"),a=t("../common/e3fn"),r=t("../common/adjust_lon"),h=t("../common/adjust_lat"),l=t("../common/mlfn"),c=t("../common/gN");e.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=s(this.es),this.e1=n(this.es),this.e2=o(this.es),this.e3=a(this.es),this.ml0=this.a*l(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var i,e,s,n=t.x,o=t.y,a=r(n-this.long0);if(s=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(i=this.a*a,e=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(o),e=this.a*(h(o-this.lat0)+(1-Math.cos(s))/Math.tan(o)));else if(Math.abs(o)<=1e-10)i=this.a*a,e=-1*this.ml0;else{var m=c(this.a,this.e,Math.sin(o))/Math.tan(o);i=m*Math.sin(s),e=this.a*l(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+m*(1-Math.cos(s))}return t.x=i+this.x0,t.y=e+this.y0,t},e.inverse=function(t){var i,e,s,n,o,a,h,c,m;if(s=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=1e-10)i=r(s/this.a+this.long0),e=0;else{a=this.lat0+n/this.a,h=s*s/this.a/this.a+a*a,c=a;var u;for(o=20;o;--o)if(u=Math.tan(c),m=-1*(a*(c*u+1)-c-.5*(c*c+h)*u)/((c-a)/u-1),c+=m,Math.abs(m)<=1e-10){e=c;break}i=r(this.long0+Math.asin(s*Math.tan(c)/this.a)/Math.sin(e))}else if(Math.abs(n+this.ml0)<=1e-10)e=0,i=r(this.long0+s/this.a);else{a=(this.ml0+n)/this.a,h=s*s/this.a/this.a+a*a,c=a;var p,f,d,y,g;for(o=20;o;--o)if(g=this.e*Math.sin(c),p=Math.sqrt(1-g*g)*Math.tan(c),f=this.a*l(this.e0,this.e1,this.e2,this.e3,c),d=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),y=f/this.a,m=(a*(p*y+1)-y-.5*p*(y*y+h))/(this.es*Math.sin(2*c)*(y*y+h-2*a*y)/(4*p)+(a-y)*(p*d-2/Math.sin(2*c))-d),c-=m,Math.abs(m)<=1e-10){e=c;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(e),2))*Math.tan(e),i=r(this.long0+Math.asin(s*p/this.a)/Math.sin(e))}return t.x=i,t.y=e,t},e.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(t,i,e){var s=t("../common/adjust_lon"),n=t("../common/adjust_lat"),o=t("../common/pj_enfn"),a=t("../common/pj_mlfn"),r=t("../common/pj_inv_mlfn"),h=Math.PI/2,l=t("../common/asinz");e.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=o(this.es)},e.forward=function(t){var i,e,n=t.x,o=t.y;if(n=s(n-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(o),h=20;h;--h){var l=(this.m*o+Math.sin(o)-r)/(this.m+Math.cos(o));if(o-=l,Math.abs(l)<1e-10)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;i=this.a*this.C_x*n*(this.m+Math.cos(o)),e=this.a*this.C_y*o}else{var c=Math.sin(o),m=Math.cos(o);e=this.a*a(o,c,m,this.en),i=this.a*n*m/Math.sqrt(1-this.es*c*c)}return t.x=i,t.y=e,t},e.inverse=function(t){var i,e,o,a;return t.x-=this.x0,o=t.x/this.a,t.y-=this.y0,i=t.y/this.a,this.sphere?(i/=this.C_y,o/=this.C_x*(this.m+Math.cos(i)),this.m?i=l((this.m*i+Math.sin(i))/this.n):1!==this.n&&(i=l(Math.sin(i)/this.n)),o=s(o+this.long0),i=n(i)):(i=r(t.y/this.a,this.es,this.en),a=Math.abs(i),a<h?(a=Math.sin(i),e=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(i)),o=s(e)):a-1e-10<h&&(o=this.long0)),t.x=o,t.y=i,t},e.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(t,i,e){e.init=function(){var t=this.lat0;this.lambda0=this.long0;var i=Math.sin(t),e=this.a,s=this.rf,n=1/s,o=2*n-Math.pow(n,2),a=this.e=Math.sqrt(o);this.R=this.k0*e*Math.sqrt(1-o)/(1-o*Math.pow(i,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(i/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),h=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+a*i)/(1-a*i));this.K=r-this.alpha*h+this.alpha*a/2*l},e.forward=function(t){var i=Math.log(Math.tan(Math.PI/4-t.y/2)),e=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(i+e)+this.K,n=2*(Math.atan(Math.exp(s))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(o))),r=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*a+this.x0,t},e.inverse=function(t){for(var i=t.x-this.x0,e=t.y-this.y0,s=i/this.R,n=2*(Math.atan(Math.exp(e/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(s)),a=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(n))),r=this.lambda0+a/this.alpha,h=0,l=o,c=-1e3,m=0;Math.abs(l-c)>1e-7;){if(++m>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=r,t.y=l,t},e.names=["somerc"]},{}],59:[function(t,i,e){var s=Math.PI/2,n=t("../common/sign"),o=t("../common/msfnz"),a=t("../common/tsfnz"),r=t("../common/phi2z"),h=t("../common/adjust_lon");e.ssfn_=function(t,i,e){return i*=e,Math.tan(.5*(s+t))*Math.pow((1-i)/(1+i),.5*e)},e.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+n(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*o(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/a(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=o(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-s,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},e.forward=function(t){var i,e,n,o,r,l,c=t.x,m=t.y,u=Math.sin(m),p=Math.cos(m),f=h(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=1e-10&&Math.abs(m+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(i=2*this.k0/(1+this.sinlat0*u+this.coslat0*p*Math.cos(f)),t.x=this.a*i*p*Math.sin(f)+this.x0,t.y=this.a*i*(this.coslat0*u-this.sinlat0*p*Math.cos(f))+this.y0,t):(e=2*Math.atan(this.ssfn_(m,u,this.e))-s,o=Math.cos(e),n=Math.sin(e),Math.abs(this.coslat0)<=1e-10?(r=a(this.e,m*this.con,this.con*u),l=2*this.a*this.k0*r/this.cons,t.x=this.x0+l*Math.sin(c-this.long0),t.y=this.y0-this.con*l*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(i=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=i*n):(i=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),t.y=i*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),t.x=i*o*Math.sin(f)+this.x0,t))},e.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var i,e,n,o,a,l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(l/(.5*this.a*this.k0));return i=this.long0,(e=this.lat0,l<=1e-10)?(t.x=i,t.y=e,t):(e=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/l),i=h(Math.abs(this.coslat0)<1e-10?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),l*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=i,t.y=e,t)}if(Math.abs(this.coslat0)<=1e-10){if(l<=1e-10)return e=this.lat0,i=this.long0,t.x=i,t.y=e,t;t.x*=this.con,t.y*=this.con,n=l*this.cons/(2*this.a*this.k0),e=this.con*r(this.e,n),i=this.con*h(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),i=this.long0,l<=1e-10?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/l),i=h(this.long0+Math.atan2(t.x*Math.sin(o),l*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),e=-1*r(this.e,Math.tan(.5*(s+a)));return t.x=i,t.y=e,t},e.names=["stere"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(t,i,e){var s=t("./gauss"),n=t("../common/adjust_lon");e.init=function(){s.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},e.forward=function(t){var i,e,o,a;return t.x=n(t.x-this.long0),s.forward.apply(this,[t]),i=Math.sin(t.y),e=Math.cos(t.y),o=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*i+this.cosc0*e*o),t.x=a*e*Math.sin(t.x),t.y=a*(this.cosc0*i-this.sinc0*e*o),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},e.inverse=function(t){var i,e,o,a,r;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,r=Math.sqrt(t.x*t.x+t.y*t.y)){var h=2*Math.atan2(r,this.R2);i=Math.sin(h),e=Math.cos(h),a=Math.asin(e*this.sinc0+t.y*i*this.cosc0/r),o=Math.atan2(t.x*i,r*this.cosc0*e-t.y*this.sinc0*i)}else a=this.phic0,o=0;return t.x=o,t.y=a,s.inverse.apply(this,[t]),t.x=n(t.x+this.long0),t},e.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":45}],61:[function(t,i,e){var s=t("../common/e0fn"),n=t("../common/e1fn"),o=t("../common/e2fn"),a=t("../common/e3fn"),r=t("../common/mlfn"),h=t("../common/adjust_lon"),l=Math.PI/2,c=t("../common/sign"),m=t("../common/asinz");e.init=function(){this.e0=s(this.es),this.e1=n(this.es),this.e2=o(this.es),this.e3=a(this.es),this.ml0=this.a*r(this.e0,this.e1,this.e2,this.e3,this.lat0)},e.forward=function(t){var i,e,s,n=t.x,o=t.y,a=h(n-this.long0),l=Math.sin(o),c=Math.cos(o);if(this.sphere){var m=c*Math.sin(a);if(Math.abs(Math.abs(m)-1)<1e-10)return 93;e=.5*this.a*this.k0*Math.log((1+m)/(1-m)),i=Math.acos(c*Math.cos(a)/Math.sqrt(1-m*m)),o<0&&(i=-i),s=this.a*this.k0*(i-this.lat0)}else{var u=c*a,p=Math.pow(u,2),f=this.ep2*Math.pow(c,2),d=Math.tan(o),y=Math.pow(d,2);i=1-this.es*Math.pow(l,2);var g=this.a/Math.sqrt(i),v=this.a*r(this.e0,this.e1,this.e2,this.e3,o);e=this.k0*g*u*(1+p/6*(1-y+f+p/20*(5-18*y+Math.pow(y,2)+72*f-58*this.ep2)))+this.x0,s=this.k0*(v-this.ml0+g*d*(p*(.5+p/24*(5-y+9*f+4*Math.pow(f,2)+p/30*(61-58*y+Math.pow(y,2)+600*f-330*this.ep2)))))+this.y0}return t.x=e,t.y=s,t},e.inverse=function(t){var i,e,s,n,o,a;if(this.sphere){var r=Math.exp(t.x/(this.a*this.k0)),u=.5*(r-1/r),p=this.lat0+t.y/(this.a*this.k0),f=Math.cos(p);i=Math.sqrt((1-f*f)/(1+u*u)),o=m(i),p<0&&(o=-o),a=0===u&&0===f?this.long0:h(Math.atan2(u,f)+this.long0)}else{var d=t.x-this.x0,y=t.y-this.y0;for(i=(this.ml0+y/this.k0)/this.a,e=i,n=0;!0&&(s=(i+this.e1*Math.sin(2*e)-this.e2*Math.sin(4*e)+this.e3*Math.sin(6*e))/this.e0-e,e+=s,!(Math.abs(s)<=1e-10));n++)if(n>=6)return 95;if(Math.abs(e)<l){var g=Math.sin(e),v=Math.cos(e),M=Math.tan(e),x=this.ep2*Math.pow(v,2),T=Math.pow(x,2),b=Math.pow(M,2),C=Math.pow(b,2);i=1-this.es*Math.pow(g,2);var _=this.a/Math.sqrt(i),L=_*(1-this.es)/i,w=d/(_*this.k0),S=Math.pow(w,2);o=e-_*M*S/L*(.5-S/24*(5+3*b+10*x-4*T-9*this.ep2-S/30*(61+90*b+298*x+45*C-252*this.ep2-3*T))),a=h(this.long0+w*(1-S/6*(1+2*b+x-S/20*(5-2*x+28*b-3*T+8*this.ep2+24*C)))/v)}else o=l*c(y),a=this.long0}return t.x=a,t.y=o,t},e.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(t,i,e){var s=t("./tmerc");e.dependsOn="tmerc",e.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,s.init.apply(this),this.forward=s.forward,this.inverse=s.inverse)},e.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(t,i,e){var s=t("../common/adjust_lon"),n=Math.PI/2,o=t("../common/asinz");e.init=function(){this.R=this.a},e.forward=function(t){var i,e,a=t.x,r=t.y,h=s(a-this.long0);Math.abs(r)<=1e-10&&(i=this.x0+this.R*h,e=this.y0);var l=o(2*Math.abs(r/Math.PI));(Math.abs(h)<=1e-10||Math.abs(Math.abs(r)-n)<=1e-10)&&(i=this.x0,e=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var c=.5*Math.abs(Math.PI/h-h/Math.PI),m=c*c,u=Math.sin(l),p=Math.cos(l),f=p/(u+p-1),d=f*f,y=f*(2/u-1),g=y*y,v=Math.PI*this.R*(c*(f-g)+Math.sqrt(m*(f-g)*(f-g)-(g+m)*(d-g)))/(g+m);h<0&&(v=-v),i=this.x0+v;var M=m+f;return v=Math.PI*this.R*(y*M-c*Math.sqrt((g+m)*(m+1)-M*M))/(g+m),e=r>=0?this.y0+v:this.y0-v,t.x=i,t.y=e,t},e.inverse=function(t){var i,e,n,o,a,r,h,l,c,m,u,p,f;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,n=t.x/u,o=t.y/u,a=n*n+o*o,r=-Math.abs(o)*(1+a),h=r-2*o*o+n*n,l=-2*r+1+2*o*o+a*a,f=o*o/l+(2*h*h*h/l/l/l-9*r*h/l/l)/27,c=(r-h*h/3/l)/l,m=2*Math.sqrt(-c/3),u=3*f/c/m,Math.abs(u)>1&&(u=u>=0?1:-1),p=Math.acos(u)/3,e=t.y>=0?(-m*Math.cos(p+Math.PI/3)-h/3/l)*Math.PI:-(-m*Math.cos(p+Math.PI/3)-h/3/l)*Math.PI,i=Math.abs(n)<1e-10?this.long0:s(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-o*o)+a*a))/2/n),t.x=i,t.y=e,t},e.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(t,i,e){var s=.017453292519943295,n=57.29577951308232,o=t("./datum_transform"),a=t("./adjust_axis"),r=t("./Proj"),h=t("./common/toPoint");i.exports=function t(i,e,l){function c(t,i){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==i.datumCode}var m;return Array.isArray(l)&&(l=h(l)),i.datum&&e.datum&&(c(i,e)||c(e,i))&&(m=new r("WGS84"),t(i,m,l),i=m),"enu"!==i.axis&&a(i,!1,l),"longlat"===i.projName?(l.x*=s,l.y*=s):(i.to_meter&&(l.x*=i.to_meter,l.y*=i.to_meter),i.inverse(l)),i.from_greenwich&&(l.x+=i.from_greenwich),l=o(i.datum,e.datum,l),e.from_greenwich&&(l.x-=e.from_greenwich),"longlat"===e.projName?(l.x*=n,l.y*=n):(e.forward(l),e.to_meter&&(l.x/=e.to_meter,l.y/=e.to_meter)),"enu"!==e.axis&&a(e,!0,l),l}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(t,i,e){function s(t,i,e){t[i]=e.map(function(t){var i={};return n(t,i),i}).reduce(function(t,i){return l(t,i)},{})}function n(t,i){var e;if(!Array.isArray(t))return void(i[t]=!0);e=t.shift(),"PARAMETER"===e&&(e=t.shift()),1===t.length?Array.isArray(t[0])?(i[e]={},n(t[0],i[e])):i[e]=t[0]:t.length?"TOWGS84"===e?i[e]=t:(i[e]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(e)>-1?(i[e]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(i[e].auth=t[2])):"SPHEROID"===e?(i[e]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(i[e].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(e)>-1?(t[0]=["name",t[0]],s(i,e,t)):t.every(function(t){return Array.isArray(t)})?s(i,e,t):n(t,i[e])):i[e]=!0}function o(t,i){var e=i[0],s=i[1];!(e in t)&&s in t&&(t[e]=t[s],3===i.length&&(t[e]=i[2](t[e])))}function a(t){return t*h}function r(t){function i(i){var e=t.to_meter||1;return parseFloat(i,10)*e}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===_typeof(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&(t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",a],["x0","false_easting",i],["y0","false_northing",i],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["alpha","azimuth",a],["srsCode","name"]].forEach(function(i){return o(t,i)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==t.PROJECTION||(t.long0=t.longc)}var h=.017453292519943295,l=t("./extend");i.exports=function(t,i){var e=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]')),s=e.shift(),o=e.shift();e.unshift(["name",o]),e.unshift(["type",s]),e.unshift("output");var a={};return n(e,a),r(a.output),l(i,a.output)}},{"./extend":33}],66:[function(t,i,e){function s(t){return t*(Math.PI/180)}function n(t){return t/Math.PI*180}function o(t){var i,e,n,o,a,h,l,c,m,u=t.lat,p=t.lon,f=6378137,d=s(u),y=s(p);m=Math.floor((p+180)/6)+1,180===p&&(m=60),u>=56&&u<64&&p>=3&&p<12&&(m=32),u>=72&&u<84&&(p>=0&&p<9?m=31:p>=9&&p<21?m=33:p>=21&&p<33?m=35:p>=33&&p<42&&(m=37)),i=6*(m-1)-180+3,c=s(i),e=.006739496752268451,n=f/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),o=Math.tan(d)*Math.tan(d),a=e*Math.cos(d)*Math.cos(d),h=Math.cos(d)*(y-c),l=f*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d));var g=.9996*n*(h+(1-o+a)*h*h*h/6+(5-18*o+o*o+72*a-58*e)*h*h*h*h*h/120)+5e5,v=.9996*(l+n*Math.tan(d)*(h*h/2+(5-o+9*a+4*a*a)*h*h*h*h/24+(61-58*o+o*o+600*a-330*e)*h*h*h*h*h*h/720));return u<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(g),zoneNumber:m,zoneLetter:r(u)}}function a(t){var i=t.northing,e=t.easting,s=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var r,h,l,c,m,u,p,f,d,y,g=6378137,v=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),M=e-5e5,x=i;s<"N"&&(x-=1e7),f=6*(o-1)-180+3,r=.006739496752268451,p=x/.9996,d=p/6367449.145945056,y=d+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),h=g/Math.sqrt(1-.00669438*Math.sin(y)*Math.sin(y)),l=Math.tan(y)*Math.tan(y),c=r*Math.cos(y)*Math.cos(y),m=.99330562*g/Math.pow(1-.00669438*Math.sin(y)*Math.sin(y),1.5),u=M/(.9996*h);var T=y-h*Math.tan(y)/m*(u*u/2-(5+3*l+10*c-4*c*c-9*r)*u*u*u*u/24+(61+90*l+298*c+45*l*l-252*r-3*c*c)*u*u*u*u*u*u/720);T=n(T);var b=(u-(1+2*l+c)*u*u*u/6+(5-2*c+28*l-3*c*c+8*r+24*l*l)*u*u*u*u*u/120)/Math.cos(y);b=f+n(b);var C;if(t.accuracy){var _=a({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:_.lat,right:_.lon,bottom:T,left:b}}else C={lat:T,lon:b};return C}function r(t){var i="Z";return 84>=t&&t>=72?i="X":72>t&&t>=64?i="W":64>t&&t>=56?i="V":56>t&&t>=48?i="U":48>t&&t>=40?i="T":40>t&&t>=32?i="S":32>t&&t>=24?i="R":24>t&&t>=16?i="Q":16>t&&t>=8?i="P":8>t&&t>=0?i="N":0>t&&t>=-8?i="M":-8>t&&t>=-16?i="L":-16>t&&t>=-24?i="K":-24>t&&t>=-32?i="J":-32>t&&t>=-40?i="H":-40>t&&t>=-48?i="G":-48>t&&t>=-56?i="F":-56>t&&t>=-64?i="E":-64>t&&t>=-72?i="D":-72>t&&t>=-80&&(i="C"),i}function h(t,i){var e=""+t.easting,s=""+t.northing;return t.zoneNumber+t.zoneLetter+l(t.easting,t.northing,t.zoneNumber)+e.substr(e.length-5,i)+s.substr(s.length-5,i)}function l(t,i,e){var s=c(e);return m(Math.floor(t/1e5),Math.floor(i/1e5)%20,s)}function c(t){var i=t%y;return 0===i&&(i=y),i}function m(t,i,e){var s=e-1,n=g.charCodeAt(s),o=v.charCodeAt(s),a=n+t-1,r=o+i,h=!1;return a>C&&(a=a-C+M-1,h=!0),(a===x||n<x&&a>x||(a>x||n<x)&&h)&&a++,(a===T||n<T&&a>T||(a>T||n<T)&&h)&&++a===x&&a++,a>C&&(a=a-C+M-1),r>b?(r=r-b+M-1,h=!0):h=!1,(r===x||o<x&&r>x||(r>x||o<x)&&h)&&r++,(r===T||o<T&&r>T||(r>T||o<T)&&h)&&++r===x&&r++,r>b&&(r=r-b+M-1),String.fromCharCode(a)+String.fromCharCode(r)}function u(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var i,e=t.length,s=null,n="",o=0;!/[A-Z]/.test(i=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;n+=i,o++}var a=parseInt(n,10);if(0===o||o+3>e)throw"MGRSPoint bad conversion from: "+t;var r=t.charAt(o++);if(r<="A"||"B"===r||"Y"===r||r>="Z"||"I"===r||"O"===r)throw"MGRSPoint zone letter "+r+" not handled: "+t;s=t.substring(o,o+=2);for(var h=c(a),l=p(s.charAt(0),h),m=f(s.charAt(1),h);m<d(r);)m+=2e6;var u=e-o;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var y,g,v,M,x,T=u/2,b=0,C=0;return T>0&&(y=1e5/Math.pow(10,T),g=t.substring(o,o+T),b=parseFloat(g)*y,v=t.substring(o+T),C=parseFloat(v)*y),M=b+l,x=C+m,{easting:M,northing:x,zoneLetter:r,zoneNumber:a,accuracy:y}}function p(t,i){for(var e=g.charCodeAt(i-1),s=1e5,n=!1;e!==t.charCodeAt(0);){if(e++,e===x&&e++,e===T&&e++,e>C){if(n)throw"Bad character: "+t;e=M,n=!0}s+=1e5}return s}function f(t,i){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var e=v.charCodeAt(i-1),s=0,n=!1;e!==t.charCodeAt(0);){if(e++,e===x&&e++,e===T&&e++,e>b){if(n)throw"Bad character: "+t;e=M,n=!0}s+=1e5}return s}function d(t){var i;switch(t){case"C":i=11e5;break;case"D":i=2e6;break;case"E":i=28e5;break;case"F":i=37e5;break;case"G":i=46e5;break;case"H":i=55e5;break;case"J":i=64e5;break;case"K":i=73e5;break;case"L":i=82e5;break;case"M":i=91e5;break;case"N":i=0;break;case"P":i=8e5;break;case"Q":i=17e5;break;case"R":i=26e5;break;case"S":i=35e5;break;case"T":i=44e5;break;case"U":i=53e5;break
;case"V":i=62e5;break;case"W":i=7e6;break;case"X":i=79e5;break;default:i=-1}if(i>=0)return i;throw"Invalid zone letter: "+t}var y=6,g="AJSAJS",v="AFAFAF",M=65,x=73,T=79,b=86,C=90;e.forward=function(t,i){return i=i||5,h(o({lat:t[1],lon:t[0]}),i)},e.inverse=function(t){var i=a(u(t.toUpperCase()));return[i.left,i.bottom,i.right,i.top]},e.toPoint=function(t){var i=e.inverse(t);return[(i[2]+i[0])/2,(i[3]+i[1])/2]}},{}],67:[function(t,i,e){i.exports={name:"proj4",version:"2.2.2-alpha",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~3.24.5","grunt-browserify":"~1.3.0","grunt-contrib-uglify":"~0.3.2",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"0.0.0"}}},{}],"./includedProjections":[function(t,i,e){i.exports=t("Jf/0WF")},{}],"Jf/0WF":[function(t,i,e){var s=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd")];i.exports=function(t){s.forEach(function(i){t.Proj.projections.add(i)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)}()}(),function(t){var i=function(t){this.proj=new proj4.Proj(t)};i.prototype={project:function(t){var i=proj4(this.proj).forward([t.lng,t.lat]);return new T.Point(i[0],i[1])},unproject:function(t){var i=proj4(this.proj).inverse([t.x,t.y]);return new T.LatLng(i[1],i[0])}},t.Projection=i}(T),function(t){var i=function(){this.MAX_LATITUDE=17010.22575596};i.prototype={project:function(t){var i=Math.PI/180,e=this.MAX_LATITUDE,s=Math.max(Math.min(e,t.lat),-e),n=t.lng*i,o=s*i;return o=Math.log(Math.tan(Math.PI/4+o/2)),new T.Point(n,o)},unproject:function(t){var i=180/Math.PI,e=t.x*i,s=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*i;return new T.LatLng(s,e)}},t.SphericalMercator=i}(T),function(t){var i=function(t){var i;if(this.code=t.code||"EPSG:3857",this.transformation=t.transform||new T.Transform(1,0,-1,0),this.resolutions=t.resolutions,this.maxResolution=t.maxResolution,this.projText=t.proj,this.projection=new T.Projection(t.proj||t.code),this.maxProjected=this.projection.project(new T.LatLng(0,179.9999)),!this.resolutions)for(this.resolutions=[],this.maxResolution||(this.maxResolution=2*Math.PI*this.projection.proj.a/256),i=0;i<19;i++)this.resolutions.push(this.maxResolution/(1<<i));for(this.scales=[],i=0;i<this.resolutions.length;i++)this.scales.push(1/this.resolutions[i])};i.prototype={project:function(t){var i,e,s,n;return"EPSG:3857"===this.code?(e=20037508.342789233,n=t.clone(),this.transformation=new T.Transform(1,e,-1,e),s=this.prepareLatLng(n),i=this.projection.project(n),i.x+=this.maxProjected.x*s):i=this.projection.project(t),i},unproject:function(t){var i,e,s,n;return"EPSG:3857"===this.code?(s=20037508.342789233,n=t.clone(),this.transformation=new T.Transform(1,s,-1,s),e=this.preparePoint(n),i=this.projection.unproject(n),i.lng+=180*e):i=this.projection.unproject(t),i},latLngToPoint:function(t,i){var e=this.project(t);return this.transform(e,i)},pointToLatLng:function(t,i){var e=this.untransform(t,i);return this.unproject(e)},transform:function(t,i){var e=this.scale(i);return this.transformation.transform(t,e)},untransform:function(t,i){var e=this.scale(i);return this.transformation.untransform(t,e)},scale:function(t){return this.scales[t]},resolution:function(t){return this.resolutions[t]},preparePoint:function(t){if(!t.x||0===t.x)return 0;var i=this.maxProjected,e=Math.abs(t.x)/t.x,s=Math.floor(Math.abs(t.x/i.x));return s>0&&(t.x=t.x%i.x),s*e},prepareLatLng:function(t){if(!t.lng||0===t.lng)return 0;var i=Math.abs(t.lng)/t.lng,e=Math.floor(Math.abs(t.lng/180));return e>0&&(t.lng=t.lng%180),e*i}},t.Crs=i}(T),function(t){var i=function(t){};i.prototype={init:function(t){this.map=t,this.drag=new T.DragUtil(t.$container.layers,t.$container.layers),this.drag.events.on("drag-start",this.onDragStart,this),this.drag.events.on("drag",this.onDrag,this),this.drag.events.on("drag-end",this.onDragEnd,this),this.drag.enable()},onDragStart:function(t){this.map.events.fire("move-start")},onDrag:function(t){this.map.events.fire("move",{offset:t.offset})},onDragEnd:function(t){this.drag.moved&&this.map.events.fire("move-end")},disable:function(){this.drag.disable()},enable:function(){this.drag.enable()},remove:function(){this.drag.disable(),this.drag.events.detach("drag-start",this.onDragStart),this.drag.events.detach("drag",this.onDrag),this.drag.events.detach("drag-end",this.onDragEnd),this.map=null,this.drag=null}},t.DragHandler=i}(T),function(t){var i=function(t){};i.prototype={init:function(t){this.marker=t,this.drag=new T.DragUtil(t.$container,t.$container),this.drag.events.on("before-drag",this.onBeforeStart,this),this.drag.events.on("drag-start",this.onDragStart,this),this.drag.events.on("drag",this.onDrag,this),this.drag.events.on("drag-end",this.onDragEnd,this),this.drag.enable()},onBeforeStart:function(t){if(this.marker.options.popOnClick){var i=T.DomUtil.position(this.marker.$container);i.y-=2,T.DomUtil.position(this.marker.$container,i)}},onDragStart:function(t){this.marker.layer&&this.marker.layer.events.fire("marker-drag-start",this.marker)},onDrag:function(t){this.marker.layer&&this.marker.layer.events.fire("marker-drag",this.marker)},onDragEnd:function(t){if(this.marker.options.popOnClick){var i=T.DomUtil.position(this.marker.$container);i.y+=2,T.DomUtil.position(this.marker.$container,i)}this.marker.options.draggableUsingOffset?this.marker.resetOffset():this.marker.resetFromPx(),this.marker.layer&&this.marker.layer.events.fire("marker-drag-end",this.marker)},remove:function(){this.drag.disable(),this.drag.events.detach("before-drag",this.onBeforeStart),this.drag.events.detach("drag-start",this.onDragStart),this.drag.events.detach("drag",this.onDrag),this.drag.events.detach("drag-end",this.onDragEnd),this.marker=null,this.drag=null}},t.MarkerDragHandler=i}(T),function(t){var i=function(t){};i.prototype={init:function(t){this.map=t,this.delta=0,T.DomEventUtil.on(this.map.$container,"mousewheel",this.onMouseWheel,this)},onMouseWheel:function(t){var i,e,s=T.DomEventUtil,n=s.getWheelDelta(t),o=this.map.computeMousePosition(t),a=this.calculateCenterInPixels(o),r=this.map.unproject(a);this.delta+=n,s.stop(t),clearTimeout(this.tm),e=this,this.tm=setTimeout(function(){i=e.map.getZoom()+Math.floor(e.delta),e.map.zoomAround(r,i,!0),e.delta=0},30)},zoom:function(t){},calculateCenterInPixels:function(t){return t.substract(this.map.getLayersPos()).add(this.map.getTopLeftInPixels())},remove:function(){T.DomEventUtil.off(this.map.$container,"mousewheel",this.onMouseWheel)}},t.MouseWheelHandler=i}(T),function(t){var i=function(t,i){if(!t)throw new Error("Map container not found.");this.$layersArray=[],this.options=T.Util.defaults(i,this.options),this.zoom=this.options.zoom,this.center=this.options.center,this.events=new T.EventDispatcher,this.lastTransform={matrix:new T.Matrix2D},this.initContainer(t),this.options.skipDefaultHandlers||this.initHandlers(),this.initControls(),this.initPosition(),this.resetView(this.center,this.zoom)};i.prototype={options:{zoom:5,minZoom:0,maxZoom:18,maxExtent:null,center:new T.LatLng(46,2),crs:new T.Crs({code:"EPSG:3857"}),repeatX:!0,repeatY:!1,urlLocation:!0,noHistory:!0,geolocate:!1,controls:{attribution:{prefix:"<a target='_blank' href='http://www.tibco.com/assets/blt59b361e6644c8d3a/tibco-end-user-license-agreement_tcm8-9378.pdf'>\xa9TIBCO GeoAnalytics</a>"}}},initContainer:function(t){this.$container=t,this.$container.map=this,this.$container.style.overflow="hidden",this.$container.style.position="relative",T.DomUtil.addClass(this.$container,"tibco-map");var i=this.$container.layers=T.DomUtil.create("div","layers-container",this.$container,"layers-container");this.$container.controls=T.DomUtil.create("div","controls-container",this.$container);i.style.position="absolute",T.DomUtil.position(i,new T.Point(0,0)),T.DomEventUtil.on(window,"resize",this.reset,this),this.$layers=i},initHandlers:function(){this.dragHandler=new T.DragHandler,this.mouseWheelHandler=new T.MouseWheelHandler,this.addHandler(this.dragHandler),this.addHandler(this.mouseWheelHandler)},initControls:function(){this.options.controls.attribution&&!1===this.options.controls.attribution.addToMap||this.addControl(new T.AttributionControl(this.options.controls.attribution)),this.options.controls.scale&&!1===this.options.controls.scale.addToMap||this.addControl(new T.ScaleControl(this.options.controls.scale))},initPosition:function(){this.options.geolocate&&T.Util.browserSupportsGeolocation()?this.setPositionFromGeolocation():this.setPositionFromUrl()},addHandler:function(t){t.init(this)},addControl:function(t){return t.onAdd(this),this},reset:function(){this.resetView(this.getCenter(),this.zoom)},resetView:function(t,i,e){if(this.sizeChanged=!0,this.lastTransform.matrix){var s=this.lastTransform.matrix;1===s.m11&&1===s.m22&&(s=this.computeTransformMatrix(this.calculateCenterInPixel(),i)),s.m13+=this.getLayersPos().x,s.m23+=this.getLayersPos().y}this.zoom=this.limitZoom(i),this.center=t,T.DomUtil.position(this.$container.layers,new T.Point(0,0)),T.AnimUtil.reset(this.$layers),e&&this.events.fire("hard-reset"),this.events.fire("view-reset")},addLayer:function(t){return this.$layersArray.push(t),t.onAdd(this),this.events.fire("layer-add",t),this},removeLayer:function(t){var i=this.getLayerIndex(t);if(-1!==i)return this.$layersArray.splice(i,1),t.onRemove(),this.events.fire("layer-remove",t),this},getSize:function(){return this.size&&!this.sizeChanged||(this.size=new T.Point(this.$container.clientWidth,this.$container.clientHeight),this.sizeChanged=!1),this.size.clone()},setDefaults:function(t){this.options=T.Util.defaults(t,this.options)},setCrs:function(t){this.options.crs=t,this.options.minZoom=0,this.options.maxZoom=t.resolutions.length-1,this.events.fire("zoom-interval-change")},setCenter:function(t){this.resetView(t,this.getZoom())},setZoom:function(t){this.zoomAround(this.calculateCenter(),t)},setUrlLocation:function(){var t=null;this.options.urlLocation&&(t="@"+this.getCenter().lat.toFixed(7)+","+this.getCenter().lng.toFixed(7)+","+this.getZoom()+"z",T.Util.browserSupportsHistoryApi()?(T.Util.setBrowserHistory("#"+t,this.options.noHistory),T.Util.handleBrowserNavigation(T.Util.bind(function(){},this))):T.Util.setBrowserUrlHash(t))},setPositionFromUrl:function(){var t=T.Util.getBrowserUrlHash(),i=null,e=[],s=null,n=null,o=null;this.options.urlLocation&&t&&t.length>1&&(i=t.substring(1,t.length),e=i.split(","),3===e.length?(s=parseFloat(e[0].substring(1,e[0].length)),n=parseFloat(e[1]),o=parseInt(e[2]),this.center=new T.LatLng(s,n),this.zoom=o,this.resetView(this.center,this.zoom)):(this.zoom=this.options.zoom,this.center=this.options.center,this.resetView(this.center,this.zoom)))},setPositionFromGeolocation:function(){T.Util.geolocate(T.Util.bind(function(t,i){t&&i?(this.center=new T.LatLng(t,i),this.zoom=14,this.resetView(this.center,this.zoom)):this.setPositionFromUrl()},this),T.Util.bind(function(t){this.setPositionFromUrl()},this))},getZoom:function(){return this.zoom},getCenter:function(){return this.calculateCenter()},getViewportCenter:function(){return this.center.clone()},getCenterInPixels:function(){return this.project(this.getViewportCenter(),this.getZoom())},getTopLeftInPixels:function(){return this.getCenterInPixels().substract(this.getSize().divideBy(2))},getResolution:function(){return this.options.crs.resolution(this.zoom)},latLngToPoint:function(t){return t=T.LatLng.from(t),this.project(t).round().substract(this.getTopLeftInPixels())},pointToLatLng:function(t){var i=t.add(this.getTopLeftInPixels());return this.unproject(i)},getLayersCenter:function(){return this.getSize().divideBy(2).substract(this.getLayersPos())},getPixelBounds:function(){var t=this.calculateTopLeft();return new T.Bounds(t,t.add(this.getSize()))},getLayersPos:function(){return T.DomUtil.position(this.$container.layers)},getLayers:function(){return this.$layersArray},calculateCenter:function(){return this.unproject(this.calculateCenterInPixel())},calculateCenterInPixel:function(){return this.getLayersCenter().add(this.getTopLeftInPixels())},calculateTopLeft:function(){var t=this.getSize().divideBy(2);return this.getCenterInPixels().substract(t).substract(this.getLayersPos())},latLngToContainerPoint:function(t){return t=T.LatLng.from(t),this.project(t).round().substract(this.calculateTopLeft())},containerPointToLatLng:function(t){return this.unproject(this.calculateTopLeft().add(t))},getMapResolution:function(){var t=this.getCenter(),i=this.getZoom();return 2*Math.cos(t.lat*Math.PI/180)*Math.PI*6378137/(256*Math.pow(2,i))},metersToArcAngle:function(t,i){return 360*t/40075016/Math.cos(i.lat*Math.PI/180)},panBy:function(t,i){if(!this.animatingZoom)return this.events.fire("move-start"),T.DomUtil.position(this.$container.layers,this.getLayersPos().add(t)),this.events.fire("move"),i||this.events.fire("move-end"),this},zoomAround:function(t,i,e){if(i=this.limitZoom(i),e=e||!1,i!==this.zoom){var s=this.project(t),n=this.project(t,i),o=n.substract(s),a=this.calculateCenterInPixel().add(o),r=this.unproject(a,i),h=this.computeTransformMatrix(s,i);if(T.AnimUtil.canAnim()&&e){if(this.animatingZoom)return;this.animatingZoom=!0,this.dragHandler&&this.dragHandler.disable();var l=this;T.AnimUtil.onTransitionEnd(this.$layers,function(){l.dragHandler&&l.dragHandler.enable(),l.animatingZoom=null,l.lastTransform.matrix=new T.Matrix2D(T.AnimUtil.getTransform(l.$layers)),l.resetView(r,i)}),T.AnimUtil.transition(this.$layers,.1),T.AnimUtil.setMatrix(this.$layers,h.toString())}else this.lastTransform.matrix=h,this.resetView(r,i)}},limitBounds:function(){if(this.options.maxExtent){var t=this.getBounds(),i=this.options.maxExtent,e=new T.LatLngBounds(t.getSouthWest(),t.getNorthEast()),s=!1;!T.Util.floatEqual(t.northEast.lat,i.northEast.lat)&&t.northEast.lat>i.northEast.lat?(s=!0,e.northEast.lat=i.northEast.lat,e.southWest.lat-=t.northEast.lat-i.northEast.lat):!T.Util.floatEqual(t.southWest.lat,i.southWest.lat)&&t.southWest.lat<i.southWest.lat&&(s=!0,e.southWest.lat=i.southWest.lat,e.northEast.lat-=t.southWest.lat-i.southWest.lat),!T.Util.floatEqual(t.northEast.lng,i.northEast.lng)&&t.northEast.lng>i.northEast.lng?(s=!0,e.northEast.lng=i.northEast.lng,e.southWest.lng-=t.northEast.lng-i.northEast.lng):!T.Util.floatEqual(t.southWest.lng,i.southWest.lng)&&t.southWest.lng<i.southWest.lng&&(s=!0,e.southWest.lng=i.southWest.lng,e.northEast.lng-=t.southWest.lng-i.southWest.lng),s&&this.fitToBounds(e,20)}},limitZoom:function(t){var i=this.options.maxExtent?this.getZoomForBounds(this.options.maxExtent)+1:t;return T.Util.maxMin(this.options.maxZoom,i,T.Util.minMax(this.options.minZoom,this.options.maxZoom,t))},project:function(t,i){return i=void 0===i?this.zoom:i,this.options.crs.latLngToPoint(t,i)},unproject:function(t,i){return i=void 0===i?this.zoom:i,this.options.crs.pointToLatLng(t,i)},transform:function(t,i){return i=void 0===i?this.zoom:i,this.options.crs.transform(t,i)},untransform:function(t,i){return i=void 0===i?this.zoom:i,this.options.crs.untransform(t,i)},fitToBounds:function(t,i){var e=this.getZoomForBounds(t,i),s=this.project(t.getNorthEast(),e),n=this.project(t.getSouthWest(),e),o=this.unproject(n.add(s).divideBy(2),e);this.resetView(o,e)},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.bottomLeft()),e=this.unproject(t.topRight());return new T.LatLngBounds(i,e)},getProjectedBounds:function(){var t=(this.options.queryParams,this.image,this.options.crs),i=this.getSize(),e=new T.Point(0,0),s=new T.Point(0,0),n=this.untransform(this.calculateCenterInPixel()),o=i.divideBy(2).multiplyBy(t.resolutions[this.getZoom()]);return e.x=n.x-o.x,e.y=n.y-o.y,s.x=n.x+o.x,s.y=n.y+o.y,new T.Bounds(e,s)},getZoomForBounds:function(t,i){var e=this.options.minZoom,s=this.getSize(),n=0;for(i=i||0,n=this.options.minZoom;n<=this.options.maxZoom;n++){var o=this.project(t.getNorthEast(),n),a=this.project(t.getSouthWest(),n),r=o.x-a.x,h=a.y-o.y;r-i<=s.x&&h-i<=s.y&&(e=n)}return e},getLayerIndex:function(t){return this.$layersArray.indexOf(t)},computeMousePosition:function(t){var i=T.DomUtil.calculateElementClientOffset(this.$container),e=new T.Point(i.left,i.top);return new T.Point(t.clientX,t.clientY).substract(e)},moveLayer:function(t,i){if(!(!t||t.getIndex()===i||i<0||i>=this.$layersArray.length)){var e=this.$layers.children.item(i);t.getContainer().parentNode.removeChild(t.getContainer()),t.getIndex()>i?this.$layers.insertBefore(t.getContainer(),e):e.parentNode.insertBefore(t.getContainer(),e.nextSibling),this.$layersArray.splice(t.getIndex(),1),this.$layersArray.splice(i,0,t),this.events.fire("layer-moved",t)}},moveLayerUp:function(t){-1!==t.getIndex()&&t.getIndex()!==this.$layersArray.length-1&&this.moveLayer(t,t.getIndex()+1)},moveLayerDown:function(t){-1!==t.getIndex()&&0!==t.getIndex()&&this.moveLayer(t,t.getIndex()-1)},computeTransformMatrix:function(t,i){var e=i-this.getZoom(),s=Math.pow(2,e),n=this.getLayersPos().substract(t.substract(this.calculateTopLeft())),o=n.multiplyBy(s).substract(n);return new T.Matrix2D(s,0,0,s,o.x,o.y)}},t.Map=i}(T),function(t){var i={STANDARD:"Standard map",STANDARD_LIGHT:"Standard map - light",BASIC:"Basic map",BASIC_LIGHT:"Basic map - light",BORDERS:"Borders",LABELS:"Labels",ROADS:"Roads"};t.MapTypes=i}(T),function(t){var i={LIGHT:"Light",DARK:"Dark"};t.MapStyles=i}(T),function(t){var i=function(t){this.type="path",this.options=T.Util.defaults(t,this.options),this.style=T.Util.defaults({},this.options.style)};i.prototype={options:{path:"",clickable:!0,reverseCoordinates:!1},style:null,initContainer:function(){this.context&&this.context.initContainer(this)},setStyle:function(t){T.Util.extend(this.style,t),this.draw()},getStyle:function(){return this.context.options.style},projectCoords:function(){},reset:function(){this.context&&(this.projectCoords(),this.draw())},draw:function(){this.context&&(this.context.applyStyle(this),this.context.draw(this))},onAdd:function(t){var i=T.Util.clone(t.options.defaultStyle);this.layer=t,this.context=t.context,this.initContainer(),this.setStyle(T.Util.extend(i,this.style)),this.reset()},onRemove:function(t){this.context.dispose(this),this.context=null,this.layer=null}},t.Path=i}(T),function(t){var i=function(t,i){T.Path.call(this,i),this.type="polyline",this.coords=t,this.projectedCoords=[],this.noneFillGeometry=!0};i.prototype={projectCoords:function(){var t;for(this.projectedCoords=[],t=0;t<this.coords.length;t++)this.projectedCoords.push(this.layer.map.latLngToContainerPoint(this.options.reverseCoordinates?this.coords[t].concat().reverse():this.coords[t]).floor())}},T.Util.inherit(i,T.Path),t.Polyline=i}(T),function(t){var i=function(t,i){T.Path.call(this,i),this.type="polygon",this.coords=t,this.projectedCoords=[]};i.prototype={projectCoords:function(){var t,i,e;for(this.projectedCoords=[],t=0;t<this.coords.length;t++){for(e=[],i=0;i<this.coords[t].length;i++)e.push(this.layer.map.latLngToContainerPoint(this.options.reverseCoordinates?this.coords[t][i].concat().reverse():this.coords[t][i]).floor());this.projectedCoords.push(e)}}},T.Util.inherit(i,T.Path),t.Polygon=i}(T),function(t){var i=function(t,i){T.Path.call(this,i),this.type="multipolyline",this.coords=t,this.projectedCoords=[],this.noneFillGeometry=!0};i.prototype={projectCoords:function(){var t,i,e=[];for(this.projectedCoords=[],t=0;t<this.coords.length;t++){for(e=[],i=0;i<this.coords[t].length;i++)e.push(this.layer.map.latLngToContainerPoint(this.options.reverseCoordinates?this.coords[t][i].concat().reverse():this.coords[t][i]).floor());this.projectedCoords.push(e)}}},T.Util.inherit(i,T.Path),t.MultiPolyline=i}(T),function(t){var i=function(t,i){T.Path.call(this,i),this.type="multipolygon",this.coords=t,this.projectedCoords=[]};i.prototype={projectCoords:function(){var t,i,e,s=[],n=[];for(this.projectedCoords=[],e=0;e<this.coords.length;e++){for(n=[],t=0;t<this.coords[e].length;t++){for(s=[],i=0;i<this.coords[e][t].length;i++)s.push(this.layer.map.latLngToContainerPoint(this.options.reverseCoordinates?this.coords[e][t][i].concat().reverse():this.coords[e][t][i]).floor());n.push(s)}this.projectedCoords.push(n)}}},T.Util.inherit(i,T.Path),t.MultiPolygon=i}(T),function(t){var i=function(t,i){T.Polygon.call(this,this.boundsToCoordinates(t),i),this.type="rectangle",this.projectedCoords=[]};i.prototype={setBounds:function(t){this.coords=this.boundsToCoordinates(t),this.reset()},boundsToCoordinates:function(t){return t=T.LatLngBounds.from(t),[[t.getSouthWest(),t.getSouthEast(),t.getNorthEast(),t.getNorthWest()]]}},T.Util.inherit(i,T.Polygon),t.Rectangle=i}(T),function(t){var i=function(t,i,e){T.Path.call(this,e),this.type="circle",this.radius=i||100,this.center=T.LatLng.from(t),this.radiusMeasure="meter"===e.radiusMeasure?e.radiusMeasure:"pixel"};i.prototype={setRadius:function(t){this.radius=t,this.reset()},setCenter:function(t){this.center=T.LatLng.from(t),this.reset()},projectCoords:function(){if(this.projectedCenter=this.layer.map.latLngToContainerPoint(this.options.reverseCoordinates?this.center.concat().reverse():this.center).floor(),"meter"===this.radiusMeasure){var t=this.layer.map.metersToArcAngle(this.radius,this.center);this.porjectedStartPoint=this.layer.map.latLngToContainerPoint(this.options.reverseCoordinates?[this.center.lng,this.center.lat-t]:[this.center.lat,this.center.lng-t]).floor()}else this.porjectedStartPoint=this.projectedCenter.clone().substract(new T.Point(this.radius,0))}},T.Util.inherit(i,T.Path),t.Circle=i}(T),function(t){var i=function(t,i){this.options=T.Util.defaults(i,this.options),this.$svg=t};i.prototype={initContainer:function(t){t.$container||(t.$container=T.DomUtil.createSvgElement("g"),t.$path=T.DomUtil.createSvgElement("path"),t.$path.setAttributeNS(null,"fill-rule","evenodd"),t.$container.appendChild(t.$path),T.DomEventUtil.on(t.$container,"click",function(i){null!==t.layer&&t.layer.onGeometryClick(i,t)},this)),this.$svg.$g.appendChild(t.$container)},applyStyle:function(t){var i=t.style;i.stroke?(t.$path.setAttributeNS(null,"stroke",i.color),t.$path.setAttributeNS(null,"stroke-opacity",i.opacity),t.$path.setAttributeNS(null,"stroke-width",i.weight),t.$path.setAttributeNS(null,"stroke-linecap",i.lineCap),t.$path.setAttributeNS(null,"stroke-linejoin",i.lineJoin),t.$path.setAttributeNS(null,"stroke-miterlimit",i.miterLimit)):t.$path.setAttribute("stroke","none"),i.fill&&!t.noneFillGeometry?(t.$path.setAttributeNS(null,"fill",i.fillColor||i.color),t.$path.setAttributeNS(null,"fill-opacity",i.fillOpacity)):t.$path.setAttributeNS(null,"fill","none")},getPathString:function(t){var i,e,s,n=t.projectedCoords,o="";if("circle"===t.type||0!==n.length)switch(t.type){case"polyline":for(o="M "+n[0].x+" "+n[0].y,i=1;i<n.length;i++)o+="L "+n[i].x+" "+n[i].y;return o;case"polygon":case"rectangle":for(i=0;i<n.length;i++){for(e=0;e<n[i].length;e++)o+=0!==e?"L "+n[i][e].x+" "+n[i][e].y:"M "+n[i][0].x+" "+n[i][0].y;o+=" Z "}return o;case"multipolyline":for(i=0;i<n.length;i++)for(e=0;e<n[i].length;e++)o+=0!==e?"L "+n[i][e].x+" "+n[i][e].y:"M "+n[i][0].x+" "+n[i][0].y;return o;case"multipolygon":for(s=0;s<n.length;s++)for(i=0;i<n[s].length;i++){for(e=0;e<n[s][i].length;e++)o+=0!==e?"L "+n[s][i][e].x+" "+n[s][i][e].y:"M "+n[s][i][0].x+" "+n[s][i][0].y;o+=" Z "}return o;case"circle":if(!t.projectedCenter)return;var a=t.projectedCenter.x-t.porjectedStartPoint.x;return o="M "+t.porjectedStartPoint.x+" "+t.porjectedStartPoint.y,o+=" A "+a+" "+a,o+=",0,1,1, "+t.porjectedStartPoint.x+" "+(t.porjectedStartPoint.y+.01)+" Z"}},draw:function(t){var i=this.getPathString(t);i?t.$path.setAttributeNS(null,"d",i):t.$path.setAttributeNS(null,"d","M 0 0")},dispose:function(t){this.$svg.$g.removeChild(t.$container)}},t.SvgContext=i}(T),function(t){var i=function(t,i){this.options=T.Util.defaults(i,this.options),this.$canvas=t,this.ctx=this.$canvas.getContext("2d")};i.prototype={initContainer:function(t){},applyStyle:function(t){var i=t.style;i.stroke&&(this.ctx.strokeStyle=T.Util.hexToRgba(i.color,i.opacity),this.ctx.lineWidth=i.weight,this.ctx.lineCap=i.lineCap,this.ctx.lineJoin=i.lineJoin,this.ctx.miterLimit=i.miterLimit),i.fill&&(this.ctx.fillStyle=T.Util.hexToRgba(i.fillColor||i.color,i.fillOpacity))},draw:function(t){var i,e,s,n,o=t.projectedCoords,a=t.style;switch(this.ctx.beginPath(),t.type){case"polyline":if(o.length>0)for(this.ctx.moveTo(o[0].x,o[0].y),i=1;i<o.length;i++)this.ctx.lineTo(o[i].x,o[i].y);break;case"polygon":case"rectangle":if(o.length>0)for(i=0;i<o.length;i++){for(n=o[i].concat(),i>0&&n.reverse(),this.ctx.moveTo(n[0].x,n[0].y),e=1;e<n.length;e++)this.ctx.lineTo(n[e].x,n[e].y);this.ctx.closePath()}break;case"multipolyline":if(o.length>0)for(i=0;i<o.length;i++)for(n=o[i].concat(),this.ctx.moveTo(n[0].x,n[0].y),e=1;e<n.length;e++)this.ctx.lineTo(n[e].x,n[e].y);break;case"multipolygon":if(o.length>0)for(s=0;s<o.length;s++)for(i=0;i<o[s].length;i++){for(n=o[s][i].concat(),i>0&&n.reverse(),this.ctx.moveTo(n[0].x,n[0].y),e=1;e<n.length;e++)this.ctx.lineTo(n[e].x,n[e].y);this.ctx.closePath()}break;case"circle":if(!t.projectedCenter)return;var r=t.projectedCenter.x-t.porjectedStartPoint.x;this.ctx.arc(t.projectedCenter.x,t.projectedCenter.y,r,0,2*Math.PI),this.ctx.stroke()}a.fill&&!t.noneFillGeometry&&this.ctx.fill(),a.stroke&&this.ctx.stroke()},dispose:function(t){this.draw(t)}},t.CanvasContext=i}(T),function(t){var i=function(t,i){this.options=T.Util.defaults(i,this.options),this.$vml=t};i.prototype={initContainer:function(t){if(!t.$container){t.$container=T.DomUtil.createVmlElement("shape");var i=T.DomUtil.createVmlElement("path");t.$container.appendChild(i),t.$container.$path=i,t.$container.style.width="1px",t.$container.style.height="1px",t.$container.className="tibco-vml",t.$container.$path.className="tibco-vml"}t.$container.coordsize="1 1",T.DomEventUtil.on(t.$container,"click",function(i){null!==t.layer&&t.layer.onGeometryClick(i,t)},this),this.$vml.appendChild(t.$container)},applyStyle:function(t){var i=t.style;i.stroke?(t.$stroke||(t.$stroke=T.DomUtil.createVmlElement("stroke"),t.$stroke.className="tibco-vml",t.$container.appendChild(t.$stroke)),t.$stroke.color=i.color,t.$stroke.weight=i.weight,t.$stroke.opacity=i.opacity,t.$container.stroked="t"):(t.$stroke&&t.$container.removeChild(t.$stroke),t.$container.stroked="f"),i.fill&&!t.noneFillGeometry?(t.$fill||(t.$fill=T.DomUtil.createVmlElement("fill"),t.$fill.className="tibco-vml",t.$container.appendChild(t.$fill)),t.$fill.color=i.fillColor||i.color,t.$fill.opacity=i.fillOpacity,t.$container.filled="t"):(t.$fill&&t.$container.removeChild(t.$fill),t.$container.filled="f")},getPathString:function(t){var i,e,s,n,o=t.projectedCoords;if("circle"===t.type||0!==o.length)switch(t.type){case"polyline":for(n="M "+Math.round(o[0].x)+" "+Math.round(o[0].y),i=1;i<o.length;i++)n+="L "+Math.round(o[i].x)+" "+Math.round(o[i].y);return n;case"polygon":case"rectangle":for(i=0;i<o.length;i++){for(e=0;e<o[i].length;e++)n+=0!==e?"L "+o[i][e].x+" "+o[i][e].y:"M "+o[i][0].x+" "+o[i][0].y;n+=" X "}return n;case"multipolyline":for(i=0;i<o.length;i++)for(e=0;e<o[i].length;e++)n+=0!==e?"L "+o[i][e].x+" "+o[i][e].y:"M "+o[i][0].x+" "+o[i][0].y;return n;case"multipolygon":for(s=0;s<o.length;s++)for(i=0;i<o[s].length;i++){for(e=0;e<o[s][i].length;e++)n+=0!==e?"L "+o[s][i][e].x+" "+o[s][i][e].y:"M "+o[s][i][0].x+" "+o[s][i][0].y;n+=" X "}return n;case"circle":if(!t.projectedCenter)return;var a=t.projectedCenter.x-t.porjectedStartPoint.x;return n="AL "+Math.round(t.projectedCenter.x)+","+Math.round(t.projectedCenter.y)+" "+Math.round(a)+","+Math.round(a)+" 0,23592600"}},draw:function(t){t.$container.style.display="none",t.$container.$path.v=this.getPathString(t)+" ",t.$container.style.display=""},dispose:function(t){this.$vml.removeChild(t.$container)}},t.VmlContext=i}(T),function(t){var i=function(t){this.options=T.Util.defaults(t,this.options),this.name=this.options.name||"",this.events=new T.EventDispatcher};i.prototype={onAdd:function(){},onRemove:function(){T.DomUtil.remove(this.getContainer()),this.events.detachAll(),this.$container=null},reset:function(){},getIndex:function(){return this.map?this.map.getLayerIndex(this):-1},getContainer:function(){return this.$container},setVisible:function(t){!0===t?(this.getContainer().style.display="block",this.map.events.fire("layer-show")):!1===t&&(this.getContainer().style.display="none",this.map.events.fire("layer-hide"))},isVisible:function(){return"none"!==window.getComputedStyle(this.getContainer()).display}},t.BaseLayer=i}(T),function(t){var i=T.BaseLayer,e=function(t,i){t||console.log("TileLayer must have an URL"),T.BaseLayer.call(this,i),this.url=t,this.tilesToLoad=0,this.delayedUpdate=T.Util.limitExecByInterval(this.move,200,this)};e.prototype={options:{tileSize:256,errorTileAttemptsThreshold:1,reuseTiles:!0,opacity:1,autoLoadTiles:!0,tile404:"https://geoanalytics.tibco.com/404.png",attribution:null},initContainer:function(){this.$container||(this.$layerContainer=T.DomUtil.create("div","tibco-layer tile-layer",this.map.$container.layers),this.$container=T.DomUtil.create("div","tibco-layer tile-layer-1",this.$layerContainer),this.$bufferContainer=T.DomUtil.create("div","tibco-layer tile-layer-2",this.$layerContainer),this.$layerContainer.style.position="relative",this.$container.style.position="absolute",this.$bufferContainer.style.position="absolute",this.$container.style.visibility="visible",this.$bufferContainer.style.visibility="visible",this.$container.layer=this,this.$bufferContainer.layer=this)},reset:function(){this.tiles={},this.tilesToLoad=0,this.unusedTiles=[],this.handleBackBuffer(),this.update(),this.map.setUrlLocation()},move:function(){"hidden"===this.$container.style.visibility&&(this.$container.style.visibility="visible",this.$container.style.zIndex=0,this.$bufferContainer.style.zIndex=-1),this.update()},moveEnd:function(){this.move(),this.map.setUrlLocation()},addTile:function(t,i){var e=this.getTilePosition(t),s=this.getTile();T.DomUtil.position(s,e),this.storeTile(s,t),this.loadTile(s,t),i.appendChild(s)},update:function(){this.map&&!0===this.options.autoLoadTiles&&this.reloadTiles()},reloadTiles:function(){var t=(this.map.getZoom(),this.map.getPixelBounds()),i=this.options.tileSize,e=new T.Bounds(t.min.divideBy(i).floor(),t.max.divideBy(i).floor());this.tilesLoaded=0,
this.addTileFromBounds(e),this.removeInvisibleTiles(e)},handleBackBuffer:function(){if(!this.IsBackbufferEnabled())return void T.DomUtil.html(this.$container,"");var t=this.getLoadedTilesPercent(this.$container),i=this.getLoadedTilesPercent(this.$bufferContainer);if(t>.5&&i<.5){var e=this.$bufferContainer;this.$bufferContainer=this.$container,this.$container=e,this.$container.style.visibility="hidden"}this.stopLoadingTiles(this.$container),T.DomUtil.html(this.$container,""),this.$bufferContainer.style.visibility="visible";var s=this.map.lastTransform.matrix;this.$bufferContainer.matrix||(this.$bufferContainer.matrix=new T.Matrix2D),this.$bufferContainer.matrix=s.multiplyBy(this.$bufferContainer.matrix),T.DomUtil.position(this.$bufferContainer,new T.Point(0,0)),T.AnimUtil.setMatrix(this.$bufferContainer,this.$bufferContainer.matrix.toString()),T.AnimUtil.setMatrix(this.$container,new T.Matrix2D)},setOpacity:function(t){this.options.opacity=t;var i,e=this.tiles;for(i in e)e.hasOwnProperty(i)&&T.DomUtil.setOpacity(e[i],this.options.opacity)},addTileFromBounds:function(t){var i,e,s,n=[],o=t.center();for(i=t.min.y;i<=t.max.y;i++)for(e=t.min.x;e<=t.max.x;e++)s=new T.Point(e,i),this.shouldTileBeLoaded(s)&&n.push(s);if(0!==n.length){n.sort(function(t,i){return t.distanceTo(o)-i.distanceTo(o)}),this.tilesToLoad=n.length;var a=document.createDocumentFragment();for(e=0;e<n.length;e++)this.addTile(n[e],a);this.$container.appendChild(a)}},removeInvisibleTiles:function(t){var i,e,s;for(s in this.tiles)if(this.tiles.hasOwnProperty(s)){var n=s.split(":");i=parseInt(n[0],10),e=parseInt(n[1],10),(i<t.min.x||i>t.max.x||e<t.min.y||e>t.max.y)&&this.removeTile(s)}},removeTile:function(t){var i=this.tiles[t];this.options.reuseTiles&&(T.DomUtil.removeClass(i,"tibco-tile-loaded"),this.unusedTiles.push(i)),this.options.reuseTiles?T.Util.browserVersion.ielt9||(i.onerror=null,i.onload=null,i.removeAttribute("src")):i.parentNode.removeChild(i),delete this.tiles[t]},getTile:function(){if(this.options.reuseTiles&&this.unusedTiles.length>0){return this.unusedTiles.pop()}return this.createTile()},getTileUrl:function(t){var i=Math.pow(2,this.map.getZoom()),e=t.x,s=t.y;return this.map.options.repeatX&&(e=e>=0?e%i:(i+e%i)%i),e>=0&&e<i&&s>=0&&s<i?T.Util.template(this.url,{x:e,y:s,z:t.z}):""},getTilePosition:function(t){var i=this.options.tileSize,e=this.map.getCenterInPixels().substract(this.map.getSize().divideBy(2)).floor();return t.multiplyBy(i).substract(e)},createTile:function(){var t=T.DomUtil.create("img","tibco-tile");return t.style.width=t.style.height=this.options.tileSize+"px",t.style.position="absolute",t.errorAttempts=0,T.DomUtil.setOpacity(t,this.options.opacity),T.DomUtil.disableSelection(t),T.DomUtil.show(t),t},storeTile:function(t,i){this.tiles[i.x+":"+i.y+":"+i.z]=t},loadTile:function(t,i){i.z=this.map.getZoom(),t.layer=this,t.point=i;var e=this.getTileUrl(i);e&&""!==e?(t.onload||(t.onload=this.onTileLoad),t.onerror||(t.onerror=this.onTileError),t.src=e,T.Util.browserVersion.ielt9&&T.DomUtil.show(t)):(T.Util.browserVersion.ielt9&&T.DomUtil.hide(t),this.tilesToLoad--),T.Util.browserVersion.ielt9||T.DomUtil.hide(t)},shouldTileBeLoaded:function(t){var i=t.x+":"+t.y+":"+t.z;return void 0===this.tiles[i]},getIndex:function(){return this.map.getLayerIndex(this)},getContainer:function(){return this.$layerContainer},onAdd:function(t){this.map=t,this.map.events.on("hard-reset",function(){this.hardReset=!0},this),this.map.events.on("move-end",this.moveEnd,this),this.map.events.on("move",this.delayedUpdate,this),this.map.events.on("view-reset",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){i.prototype.onRemove.call(this),this.map.events.detach("move-end",this.moveEnd),this.map.events.detach("view-reset",this.reset),this.map.events.detach("move",this.delayedUpdate)},onTileLoad:function(){var t=this.layer;t.events.fire("tile-load",{tile:this}),T.DomUtil.addClass(this,"tibco-tile-loaded"),t.tilesLoaded++,this.src&&""!==this.src&&T.DomUtil.show(this),t.tilesToLoad===t.tilesLoaded&&(t.onAllTilesLoaded(),t.events.fire("tiles-loaded",{nrTiles:t.tilesLoaded}))},onTileError:function(t){var i=this.layer;this.errorAttempts<this.layer.options.errorTileAttemptsThreshold?(this.errorAttempts++,this.layer.loadTile(this,this.point)):(this.layer.tilesLoaded++,this.layer.events.fire("tile-error",{tile:this}),this.onerror=null,this.src=this.layer.options.tile404),i.tilesToLoad===i.tilesLoaded&&(i.onAllTilesLoaded(),i.events.fire("tiles-loaded",{nrTiles:i.tilesLoaded}))},IsBackbufferEnabled:function(){return!T.AnimUtil.canAnim()||!this.hardReset||(this.hardReset=!1,!1)},onAllTilesLoaded:function(){if(this.IsBackbufferEnabled()){var t=this;t.$container.style.zIndex=0,t.$bufferContainer.style.zIndex=-1,t.$container.style.visibility="visible",t.$bufferContainer.style.visibility="hidden",T.DomUtil.html(t.$bufferContainer,""),t.$bufferContainer.matrix=new T.Matrix2D}},stopLoadingTiles:function(t){var i,e,s,n=T.DomUtil.nodeCollectionToArray(t.getElementsByTagName("img"));for(i=0,e=n.length;i<e;i++)s=n[i],s.complete||(s.onload=null,s.onerror=null,s.removeAttribute("src"),s.parentNode.removeChild(s))},getLoadedTilesPercent:function(t){var i,e=t.getElementsByTagName("img"),s=0,n=e.length;if(0===n)return 0;for(i=0;i<n;i++)e[i].complete&&s++;return s/n}},T.Util.inherit(e,i),t.TileLayer=e}(T),function(t){var i=function(t,i,e){this.options=T.Util.defaults(e,this.options),this.url=t,this.bounds=i,T.BaseLayer.call(this,e)};i.prototype={options:{opacity:1},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-layer",this.map.$container.layers),this.$container.layer=this)},initImage:function(){var t=this.image=T.DomUtil.create("img","tibco-image-1"),i=this.backImage=T.DomUtil.create("img","tibco-image-2");t.onload=this.onImageLoad,t.onerror=this.onImageError,this.url&&(t.src=this.url),t.layer=this,t.style.position="absolute",t.style.opacity=this.options.opacity,t.matrix=new T.Matrix2D,i.layer=this,i.style.position="absolute",i.style.opacity=this.options.opacity,i.matrix=new T.Matrix2D,i.style.visibility="hidden",T.DomUtil.disableSelection(t),T.DomUtil.disableSelection(i)},reset:function(){var t,i,e=this.image;this.bounds instanceof T.LatLngBounds?(t=this.map.latLngToPoint(this.bounds.getNorthWest()).floor(),i=this.map.latLngToPoint(this.bounds.getSouthEast()).substract(t).floor()):(t=this.map.transform(this.bounds.topLeft()).substract(this.map.getTopLeftInPixels()).round(),i=this.map.transform(this.bounds.bottomRight()).substract(this.map.getTopLeftInPixels()).substract(t).round()),T.DomUtil.position(e,t),e.style.width=i.x+"px",e.style.height=i.y+"px"},reload:function(t,i){this.url=t,this.bounds=i,this.image||this.initImage(),this.events.fire("image-loading",{tile:this.image}),this.image.src=this.url,this.reset()},setOpacity:function(t){this.image||this.initImage(),this.options.opacity=t,this.image.style.opacity=this.options.opacity},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.reset,this),this.initContainer(),this.image||this.initImage(),this.$container.appendChild(this.image),this.$container.appendChild(this.backImage),this.reset()},onRemove:function(t){T.ImageLayer.base.onRemove.call(this),this.map.events.detach("view-reset",this.reset)},onImageLoad:function(){this.layer.events.fire("image-load",{tile:this})},onImageError:function(t){this.layer.events.fire("image-error",{tile:this})}},T.Util.inherit(i,T.BaseLayer),t.ImageLayer=i}(T),function(t){var i=T.BaseLayer,e=function(t){i.call(this,t),this.markers=[]};e.prototype={options:{opacity:1},initContainer:function(){var t;if(!this.$container)for(this.$container=T.DomUtil.create("div","tibco-layer markers-layer",this.map.$container.layers),this.$container.layer=this,t=0;t<this.markers.length;t++)this.$container.appendChild(this.markers[t].$container)},reset:function(){var t=0;for(t=0;t<this.markers.length;t++)this.markers[t].reset()},addMarker:function(t){t.layer=this,t.onAdd(this),t.reset(),this.$container&&this.$container.appendChild(t.$container),this.markers.push(t),T.DomEventUtil.on(t.$container,"mousedown",this.onMarkerClick,this)},removeMarker:function(t){var i=this.markers.indexOf(t);i>-1&&(this.markers.splice(i,1),t.layer=null,t.onRemove(this),this.$container&&(this.$container.removeChild(t.$container),T.DomEventUtil.off(t.$container,"mousedown",this.onMarkerClick,this)))},removeAllMarkers:function(){var t=0;for(t=0;t<this.markers.length;t++)this.markers[t].layer=null,this.markers[t].onRemove(this);this.markers=[],T.DomUtil.html(this.$container,"")},setOpacity:function(t){this.options.opacity=t,this.$container.style.opacity=this.options.opacity},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){i.prototype.onRemove.call(this),this.map.events.detach("view-reset",this.reset)},onMarkerClick:function(t){var i=t.target||t.srcElement;this.events.fire("marker-click",i.marker)}},T.Util.inherit(e,i),t.MarkersLayer=e}(T),function(t){var i=function(t){T.BaseLayer.call(this,t),this.geometries=[],this.type="svg"};i.prototype={initContainer:function(){var t;if(!this.$container)for(this.$container=T.DomUtil.create("div","tibco-layer svg-layer",this.map.$container.layers),this.$svg=T.DomUtil.createSvgElement("svg"),this.$svg.$g=T.DomUtil.createSvgElement("g"),this.$svg.style.position="absolute",this.$container.appendChild(this.$svg),this.$svg.appendChild(this.$svg.$g),this.context=new T.SvgContext(this.$svg),t=0;t<this.geometries.length;t++)this.geometries[t].context=this.context,this.geometries[t].initContainer()},reset:function(){var t;for(t=0;t<this.geometries.length;t++)this.geometries[t].reset()},addGeometry:function(t){if(!(this.geometries.indexOf(t)>-1))return t.onAdd(this),this.geometries.push(t),this},removeGeometry:function(t){var i=this.geometries.indexOf(t);i>-1&&(this.geometries.splice(i,1),t.onRemove(this))},updateViewPort:function(){var t=new T.Point(this.options.clipOffset,this.options.clipOffset),i=this.map.getLayersPos(),e=i.add(t),s=this.map.getSize().add(t.multiplyBy(2));T.DomUtil.position(this.$svg,e.multiplyBy(-1)),this.$svg.setAttributeNS(null,"width",s.x),this.$svg.setAttributeNS(null,"height",s.y),this.$svg.setAttributeNS(null,"viewBox",[-t.x,-t.y,s.x,s.y].join(" ")),this.$svg.$g.setAttributeNS(null,"transform","matrix("+[1,0,0,1,0,0].join(" ")+")"),this.reset()},bringForward:function(t){var i=T.DomUtil.getNodeIndex(t.$container,this.$svg.$g);if(!(i<0)){var e=this.$svg.$g.childNodes[i+2];e?this.$svg.$g.insertBefore(t.$container,e):this.$svg.$g.appendChild(t.$container)}},sendBackward:function(t){var i=T.DomUtil.getNodeIndex(t.$container,this.$svg.$g);if(!(i<0)){var e=this.$svg.$g.childNodes[i-1];e&&this.$svg.$g.insertBefore(t.$container,e)}},bringToFront:function(t){T.DomUtil.getNodeIndex(t.$container,this.$svg.$g)<0||this.$svg.$g.appendChild(t.$container)},sendToBack:function(t){T.DomUtil.getNodeIndex(t.$container,this.$svg.$g)<0||this.$svg.$g.firstChild===t.$container||this.$svg.$g.insertBefore(t.$container,this.$svg.$g.firstChild)},getContainer:function(){return this.$container},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.updateViewPort,this),this.map.events.on("move-end",this.updateViewPort,this),this.initContainer(),this.reset(),this.updateViewPort()},onRemove:function(){this.map.events.detach("view-reset",this.reset),this.map.events.detach("move-end",this.updateViewPort),this.map=null},onGeometryClick:function(t,i){this.events.fire("geometry-click",i)}},T.Util.inherit(i,T.BaseLayer),t.SvgLayer=i}(T),function(t){var i=function(t){T.BaseLayer.call(this,t),this.type="canvas",this.geometries=[]};i.prototype={initContainer:function(){var t;if(!this.$container)for(this.$container=T.DomUtil.create("div","tibco-layer canvas-layer",this.map.$container.layers),this.$canvas=T.DomUtil.create("canvas","canvas"),this.$canvas.style.position="absolute",this.$container.appendChild(this.$canvas),this.canvasContext=this.$canvas.getContext("2d"),this.context=new T.CanvasContext(this.$canvas),T.DomEventUtil.on(this.$canvas,"click",function(t){this.onGeometryClick(t)},this),t=0;t<this.geometries.length;t++)this.geometries[t].context=this.context,this.geometries[t].initContainer()},reset:function(){var t;for(t=0;t<this.geometries.length;t++)this.geometries[t].reset()},addGeometry:function(t){if(!(this.geometries.indexOf(t)>-1))return t.onAdd(this),this.geometries.push(t),this},removeGeometry:function(t){var i=this.geometries.indexOf(t),e=0;if(i>-1)for(this.geometries.splice(i,1),this.clear(),e=0;e<this.geometries.length;e++)this.geometries[e].draw(this.geometries[e])},clear:function(){this.canvasContext.clearRect(0,0,this.$canvas.width,this.$canvas.height)},bringForward:function(t){var i=this.geometries.indexOf(t);if(!(this.geometries.length<2||i===this.geometries.length-1)){var e=this.geometries[i+1];this.geometries[i+1]=t,this.geometries[i]=e,this.updateViewPort()}},sendBackward:function(t){var i=this.geometries.indexOf(t);if(!(this.geometries.length<2||0===i)){var e=this.geometries[i-1];this.geometries[i-1]=t,this.geometries[i]=e,this.updateViewPort()}},bringToFront:function(t){var i=this.geometries.indexOf(t);this.geometries.length<2||i===this.geometries.length-1||(this.geometries.splice(i,1),this.geometries.push(t),this.updateViewPort())},sendToBack:function(t){var i=this.geometries.indexOf(t);this.geometries.length<2||0===i||(this.geometries.splice(i,1),this.geometries.splice(0,0,t),this.updateViewPort())},updateViewPort:function(){var t=new T.Point(this.options.clipOffset,this.options.clipOffset),i=this.map.getLayersPos().add(t),e=this.map.getSize().add(t.multiplyBy(2));T.DomUtil.position(this.$canvas,i.multiplyBy(-1)),this.$canvas.width=e.x,this.$canvas.height=e.y,this.canvasContext.setTransform(1,0,0,1,t.x,t.y),this.reset()},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.updateViewPort,this),this.map.events.on("move-end",this.updateViewPort,this),this.initContainer(),this.updateViewPort()},onRemove:function(){this.map.events.detach("view-reset",this.updateViewPort),this.map.events.detach("move-end",this.updateViewPort),this.map=null},onGeometryClick:function(t){var i,e,s=this.map.computeMousePosition(t),n=this.geometries.concat().reverse(),o=new T.Point(this.options.clipOffset,this.options.clipOffset);for(s=s.add(o),i=0;i<n.length;i++){this.clear(),n[i].reset();var a=this.canvasContext.getImageData(s.x,s.y,1,1).data;if(0!==a[0]||0!==a[1]||0!==a[2]){e=n[i];break}}this.updateViewPort(),e&&this.events.fire("geometry-click",e)}},T.Util.inherit(i,T.BaseLayer),t.CanvasLayer=i}(T),function(t){var i=function(t){T.BaseLayer.call(this,t),this.type="vml",this.geometries=[]};i.prototype={initContainer:function(){var t;if(!this.$container)for(this.$container=T.DomUtil.create("div","tibco-layer vml-layer",this.map.$container.layers),this.$container.style.position="absolute",document.namespaces.add("v","urn:schemas-microsoft-com:vml"),T.DomUtil.addStyleNode(".tibco-vml\t {\tdisplay:inline-block; behavior:url(#default#VML); position: absolute; }"),this.$vml=this.$container,this.context=new T.VmlContext(this.$vml),t=0;t<this.geometries.length;t++)this.geometries[t].context=this.context,this.geometries[t].initContainer()},reset:function(){var t;for(t=0;t<this.geometries.length;t++)this.geometries[t].reset()},addGeometry:function(t){if(!(this.geometries.indexOf(t)>-1))return t.onAdd(this),this.geometries.push(t),this},removeGeometry:function(t){var i=this.geometries.indexOf(t);i>-1&&(this.geometries.splice(i,1),t.onRemove(this))},updateViewPort:function(){var t=this.map.getLayersPos();T.DomUtil.position(this.$vml,t.multiplyBy(-1)),this.reset()},bringForward:function(t){var i=T.DomUtil.getNodeIndex(t.$container,this.$vml);if(!(i<0)){var e=this.$vml.childNodes[i+2];e?this.$vml.insertBefore(t.$container,e):this.$vml.appendChild(t.$container)}},sendBackward:function(t){var i=T.DomUtil.getNodeIndex(t.$container,this.$vml);if(!(i<0)){var e=this.$vml.childNodes[i-1];e&&this.$vml.insertBefore(t.$container,e)}},bringToFront:function(t){T.DomUtil.getNodeIndex(t.$container,this.$vml)<0||this.$vml.appendChild(t.$container)},sendToBack:function(t){T.DomUtil.getNodeIndex(t.$container,this.$vml)<0||this.$vml.firstChild===t.$container||this.$vml.insertBefore(t.$container,this.$vml.firstChild)},getContainer:function(){return this.$container},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.reset,this),this.map.events.on("move-end",this.updateViewPort,this),T.Util.browserVersion.ielt9&&this.map.events.on("layer-moved",this.updateViewPort,this),this.initContainer(),this.updateViewPort()},onRemove:function(){T.VmlLayer.base.onRemove.call(this),this.map.events.detach("view-reset",this.reset),this.map.events.detach("move-end",this.updateViewPort),T.Util.browserVersion.ielt9&&this.map.events.detach("layer-moved",this.updateViewPort)},onGeometryClick:function(t,i){this.events.fire("geometry-click",i)}},T.Util.inherit(i,T.BaseLayer),t.VmlLayer=i}(T),function(t){var i=T.BaseLayer,e=function(t){i.call(this,t),T.Util.browserVersion.ielt9?this.vectorDrawer=new T.VmlLayer(this.options):t&&!0===t.useCanvas?this.vectorDrawer=new T.CanvasLayer(this.options):this.vectorDrawer=new T.SvgLayer(this.options),this.vectorDrawer.events=this.events};e.prototype={options:{defaultStyle:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:2,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2},clipOffset:100},reset:function(){this.vectorDrawer.reset()},addGeometry:function(t){return this.vectorDrawer.addGeometry(t)},removeGeometry:function(t){return this.vectorDrawer.removeGeometry(t)},bringForward:function(t){this.vectorDrawer.bringForward(t)},sendBackward:function(t){this.vectorDrawer.sendBackward(t)},bringToFront:function(t){this.vectorDrawer.bringToFront(t)},sendToBack:function(t){this.vectorDrawer.sendToBack(t)},updateViewPort:function(){this.vectorDrawer.updateViewPort()},getIndex:function(){return this.vectorDrawer.map.getLayerIndex(this)},getContainer:function(){return this.vectorDrawer.$container},setVisible:function(t){var i=this.getContainer();!0===t?i.style.display="block":!1===t&&(i.style.display="none")},isVisible:function(){return"none"!==this.getContainer().style.display},onAdd:function(t){this.vectorDrawer.onAdd(t)},onRemove:function(t){i.prototype.onRemove.call(this),this.vectorDrawer.onRemove(t)}},T.Util.inherit(e,i),t.VectorLayer=e}(T),function(t){var i=function(t){T.BaseLayer.call(this,t)};i.prototype={options:{opacity:1,attribution:null},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-layer google-layer",this.map.$container.layers),this.$container.layer=this,T.DomUtil.size(this.$container,this.map.getSize()),this.mapObject=new google.maps.Map(this.$container,{center:this.toGoogle(this.map.getCenter()),zoom:this.map.getZoom(),type:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!1,scrollwheel:!1,streetViewControl:!1}))},reset:function(){var t=this.map.$layers;google.maps.event.addListenerOnce(this.mapObject,"idle",function(){t.style.visibility=""}),t.style.visibility="hidden",this.mapObject.setOptions({animatedZoom:!1,center:this.toGoogle(this.map.getCenter()),zoom:this.map.getZoom()}),this.map.setUrlLocation()},update:function(){this.map&&this.map.setUrlLocation()},updatePosition:function(){if(this.map){var t=this.map.getLayersPos().multiplyBy(-1);T.DomUtil.position(this.$container,t),this.mapObject.setCenter(this.toGoogle(this.map.getCenter())),this.resizeMap()}},resizeMap:function(){google.maps.event.trigger(this.mapObject,"resize")},toGoogle:function(t){return new google.maps.LatLng(t.lat,t.lng)},setOpacity:function(t){this.options.opacity=t},onAdd:function(t){this.map=t,this.map.events.on("move-end",this.update,this),this.map.events.on("move",this.updatePosition,this),this.map.events.on("view-reset",this.reset,this),this.initContainer(),this.reset(),this.update()},onRemove:function(){T.GoogleLayer.base.onRemove.call(this),this.map.events.detach("move-end",this.update),this.map.events.detach("move",this.updatePosition),this.map.events.detach("view-reset",this.reset)}},T.Util.inherit(i,T.BaseLayer),t.GoogleLayer=i}(T),function(t){var i=T.TileLayer,e=function(t){"https:"!=window.location.protocol?this.mapServicesUrl="http://geoanalytics.tibco.com/service/services-list.json":this.mapServicesUrl="https://geoanalytics.tibco.com/service/ssl/services-list.json",this.mapServices=null,this.mapTypeService=null,this.mapTypeServiceData=null,this.options=T.Util.defaults(this.options,i.prototype.options),T.TileLayer.call(this,"",t),this.init(t)};e.prototype={options:{mapType:T.MapTypes.STANDARD,mapStyle:T.MapStyles.LIGHT,attribution:{prefix:"<a target='_blank' href='http://www.tibco.com/assets/blt59b361e6644c8d3a/tibco-end-user-license-agreement_tcm8-9378.pdf'>\xa9TIBCO GeoAnalytics</a>",text:""}},init:function(){var t=this;this.makeRequest(this.mapServicesUrl).then(function(i){t.mapServices=t.getMapServices(i),t.setMapType(t.options.mapType)},function(){throw new Error("Map services error!")})},makeRequest:function(t){var i=new T.Promise,e={method:"GET",withCredentials:!1,on:{success:function(t){var e=JSON.parse(t);i.resolve(e)},error:function(t){i.reject(t)}}};return(new T.Ajax).send(t,e),i},setMapType:function(t){var i=this,e=new T.Promise;if(!t)throw new Error("Please specify a map type!");if(this.options.mapType=t,this.mapTypeService=this.getMapServiceByMapType(this.options.mapType),!this.mapTypeService)throw new Error("Map services error!");return this.makeRequest(this.mapTypeService.href).then(function(t){if(!t||!t["tile url"])throw new Error("Map tiles error!");i.options.attribution.text='<a target="_blank" href='+t["copyright href"]+">"+t.copyright+"</a>",i.map.events.fire("attribution-update",i.options.attribution),i.map.events.fire("layer-attribution-reset",i),i.mapTypeServiceData=t,i.setMapStyle(i.options.mapStyle),e.resolve()},function(){throw e.reject(),new Error("Map tiles error!")}),e},setMapStyle:function(t){var i=this.mapTypeServiceData["tile styles"],e=!1,s=0;if(i){for(s=0;s<i.length;s++)if(i[s].id===t){e=!0,this.options.mapStyle=i[s].id,this.setTilesUrl(i[s].url);break}if(!e)throw new Error("Style '"+t+"' is not a supported map style!")}else this.setTilesUrl(this.mapTypeServiceData["tile url"])},setTilesUrl:function(t){if(!t)throw new Error("Map services error!");this.url=t+"{z}/{x}/{y}.png",this.map&&i.prototype.reset.call(this)},getAvailableMapTypes:function(){var t=[],i=0;if(!this.mapServices||0===this.mapServices.length)throw new Error("Map services error!");for(i=0;i<this.mapServices.length;i++)t.push(this.mapServices[i].name);return t},getAvailableMapStyles:function(){var t=[],i=0;if(!this.mapTypeServiceData)throw new Error("Map services error!");if(!this.mapTypeServiceData["tile styles"])return t;for(i=0;i<this.mapTypeServiceData["tile styles"].length;i++)t.push(this.mapTypeServiceData["tile styles"][i].id);return t},getMapServices:function(t){var i=null;if(!t||!t.maps)throw new Error("Map services error!");if(!(i=this.getLastVersionOfMapData(t.maps))||!i.services||0===i.services.length)throw new Error("Map services error!");return i.services},getMapServiceByMapType:function(t){var i=0;if(!t||!this.mapServices||0===this.mapServices.length)throw new Error("Map services error!");for(i=0;i<this.mapServices.length;i++)if(this.mapServices[i].name===t)return this.mapServices[i];return null},getLastVersionOfMapData:function(t){var i=0,e=null;if(!t||0===t.length)throw new Error("Map services error!");for(e=t[0],i=1;i<t.length;i++)t[i].version>e.version&&(e=t[i]);return e}},T.Util.inherit(e,T.TileLayer),t.TibcoLayer=e}(T),function(t){var i=function(t,i){i.transparent=i.transparent||"true",i.version=i.version||"1.1.1",i.format=i.format||"image/png",i.styles=i.styles||[],i.queryParams=i.queryParams||[],T.ImageLayer.call(this,null,null,i),this.wmsUrl=t};i.prototype={computeParameters:function(t){var i={};if(this.options.maxBounds){i.bounds=t.intersect(this.options.maxBounds);var e=this.map.transform(i.bounds.topLeft()),s=this.map.transform(i.bounds.bottomRight());i.topLeftPixel=e.substract(this.map.calculateTopLeft()).substract(this.map.getLayersPos()),i.size=s.substract(e)}else i.topLeftPixel=new T.Point(0,0).substract(this.map.getLayersPos()),i.size=this.map.getSize(),i.bounds=t;return i.size.x=0|i.size.x,i.size.y=0|i.size.y,i},handleBackbuffer:function(t){if(this.image.completed){var i=this.backImage;this.backImage=this.image,this.image=i,this.image.style.visibility="hidden",this.image.completed=!1,T.AnimUtil.canAnim()?T.AnimUtil.setMatrix(this.image,new T.Matrix2D):(this.image.style.width="",this.image.style.height="",this.image.style.left="",this.image.style.top="")}else this.image.onload=null,this.image.onerror=null,this.image.removeAttribute("src");if(!t){var e=this.map.lastTransform.matrix;this.backImage.matrix=e.multiplyBy(this.backImage.matrix),T.DomUtil.position(this.backImage,new T.Point(0,0)),T.AnimUtil.canAnim()?(T.AnimUtil.transition(this.backImage,0),T.AnimUtil.setMatrix(this.backImage,this.backImage.matrix.toString())):(this.backImage.style.width=(this.backImage.originalWidth||0)*this.backImage.matrix.m11+"px",this.backImage.style.height=(this.backImage.originalHeight||0)*this.backImage.matrix.m11+"px",this.backImage.style.left=this.backImage.matrix.m13+"px",this.backImage.style.top=this.backImage.matrix.m23+"px")}},reset:function(t){this.handleBackbuffer(t);var i,e=this.options.queryParams,s=this.image,n=this.map.options.crs,o=this.wmsUrl,a=this.map,r=a.getProjectedBounds(),h=this.computeParameters(r),l=h.size,c=h.topLeftPixel,m=h.bounds.bottomLeft(),u=h.bounds.topRight();if(l.x<=0||l.y<=0)return void this.events.fire("image-load",{tile:null});o+="?",o+="service=WMS",o+="&version="+this.options.version,o+="&request=GetMap",o+="&layers="+this.options.layers.join(","),o+="&styles="+this.options.styles.join(","),o+="&bbox="+m.x+","+m.y+","+u.x+","+u.y,o+="&format="+this.options.format,o+="&SRS="+n.code,o+="&width="+l.x,o+="&height="+l.y,o+="&transparent="+this.options.transparent;for(i in e)e.hasOwnProperty(i)&&(o+="&"+i+"="+e[i]);this.events.fire("image-loading",{tile:this.image}),T.DomUtil.position(s,c),s.onload=this.onImageLoad,s.onerror=this.onImageError,s.style.width=l.x+"px",s.style.height=l.y+"px",s.src=o},onMoveEnd:function(){this.reset(!0)},reload:function(t,i){},onAdd:function(t){i.base.onAdd.call(this,t),t.events.on("move-end",this.onMoveEnd,this)},onRemove:function(){i.base.onRemove.call(this),this.map.events.detach("move-end",this.reset)},onImageLoad:function(){var t=this.layer;this.completed=!0,t.image.style.zIndex=0,t.backImage.style.zIndex=-1,t.image.style.visibility="visible",t.backImage.style.visibility="hidden",t.image.matrix=new T.Matrix2D,t.image.matrix.m13+=T.DomUtil.position(this).x,t.image.matrix.m23+=T.DomUtil.position(this).y,T.AnimUtil.canAnim()||(t.image.originalWidth=parseInt(this.style.width,10),t.image.originalHeight=parseInt(this.style.height,10)),i.base.onImageLoad.call(this)},onImageError:function(t){this.layer.events.fire("wms-error","Error loading WMS image")}},T.Util.inherit(i,T.ImageLayer),t.WmsLayer=i}(T),function(t){var i=function(t,i){if(!t)throw new Error("TileLayer must have an URL");T.TileLayer.call(this,t,i),this.url=t,i.transparent=i.transparent||"true",i.version=i.version||"1.1.1",i.format=i.format||"image/png",i.styles=i.styles||[],i.queryParams=i.queryParams||[],i.errorTileAttemptsThreshold=0};i.prototype={getTileUrl:function(t){var i,e,s,n,o,a=this.map.options.crs,r=this.url,h=this.options.tileSize,l=this.options.queryParams,c=new T.Point(h,h);e=t.multiplyBy(h),s=a.untransform(e,this.map.getZoom()),i=c.multiplyBy(this.map.getResolution()).multiplyBy(new T.Point(1,-1)),n=s.add(i),r+="?",r+="service=WMS",r+="&version="+this.options.version,r+="&request=GetMap",r+="&layers="+this.options.layers.join(","),r+="&styles="+this.options.styles.join(","),r+="&bbox="+s.x+","+n.y+","+n.x+","+s.y,r+="&format="+this.options.format,r+="&SRS="+a.code,r+="&width="+h,r+="&height="+h,r+="&transparent="+this.options.transparent;for(o in l)l.hasOwnProperty(o)&&(r+="&"+o+"="+l[o]);return r},getTilePosition:function(t){var i=this.options.tileSize,e=this.map.getCenterInPixels().substract(this.map.getSize().divideBy(2)).floor();return t.multiplyBy(i).substract(e)},onRemove:function(){i.base.onRemove.call(this)}},T.Util.inherit(i,T.TileLayer),t.WmsTileLayer=i}(T),function(t){var i=function(t){T.BaseLayer.call(this,t),this.popups=[]};i.prototype={options:{opacity:1},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-layer popup-layer",this.map.$container.layers),this.$container.layer=this)},reset:function(){var t=0;for(t=0;t<this.popups.length;t++)this.popups[t].reset()},addPopup:function(t){this.$container.appendChild(t.$container),t.layer=this,t.onAdd(this),this.popups.push(t),t.$closeButton&&T.DomEventUtil.on(t.$closeButton,"mousedown",this.onPopupCloseButtonClick,this)},removePopup:function(t){var i=this.popups.indexOf(t);i>-1&&(this.popups.splice(i,1),t.layer=null,t.onRemove(this),this.$container.removeChild(t.$container),t.$closeButton&&T.DomEventUtil.off(t.$closeButton,"mousedown",this.onPopupCloseButtonClick,this))},removeAllPopups:function(){var t=0;for(t=0;t<this.popups.length;t++)this.popups[t].layer=null,this.popups[t].onRemove(this);this.popups=[],T.DomUtil.html(this.$container,"")},setOpacity:function(t){this.options.opacity=t,this.$container.style.opacity=this.options.opacity},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){T.PopupsLayer.base.onRemove.call(this),this.map.events.detach("view-reset",this.reset)},onPopupCloseButtonClick:function(t){(t.target||t.srcElement).popup.close()}},T.Util.inherit(i,T.BaseLayer),t.PopupsLayer=i}(T),function(t){var i=function(t,i){this.html=t,this.options=T.Util.defaults(i,this.options),this.initContainer()};i.prototype={options:{closeButtonUrl:"",offset:{x:0,y:0},panMap:!1,panMapExtraOffset:{x:0,y:0}},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-popup"),this.options.closeButtonUrl&&(this.$closeButton=T.DomUtil.create("img","tibco-popup-close",this.$container),this.$closeButton.src=this.options.closeButtonUrl,this.$closeButton.popup=this),this.$htmlContent=T.DomUtil.create("div","tibco-popup-content",this.$container),this.$tail=T.DomUtil.create("div","tibco-popup-tail",this.$container),this.$container.style.position="absolute",this.html&&T.DomUtil.html(this.$htmlContent,this.html),this.close())},addHandler:function(t){t.init(this)},setHtml:function(t,i){var e=null,s=null,n=null;if(t){if(i)for(e in i){if(s="{{"+e+"}}",-1==t.indexOf(s))throw"Invalid object for popup template!";n=new RegExp(s,"g"),t=t.replace(n,i[e])}this.html=t,T.DomUtil.html(this.$htmlContent,this.html)}},getPosition:function(t,i){var e=this.layer.map.latLngToPoint(t).floor();return e=e.substract(new T.Point(this.$container.clientWidth/2,this.$container.offsetHeight+this.$tail.offsetHeight/2)).add(new T.Point(this.options.offset.x,this.options.offset.y))},getLayersContainerPanOffset:function(){return{top:parseInt(T.DomUtil.getStyle(this.layer.map.$container.layers,"top"),10),left:parseInt(T.DomUtil.getStyle(this.layer.map.$container.layers,"left"),10)}},getPanOffset:function(){var t=0,i=0,e=this.getPositionWithPan();return t=e.left<0?Math.abs(e.left)+this.options.panMapExtraOffset.x:this.isHorizontallyVisible()?-this.options.panMapExtraOffset.x:this.layer.map.$container.offsetWidth-this.options.panMapExtraOffset.x-(e.left+this.$container.offsetWidth),
i=e.top<0?Math.abs(e.top)+this.options.panMapExtraOffset.y:this.isVerticallyVisible()?-this.options.panMapExtraOffset.y:this.layer.map.$container.offsetHeight-this.options.panMapExtraOffset.y-(e.top+this.$container.offsetHeight+this.$tail.offsetHeight),{x:t,y:i}},getPositionWithPan:function(){var t=this.getLayersContainerPanOffset();return this.$container.tibcoPosition?{top:this.$container.tibcoPosition.y+t.top,left:this.$container.tibcoPosition.x+t.left}:null},isInViewport:function(){return this.isHorizontallyVisible()&&this.isVerticallyVisible()},isHorizontallyVisible:function(){var t=this.getPositionWithPan();return t.left>0&&t.left+this.$container.offsetWidth<=this.layer.map.$container.offsetWidth},isVerticallyVisible:function(){var t=this.getPositionWithPan();return t.top>0&&t.top+this.$container.offsetHeight<=this.layer.map.$container.offsetHeight},panMapIfNecessary:function(){var t;!0!==this.options.panMap||this.isInViewport()||(t=this.getPanOffset(),this.layer.map.panBy(new T.Point(t.x,t.y)))},reset:function(){var t;this.reference&&(t=this.getPosition(this.reference,this.options.offset),T.DomUtil.position(this.$container,t))},open:function(t){t&&(this.reference=t,T.DomUtil.show(this.$container),this.reset(),this.panMapIfNecessary())},close:function(){T.DomUtil.hide(this.$container)},onAdd:function(t){},onRemove:function(t){}},t.Popup=i}(T),function(t){var i=function(t,i,e){this.latlng=t,this.url=i,this.options=T.Util.defaults(e,this.options),this.imageSize=new T.Point(0,0),this.initContainer(),this.options.draggable&&this.addHandler(new T.MarkerDragHandler)};i.prototype={options:{draggable:!1,draggableUsingOffset:!1,popOnClick:!0,offset:new T.Point(0,0),anchor:"bottom-center"},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-marker"),this.$container.marker=this,this.$container.style.position="absolute")},addHandler:function(t){t.init(this)},reset:function(){if(this.layer&&this.layer.map){var t=this.layer.map.latLngToPoint(this.latlng);switch(this.options.anchor){case"bottom-left":t.y=t.y-this.imageSize.y;break;case"bottom-center":t.x=t.x-this.imageSize.x/2,t.y=t.y-this.imageSize.y;break;case"bottom-right":t.x=t.x-this.imageSize.x,t.y=t.y-this.imageSize.y}t=t.substract(this.options.offset).floor(),T.DomUtil.position(this.$container,t)}},resetFromPx:function(){var t=T.DomUtil.position(this.$container).add(new T.Point(this.imageSize.x/2,this.imageSize.y));this.latlng=this.layer.map.pointToLatLng(t)},initImage:function(){var t=this.image=T.DomUtil.create("img","tibco-marker-image");t.marker=this,t.onload=this.onImageLoad,t.onclick=this.onImageClick,t.onerror=this.onImageError,t.src=this.url,this.$container.appendChild(t)},onAdd:function(t){this.image||this.initImage()},onRemove:function(t){},onImageLoad:function(){this.marker.imageSize=new T.Point(this.width,this.height),this.marker.reset()},onImageClick:function(){},onImageError:function(){}},t.ImageMarker=i}(T),function(t){var i=function(t,i,e){this.latlng=t,this.html=i,this.options=T.Util.defaults(e,this.options),this.dragOffset=new T.Point(0,0),this.initContainer(),this.options.draggable&&this.addHandler(new T.MarkerDragHandler)};i.prototype={options:{draggable:!1,draggableUsingOffset:!1,popOnClick:!1,offset:new T.Point(0,0)},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-marker"),this.$container.marker=this,this.$container.style.position="absolute",this.html&&T.DomUtil.html(this.$container,this.html))},addHandler:function(t){t.init(this)},reset:function(){if(this.layer&&this.layer.map){var t=this.layer.map.latLngToPoint(this.latlng).floor();t=t.substract(this.options.offset).add(this.dragOffset),T.DomUtil.position(this.$container,t)}},resetFromPx:function(){var t=T.DomUtil.position(this.$container).add(this.options.offset);this.latlng=this.layer.map.pointToLatLng(t)},resetOffset:function(){var t=this.layer.map.latLngToPoint(this.latlng),i=T.DomUtil.position(this.$container);this.dragOffset=i.substract(t)},onAdd:function(t){},onRemove:function(t){}},t.HtmlMarker=i}(T),function(t){var i=function(t){this.options=T.Util.defaults(t,this.options)};i.prototype={options:{offset:[0,0],fontSize:10,fontStyle:"normal",fontFamily:"Tahoma",kmLabel:"km",mLabel:"m",miLabel:"mi",ftLabel:"ft"},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","scale-control",this.map.$container.controls),this.$container.style.position="absolute",this.$container.style.left=this.options.offset[0]+5+"px",this.$container.style.bottom=this.options.offset[1]+5+"px",this.$container.style.fontSize=this.options.fontSize+"pt",this.$container.style.fontFamily=this.options.fontFamily,this.$container.style.fontStyle=this.options.fontStyle)},getPresetDistance:function(t){var i=parseInt(t,10).toString(),e=Math.pow(10,i.length),s=t/e;return s<.03?e:s<.1?5*e:s<.2?10*e:s<.4?20*e:50*e},getPresetMileDistance:function(t){var i=parseInt(t,10).toString(),e=Math.pow(10,i.length),s=t/e;return s<.015?5:s<.02?10:s<.03?e:s<.1?5*e:s<.2?10*e:s<.4?20*e:50*e},getPresetFeetDistance:function(t){var i=parseInt(t,10).toString(),e=Math.pow(10,i.length),s=t/e;return s<.03?e:s<.15?5*e:s<.25?10*e:s<.45?20*e:50*e},reset:function(){var t=this.map.getMapResolution(),i=this.getPresetDistance(t),e=i/t,s=this.options.mLabel;i/1e3>=1&&(i/=1e3,s=this.options.kmLabel);var n=3.28084*t,o=this.options.ftLabel,a=!1,r=this.getPresetFeetDistance(n);if(r/5280>=1){var h=621371e-9*t;r=this.getPresetMileDistance(h),a=!0,o=this.options.miLabel}var l=!1===a?.3048*r/t:1609.34*r/t,c="";c+='<div style="padding-left: 6px;"><span>'+i+" "+s+"</span></div>",c+='<div style="width: '+Math.max(e,l)+'px; height: 0px; border: 1px solid;"></div>',c+='<div style="padding-left: 6px;"><span>'+r+" "+o+"</span></div>",c+='<div style="position: absolute; border: 1px solid;height: 26px;top: 50%;margin-top: -13px;"></div>',c+='<div style="position: absolute; border: 1px solid;height: 5px;top: 50%;left:'+e+'px;margin-top: -6px;"></div>',c+='<div style="position: absolute; border: 1px solid;height: 5px;top: 50%;left:'+l+'px;"></div>',T.DomUtil.html(this.$container,c)},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.reset,this),this.map.events.on("move",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){this.map.events.detach("view-reset",this.reset),this.map.events.detach("move",this.reset),T.DomUtil.remove(this.$container),this.map=null}},t.ScaleControl=i}(T),function(t){var i=function(t){this.options=T.Util.defaults(t,this.options),this.attributions=[]};i.prototype={options:{separator:" | ",prefix:"",offset:[0,0],fontSize:9,fontFamily:"Tahoma",opacity:.5},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div","tibco-control tibco-attribution",this.map.$container.controls),this.$container.style.background="#FFFFFF",this.$container.style.position="absolute",this.$container.style.margin=0,this.$container.style.right=this.options.offset[0]+"px",this.$container.style.bottom=this.options.offset[1]+"px",this.$container.style.padding="5px",this.$container.style.fontSize=this.options.fontSize+"pt",this.$container.style.fontFamily=this.options.fontFamily,this.$container.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*this.options.opacity+")",T.DomUtil.setOpacity(this.$container,this.options.opacity))},reset:function(){var t="",i=this.options.separator;""!==this.options.prefix&&0!==this.attributions.length||(i=""),t=this.options.prefix+i+this.attributions.join(this.options.separator),t?(this.$container.style.display="block",T.DomUtil.html(this.$container,t)):this.$container.style.display="none"},addAttribution:function(t){if(t&&!(this.getAttributionIndex(t)>-1))return this.attributions.push(t),this.reset(),this},removeAttribution:function(t){if(t){var i=this.getAttributionIndex(t);return i>-1&&(this.attributions=this.attributions.slice(i,1)),this}},getAttributionIndex:function(t){var i=0;for(i=0;i<this.attributions.length;i++)if(t===this.attributions[i])return i;return-1},onAdd:function(t){this.map=t,this.map.events.on("layer-add",this.onLayerAdd,this),this.map.events.on("layer-remove",this.onLayerRemove,this),this.map.events.on("layer-attribution-reset",this.onLayerAttributionReset,this),this.map.events.on("attribution-update",this.onAttributionUpdate,this),this.initContainer(),this.reset()},onRemove:function(){this.map.events.detach("layer-add",this.onLayerAdd),this.map.events.detach("layer-remove",this.onLayerRemove),T.DomUtil.remove(this.$container),this.map=null},onLayerAdd:function(t){t.options.attribution&&("object"===_typeof(t.options.attribution)?this.addAttribution(t.options.attribution.text):this.addAttribution(t.options.attribution))},onLayerRemove:function(t){t.options.attribution&&("object"===_typeof(t.options.attribution)?this.removeAttribution(t.options.attribution.text):this.removeAttribution(t.options.attribution))},onAttributionUpdate:function(t){t&&T.Util.defaults(this.options,t)},onLayerAttributionReset:function(t){t.options.attribution&&("object"===_typeof(t.options.attribution)?this.addAttribution(t.options.attribution.text):this.addAttribution(t.options.attribution))}},t.AttributionControl=i}(T),function(t){var i=function(t){this.options=T.Util.defaults(t,this.options),this.disbaled=!1,this.vectorLayer=null,this.markerLayer=null,this.coordinates=[],this.distance=0,this.polyline=new T.Polyline(this.coordinates),this.polyline.setStyle({color:"#FF0000",stroke:!0}),this.events=new T.EventDispatcher};i.prototype={options:{disableMouse:!1,useCanvas:!1,startFlag:"",endFlag:""},initContainer:function(){this.vectorLayer||(this.vectorLayer=new T.VectorLayer({useCanvas:this.options.useCanvas}),this.map.addLayer(this.vectorLayer),this.vectorLayer.addGeometry(this.polyline)),this.markersLayer||(this.markerLayer=new T.MarkersLayer,this.map.addLayer(this.markerLayer))},calculateDisance:function(){var t;if(this.distance=0,this.coordinates.length>1)for(t=1;t<this.coordinates.length;t++)this.distance+=this.computeDistanceBetween(T.LatLng.from(this.coordinates[t-1]),T.LatLng.from(this.coordinates[t]));this.events.fire("distance-changed",this)},computeDistanceBetween:function(t,i){var e=(i.lat-t.lat).toRad(),s=(i.lng-t.lng).toRad(),n=t.lat.toRad(),o=i.lat.toRad(),a=Math.sin(e/2)*Math.sin(e/2)+Math.sin(s/2)*Math.sin(s/2)*Math.cos(n)*Math.cos(o);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371},enable:function(){this.options.disableMouse||T.DomEventUtil.on(this.map.$container,"click",this.onMapClick,this),this.disabled=!1},disable:function(){T.DomEventUtil.off(this.map.$container,"click",this.onMapClick),this.disabled=!0},addCoordinate:function(t){this.coordinates.push([t.lat,t.lng]),this.reset()},addCoordinateAt:function(t,i){this.coordinates.splice(i,0,[t.lat,t.lng]),this.reset()},reset:function(){this.vectorLayer.updateViewPort();var t=null;if(1===this.coordinates.length)t=new T.ImageMarker(T.LatLng.from(this.coordinates[0]),this.options.startFlag,{anchor:"bottom-center",offset:new T.Point(0,-5)}),this.markerLayer.removeAllMarkers(),this.markerLayer.addMarker(t);else if(this.coordinates.length>1){t=new T.ImageMarker(T.LatLng.from(this.coordinates[0]),this.options.startFlag,{anchor:"bottom-center",offset:new T.Point(0,-5)});var i=new T.ImageMarker(T.LatLng.from(this.coordinates[this.coordinates.length-1]),this.options.endFlag,{anchor:"bottom-center",offset:new T.Point(0,-5)});this.markerLayer.removeAllMarkers(),this.markerLayer.addMarker(t),this.markerLayer.addMarker(i)}this.calculateDisance()},clear:function(){this.coordinates=[],this.polyline.coords=this.coordinates,this.markerLayer.removeAllMarkers(),this.reset()},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){this.map.events.detach("view-reset",this.reset),T.DomUtil.remove(this.$container),this.map=null},onMapClick:function(t){var i=this.map.computeMousePosition(t),e=this.map.containerPointToLatLng(i);this.coordinates.push([e.lat,e.lng]),this.reset()}},t.RulerControl=i}(T),function(t){var i=function(t){this.options=T.Util.defaults(t,this.options),this.attributions=[]};i.prototype={CONTROL_LAYERS_CLASS:"tibco-control-layers",CONTROL_LAYERS_HEADER_CLASS:"header",CONTROL_LAYERS_CONTAINER_CLASS:"layers",HEADER_LABEL_CLASS:"label",HEADER_COLLAPSE_CLASS:"collapse",HEADER_COLLAPSE_TRUE_CLASS:"is-collapsed",HEADER_COLLAPSE_FALSE_CLASS:"is-not-collapsed",LAYER_CONTAINER_CLASS:"layer",LAYER_RADIO_CLASS:"radio",LAYER_VISIBLE_CLASS:"visibility",LAYER_LABEL_CLASS:"label",LAYER_SELECTED_CLASS:"selected",options:{offset:[0,0],fontSize:10,fontFamily:"Tahoma"},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div",this.CONTROL_LAYERS_CLASS,this.map.$container.controls),this.$container.style.top=this.options.offset[0]+"px",this.$container.style.left=this.options.offset[1]+"px",this.$container.style.fontSize=this.options.fontSize+"pt",this.$container.style.fontFamily=this.options.fontFamily,this.createHeader(),this.createLayersContainer(),this.selectedLayerData=this.map.getLayers()[this.map.getLayers().length-1])},reset:function(){var t=this.map.getLayers(),i=0;for(this.clearLayers(),i=0;i<t.length;i++)this.createLayer(t[i]);this.bindKeyEvents()},createHeader:function(){var t=null;this.$headerContainer=T.DomUtil.create("div",this.CONTROL_LAYERS_HEADER_CLASS,this.$container),this.$headerContainer.style.fontSize=this.options.fontSize+"pt",this.$headerContainer.style.fontFamily=this.options.fontFamily,t=T.DomUtil.create("div",this.HEADER_LABEL_CLASS,this.$headerContainer),T.DomUtil.html(t,"Layers"),T.DomUtil.create("div",this.HEADER_COLLAPSE_CLASS,this.$headerContainer),T.DomEventUtil.on(this.$headerContainer,"click",this.toggleLayers,this)},createLayersContainer:function(){this.$layersContainer=T.DomUtil.create("div",this.CONTROL_LAYERS_CONTAINER_CLASS,this.$container),this.$layersContainer.tabIndex="1",this.$layersContainer.style.display="none"},createLayer:function(t){var i=null,e=null,s=null,n=null;i=T.DomUtil.create("div",this.LAYER_CONTAINER_CLASS,this.$layersContainer),e=T.DomUtil.create("input",this.LAYER_RADIO_CLASS),e.type="radio",e.name="active-layer",i.appendChild(e),e.checked=t===this.selectedLayerData?"checked":"",s=T.DomUtil.create("input",this.LAYER_VISIBLE_CLASS),s.type="checkbox",i.appendChild(s),s.checked=!0===t.isVisible()?"checked":"",n=T.DomUtil.create("div",this.LAYER_LABEL_CLASS),T.DomUtil.html(n,t.name),i.appendChild(n),T.DomEventUtil.on(e,"click",this.onSelectLayer,this),T.DomEventUtil.on(s,"click",this.onSetLayerVisibility,this)},toggleLayers:function(){var t=T.DomUtil.getNodesByClass(this.HEADER_COLLAPSE_CLASS)[0];t&&(this.areLayersVisible()?(t.className=this.HEADER_COLLAPSE_CLASS+" "+this.HEADER_COLLAPSE_TRUE_CLASS,T.DomEventUtil.off(this.$layersContainer,"keydown",this.onKeydownHandler,this),this.hideLayers()):(t.className=this.HEADER_COLLAPSE_CLASS+" "+this.HEADER_COLLAPSE_FALSE_CLASS,T.DomEventUtil.on(this.$layersContainer,"keydown",this.onKeydownHandler,this),this.showLayers(),this.$layersContainer.focus()))},showLayers:function(){this.$layersContainer.style.display="block"},hideLayers:function(){this.$layersContainer.style.display="none"},areLayersVisible:function(){return"none"!==this.$layersContainer.style.display},clearLayers:function(){for(;this.$layersContainer.hasChildNodes();)T.DomUtil.hasClass(this.$layersContainer.lastChild,this.LAYER_CONTAINER_CLASS)&&this.$layersContainer.removeChild(this.$layersContainer.lastChild)},bindKeyEvents:function(){T.DomEventUtil.off(document,"keydown",this.onKeydownHandler,this),T.DomEventUtil.on(document,"keydown",this.onKeydownHandler,this)},onKeydownHandler:function(t){void 0!==t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.selectedLayerData&&(38===t.keyCode?this.map.moveLayerDown(this.selectedLayerData):40===t.keyCode&&this.map.moveLayerUp(this.selectedLayerData))},onSelectLayer:function(t){var i=void 0===t.srcElement?t.target:t.srcElement;this.selectedLayerIndex=T.DomUtil.getNodeIndex(i.parentNode,this.$layersContainer),this.selectedLayerData=this.map.getLayers()[this.selectedLayerIndex],this.$layersContainer.focus()},onSetLayerVisibility:function(t){var i=null,e=-1,s=void 0===t.srcElement?t.target:t.srcElement,n=s.checked;e=T.DomUtil.getNodeIndex(s.parentNode,this.$layersContainer),i=this.map.getLayers()[e],i.setVisible(n)},onAdd:function(t){this.map=t,this.map.events.on("layer-add",this.reset,this),this.map.events.on("layer-remove",this.reset,this),this.map.events.on("layer-moved",this.reset,this),this.map.events.on("layer-hide",this.reset,this),this.map.events.on("layer-show",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){this.map.events.detach("layer-add",this.reset),this.map.events.detach("layer-remove",this.reset),this.map.events.detach("layer-moved",this.reset),T.DomUtil.remove(this.$container),this.map=null}},t.LayersControl=i}(T),function(t){var i=function(t){this.options=T.Util.defaults(t,this.options),this.attributions=[]};i.prototype={CONTROL_LAYERS_CLASS:"tibco-control-tibco-map",CONTROL_LAYERS_HEADER_CLASS:"header",CONTROL_LAYERS_CONTAINER_CLASS:"layers",HEADER_LABEL_CLASS:"label",HEADER_COLLAPSE_CLASS:"collapse",HEADER_COLLAPSE_TRUE_CLASS:"is-collapsed",HEADER_COLLAPSE_FALSE_CLASS:"is-not-collapsed",LAYER_CONTAINER_CLASS:"layer",LAYER_RADIO_CLASS:"radio",LAYER_VISIBLE_CLASS:"visibility",LAYER_LABEL_CLASS:"label",LAYER_SELECTED_CLASS:"selected",LAYER_OPTIONS_CONTAINER_CLASS:"layer-options",LAYER_OPTIONS_GROUP_CLASS:"layer-options-group",LAYER_OPTIONS_SELECT_CLASS:"layer-options-select",LAYER_OPTION_CLASS:"layer-option",options:{offset:[0,0],fontSize:10,fontFamily:"Tahoma"},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div",this.CONTROL_LAYERS_CLASS,this.map.$container.controls),this.$container.style.top=this.options.offset[0]+"px",this.$container.style.right=this.options.offset[1]+"px",this.$container.style.fontSize=this.options.fontSize+"pt",this.$container.style.fontFamily=this.options.fontFamily,this.createHeader(),this.createLayersContainer(),this.createOptionsContainer())},reset:function(){var t=this.getMapTibcoLayers(),i=0;for(this.clearContainer(this.$layersContainer,this.LAYER_CONTAINER_CLASS),i=0;i<t.length;i++)this.createLayer(t[i])},createHeader:function(){var t=null;this.$headerContainer=T.DomUtil.create("div",this.CONTROL_LAYERS_HEADER_CLASS,this.$container),this.$headerContainer.style.fontSize=this.options.fontSize+"pt",this.$headerContainer.style.fontFamily=this.options.fontFamily,t=T.DomUtil.create("div",this.HEADER_LABEL_CLASS,this.$headerContainer),T.DomUtil.html(t,"Tibco Layers"),T.DomUtil.create("div",this.HEADER_COLLAPSE_CLASS,this.$headerContainer),T.DomEventUtil.on(this.$headerContainer,"click",this.toggleContent,this)},createLayersContainer:function(){this.$layersContainer=T.DomUtil.create("div",this.CONTROL_LAYERS_CONTAINER_CLASS,this.$container),this.$layersContainer.tabIndex="1",this.$layersContainer.style.display="none"},createOptionsContainer:function(){this.$layerOptionsContainer=T.DomUtil.create("div",this.LAYER_OPTIONS_CONTAINER_CLASS,this.$container),this.$layerOptionsContainer.tabIndex="1",this.$layerOptionsContainer.style.display="none"},createLayer:function(t){var i=null,e=null,s=null;i=T.DomUtil.create("div",this.LAYER_CONTAINER_CLASS,this.$layersContainer),e=T.DomUtil.create("input",this.LAYER_RADIO_CLASS),e.type="radio",e.name="active-layer",i.appendChild(e),e.checked="",s=T.DomUtil.create("div",this.LAYER_LABEL_CLASS),T.DomUtil.html(s,t.options.name),i.appendChild(s),T.DomEventUtil.on(e,"click",this.onSelectLayer,this)},createLayerOptions:function(){var t=0,i=null,e=null,s=null,n=null,o=null,a=null,r=null,h=null,l=null;if(!this.selectedLayerData)throw new Error("No layer selected!");for(this.clearContainer(this.$layerOptionsContainer,this.LAYER_OPTIONS_GROUP_CLASS),this.$layerOptionsContainer.style.display="block",o=this.selectedLayerData.getAvailableMapTypes(),l=T.DomUtil.create("div",this.LAYER_OPTIONS_GROUP_CLASS,this.$layerOptionsContainer),r=T.DomUtil.create("span",this.LAYER_OPTIONS_SELECT_CLASS,l),T.DomUtil.html(r,"Map type:"),i=T.DomUtil.create("select",this.LAYER_OPTIONS_SELECT_CLASS,l),t=0;t<o.length;t++)s=T.DomUtil.create("option",this.LAYER_OPTION_CLASS),T.DomUtil.html(s,o[t]),i.appendChild(s),T.DomEventUtil.on(i,"change",this.onMapTypeChanged,this);if(i.value=this.selectedLayerData.options.mapType,(a=this.selectedLayerData.getAvailableMapStyles())&&0!==a.length){for(l=T.DomUtil.create("div",this.LAYER_OPTIONS_GROUP_CLASS,this.$layerOptionsContainer),h=T.DomUtil.create("span",this.LAYER_OPTIONS_SELECT_CLASS,l),T.DomUtil.html(h,"Map style:"),e=T.DomUtil.create("select",this.LAYER_OPTIONS_SELECT_CLASS,l),t=0;t<a.length;t++)n=T.DomUtil.create("option",this.LAYER_OPTION_CLASS),T.DomUtil.html(n,a[t]),e.appendChild(n),T.DomEventUtil.on(e,"change",this.onMapStyleChanged,this);e.value=this.selectedLayerData.options.mapStyle}},getMapTibcoLayers:function(){var t=this.map.getLayers(),i=[],e=0;for(e=0;e<t.length;e++)t[e]instanceof T.TibcoLayer&&i.push(t[e]);return i},toggleContent:function(){var t=T.DomUtil.getNodesByClass(this.HEADER_COLLAPSE_CLASS)[0];t&&(this.areLayersVisible()?(t.className=this.HEADER_COLLAPSE_CLASS+" "+this.HEADER_COLLAPSE_TRUE_CLASS,this.hideContent()):(t.className=this.HEADER_COLLAPSE_CLASS+" "+this.HEADER_COLLAPSE_FALSE_CLASS,this.showContent(),this.$layersContainer.focus()))},showContent:function(){this.$layersContainer.style.display="block",this.selectedLayerData&&(this.$layerOptionsContainer.style.display="block")},hideContent:function(){this.$layersContainer.style.display="none",this.$layerOptionsContainer.style.display="none"},areLayersVisible:function(){return"none"!==this.$layersContainer.style.display},clearContainer:function(t,i){for(;t.hasChildNodes();)T.DomUtil.hasClass(t.lastChild,i)&&t.removeChild(t.lastChild)},onAdd:function(t){if(this.map=t,this.tibcoLayers=this.getMapTibcoLayers(),0===this.tibcoLayers.length)throw new Error("Map does not contain TibcoLayers. Cannot initialize this control!");this.map.events.on("layer-add",this.reset,this),this.map.events.on("layer-remove",this.reset,this),this.map.events.on("layer-moved",this.reset,this),this.map.events.on("layer-hide",this.reset,this),this.map.events.on("layer-show",this.reset,this),this.initContainer(),this.reset()},onRemove:function(){this.map.events.detach("layer-add",this.reset),this.map.events.detach("layer-remove",this.reset),this.map.events.detach("layer-moved",this.reset),T.DomUtil.remove(this.$container),this.map=null},onSelectLayer:function(t){var i=void 0===t.srcElement?t.target:t.srcElement;this.selectedLayerIndex=T.DomUtil.getNodeIndex(i.parentNode,this.$layersContainer),this.selectedLayerData=this.tibcoLayers[this.selectedLayerIndex],this.createLayerOptions(),this.$layersContainer.focus()},onMapTypeChanged:function(t){var i=void 0===t.srcElement?t.target:t.srcElement,e=this;this.selectedLayerData.setMapType(i.value).then(function(){e.createLayerOptions()},function(){})},onMapStyleChanged:function(t){var i=void 0===t.srcElement?t.target:t.srcElement;this.selectedLayerData.setMapStyle(i.value),this.createLayerOptions()}},t.TibcoMapControl=i}(T),function(t){var i=function(t){this.minHeight=100,this.options=T.Util.defaults(t,this.options),this.height=!this.options.zoomRailHeight||this.options.zoomRailHeight<this.minHeight?this.minHeight:this.options.zoomRailHeight};i.prototype={CONTROL_NAVIGATION_CLASS:"tibco-control-navigation",PAN_CONTROL_CLASS:"pan-control",RESET_CLASS:"reset",PAN_UP_CLASS:"pan-up",PAN_DOWN_CLASS:"pan-down",PAN_LEFT_CLASS:"pan-left",PAN_RIGHT_CLASS:"pan-right",ZOOM_CONTROL_CLASS:"zoom-control",ZOOM_IN_CLASS:"zoom-in",ZOOM_OUT_CLASS:"zoom-out",ZOOM_SLIDER_CLASS:"zoom-slider",ZOOM_RAIL_CLASS:"zoom-rail",ZOOM_THUMB_CLASS:"zoom-thumb",options:{offset:[0,0],panOffset:100,panControl:!0,zoomControl:!0},initContainer:function(){this.$container||(this.$container=T.DomUtil.create("div",this.CONTROL_NAVIGATION_CLASS,this.map.$container.controls),this.$container.style.top=this.options.offset[0]+"px",this.$container.style.left=this.options.offset[1]+"px",this.initPanControl(),this.initZoomControl())},initPanControl:function(){this.options.panControl&&this.createPanControl()},initZoomControl:function(){this.options.zoomControl&&(this.createZoomControl(),this.setPositionForZoom(this.map.zoom),this.drag=new T.DragUtil(this.$zoomThumbContainer,this.$zoomThumbContainer,{limit:{minX:0,maxX:0,minY:this.minY,maxY:this.maxY}}),this.drag.events.on("drag-end",this.onZoomThumbDragEnd,this),this.drag.enable())},createPanControl:function(){this.$panContainer=T.DomUtil.create("div",this.PAN_CONTROL_CLASS,this.$container),this.$panUpContainer=T.DomUtil.create("div",this.PAN_UP_CLASS,this.$panContainer),this.$panUpContainer.title=this.options.titles&&this.options.titles.panUp?this.options.titles.panUp:"",this.$panDownContainer=T.DomUtil.create("div",this.PAN_DOWN_CLASS,this.$panContainer),this.$panDownContainer.title=this.options.titles&&this.options.titles.panDown?this.options.titles.panDown:"",this.$panLeftContainer=T.DomUtil.create("div",this.PAN_LEFT_CLASS,this.$panContainer),this.$panLeftContainer.title=this.options.titles&&this.options.titles.panLeft?this.options.titles.panLeft:"",this.$panRightContainer=T.DomUtil.create("div",this.PAN_RIGHT_CLASS,this.$panContainer),this.$panRightContainer.title=this.options.titles&&this.options.titles.panRight?this.options.titles.panRight:"",this.options.disableMapReset||(this.$resetContainer=T.DomUtil.create("div",this.RESET_CLASS,this.$panContainer),this.$resetContainer.title=this.options.titles&&this.options.titles.reset?this.options.titles.reset:"",T.DomEventUtil.on(this.$resetContainer,"click",this.onReset,this)),T.DomEventUtil.on(this.$panUpContainer,"click",this.onPanUp,this),T.DomEventUtil.on(this.$panDownContainer,"click",this.onPanDown,this),T.DomEventUtil.on(this.$panLeftContainer,"click",this.onPanLeft,this),T.DomEventUtil.on(this.$panRightContainer,"click",this.onPanRight,this)},createZoomControl:function(){this.$zoomContainer=T.DomUtil.create("div",this.ZOOM_CONTROL_CLASS,this.$container),this.$zoomInContainer=T.DomUtil.create("div",this.ZOOM_IN_CLASS,this.$zoomContainer),this.$zoomInContainer.title=this.options.titles&&this.options.titles.zoomIn?this.options.titles.zoomIn:"",this.$zoomOutContainer=T.DomUtil.create("div",this.ZOOM_OUT_CLASS,this.$zoomContainer),this.$zoomOutContainer.title=this.options.titles&&this.options.titles.zoomOut?this.options.titles.zoomOut:"",this.$zoomSliderContainer=T.DomUtil.create("div",this.ZOOM_SLIDER_CLASS,this.$zoomContainer),this.$zoomRailContainer=T.DomUtil.create("div",this.ZOOM_RAIL_CLASS,this.$zoomSliderContainer),this.$zoomThumbContainer=T.DomUtil.create("div",this.ZOOM_THUMB_CLASS,this.$zoomRailContainer),this.$zoomSliderContainer.style.height=this.height+"px",0===this.minZoom?this.$zoomSliderContainer.style.height=this.height+this.$zoomThumbContainer.clientHeight+"px":this.$zoomSliderContainer.style.height=this.height+this.$zoomThumbContainer.clientHeight-this.zoomSkipInterval+"px",this.$zoomContainer.style.height=this.$zoomSliderContainer.clientHeight+this.$zoomInContainer.clientHeight+this.$zoomOutContainer.clientHeight+"px",this.minY=0,0===this.minZoom?this.maxY=this.height:this.maxY=this.height-this.zoomSkipInterval,T.DomEventUtil.on(this.$zoomInContainer,"click",this.onZoomIn,this),T.DomEventUtil.on(this.$zoomOutContainer,"click",this.onZoomOut,this),T.DomEventUtil.on(this.$zoomRailContainer,"click",this.onRailClick,this)},getBottomPosition:function(t){return this.height-t},setPositionForZoom:function(t){var i=null;t=void 0!==t?t:this.map.zoom,i=this.getBottomPosition(t*this.zoomSkipInterval),T.DomUtil.position(this.$zoomThumbContainer,new T.Point(0,i))},setZoomForPosition:function(t){var i=null;t=this.getBottomPosition(t),i=t===this.minY?this.minZoom:Math.round(t/this.zoomSkipInterval),this.map.setZoom(i)},reset:function(){this.$container&&(T.DomUtil.remove(this.$container),this.$container=null),this.minZoom=this.map.options.minZoom,this.maxZoom=this.map.options.maxZoom,0===this.minZoom?this.zoomSkipInterval=this.height/this.maxZoom:this.zoomSkipInterval=this.height/(this.maxZoom-this.minZoom+1),this.initContainer()},onPanUp:function(){var t=new T.Point(0,this.options.panOffset);this.map.panBy(t)},onPanDown:function(){var t=new T.Point(0,-this.options.panOffset);this.map.panBy(t)},onPanLeft:function(){var t=new T.Point(this.options.panOffset,0);this.map.panBy(t)},onPanRight:function(){var t=new T.Point(-this.options.panOffset,0);this.map.panBy(t)},onReset:function(){this.map.resetView(this.map.options.center,this.map.options.zoom)},onZoomIn:function(){this.map.setZoom(this.map.zoom+1)},onZoomOut:function(){this.map.setZoom(this.map.zoom-1)},onZoomThumbDragEnd:function(){var t=T.DomUtil.position(this.$zoomThumbContainer).y;this.setZoomForPosition(t)},onRailClick:function(t){var i=null,e=null;e=void 0===t.srcElement?t.target:t.srcElement,e.className===this.ZOOM_RAIL_CLASS&&(i=void 0===t.offsetY?t.layerY:t.offsetY,this.setZoomForPosition(i))},onAdd:function(t){this.map=t,this.map.events.on("view-reset",this.setPositionForZoom,this),this.map.events.on("zoom-interval-change",this.reset,this),this.reset()},onRemove:function(){this.map.events.detach("view-reset",this.setPositionForZoom),this.map.events.detach("zoom-interval-change",this.reset),T.DomUtil.remove(this.$container),this.map=null}},t.NavigationControl=i}(T),function(t){var i=function(t){this.geoJson=t,this.geometries=[],this.readPart(t)};i.prototype={readPart:function(t){var i,e;switch(t.type){case"Point":e=new T.Circle(t.coordinates,3,{radiusMeasure:"pixel",style:{color:"#ff0000",weight:1},reverseCoordinates:!0}),this.geometries.push(e);break;case"MultiPoint":for(i=0;i<t.coordinates.length;i++)e=new T.Circle(t.coordinates[i],3,{radiusMeasure:"pixel",style:{color:"#ff0000",weight:1},reverseCoordinates:!0}),this.geometries.push(e);break;case"LineString":var s=new T.Polyline(t.coordinates,{reverseCoordinates:!0});this.geometries.push(s);break;case"MultiLineString":var n=new T.MultiPolyline(t.coordinates,{reverseCoordinates:!0});this.geometries.push(n);break;case"Polygon":var o=new T.Polygon(t.coordinates,{reverseCoordinates:!0});this.geometries.push(o);break;case"MultiPolygon":var a=new T.MultiPolygon(t.coordinates,{reverseCoordinates:!0});this.geometries.push(a);break;case"GeometryCollection":for(i=0;i<t.geometries.length;i++)this.readPart(t.geometries[i]);break;case"Feature":this.readPart(t.geometry);break;case"FeatureCollection":for(i=0;i<t.features.length;i++)this.readPart(t.features[i])}},addTo:function(t){var i;for(i=0;i<this.geometries.length;i++)t.addGeometry(this.geometries[i])}},t.GeoJsonImporter=i}(T),function(t){var i=function(t){if(!t)throw new Error("Please specify the geocoder result!");t.Location&&t.Location.Latitude&&t.Location.Longitude&&(this.location=new T.LatLng(t.Location.Latitude,t.Location.Longitude)),t.BoundingBox&&t.BoundingBox.NorthEast&&t.BoundingBox.NorthEast.Latitude&&t.BoundingBox.NorthEast.Longitude&&t.BoundingBox.SouthWest&&t.BoundingBox.SouthWest.Latitude&&t.BoundingBox.SouthWest.Longitude&&(this.bounds=new T.LatLngBounds(new T.LatLng(t.BoundingBox.SouthWest.Latitude,t.BoundingBox.SouthWest.Longitude),new T.LatLng(t.BoundingBox.NorthEast.Latitude,t.BoundingBox.NorthEast.Longitude))),t.City&&(this.city=t.City),t.Country&&(this.country=t.Country),t.EntireAddress&&(this.address=t.EntireAddress),t.State&&(this.state=t.State),t.Street&&(this.street=t.Street),t.StreetName&&(this.streetName=t.StreetName),t.StreetNb&&(this.streetNumber=t.StreetNb),t.StreetType&&(this.streetType=t.StreetType),t.Zip&&(this.zip=t.Zip),t.Level&&(this.level=t.Level),t.LevelInfo&&(this.levelInfo=t.LevelInfo),t.Score&&(this.score=t.Score)};i.prototype={location:null,bounds:null,country:null,city:null,address:null,state:null,street:null,
streetName:null,streetNumber:null,streetType:null,zip:null,level:null,levelInfo:null,score:null},t.GeocoderResult=i}(T),function(t){var i=function(t,i,e){if(!t||!i)throw new Error("Please set the geocoder customer and key!");this.customer=t,this.key=i,this.url=e||T.settings.geoWebServices};i.prototype={geocode:function(t){var i=null,e=new T.Promise;if(!this.customer||!this.key)throw new Error("Please set the geocoder customer and key!");if(!t||!t.country)throw new Error("Please set the country!");if(!t.city&&!t.zip)throw new Error("Please set one of the following options, necessary in order to geocode: city or zip!");i=this.url;var s={method:"GET",withCredentials:!1,on:{success:function(t){var i=JSON.parse(t),s=[],n=0;for(n=0;n<i.length;n++)s.push(new T.GeocoderResult(i[n]));e.resolve(s)},error:function(t){e.reject(t)}}};return i+=this.customer,i+="/coder.json",i+="?geocoder=maporama",i+="&maporamakey="+this.key,i+="&country="+t.country,t.city&&(i+="&city="+t.city),t.zip&&(i+="&zip="+t.zip),t.state&&(i+="&state="+t.state),t.street&&(i+="&street="+t.street),(new T.Ajax).send(i,s),e},reverseGeocode:function(t){var i=null,e=new T.Promise;if(!this.customer||!this.key)throw new Error("Please set the geocoder customer and key!");if(!t||!t.lat||!t.lng)throw new Error("Please specify the location!");i=this.url;var s={method:"GET",withCredentials:!1,on:{success:function(t){var i=JSON.parse(t),s=[],n=0;for(n=0;n<i.length;n++)s.push(new T.GeocoderResult(i[n]));e.resolve(s)},error:function(t){e.reject(t)}}};return i+=this.customer,i+="/coder.json",i+="?geocoder=maporama",i+="&maporamakey="+this.key,i+="&latitude="+t.lat,i+="&longitude="+t.lng,(new T.Ajax).send(i,s),e}},t.Geocoder=i}(T),module.exports=T});