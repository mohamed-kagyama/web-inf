/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","./jive","jquery-ui/ui/position","jquery-ui/ui/widgets/draggable","runtime_dependencies/js-sdk/src/common/extension/jQueryTimepickerExtension"],function(e,t,n){var o=e("jquery"),i=e("./jive");e("jquery-ui/ui/position"),e("jquery-ui/ui/widgets/draggable"),e("runtime_dependencies/js-sdk/src/common/extension/jQueryTimepickerExtension");var a=null;i.interactive.column={genericPropertiesInitialized:!1,uuid:null,allColumns:{},allColumnGroups:{},allColumnsMap:{},columnsData:{},count:{},ids:{},fontSizes:null,fonts:{extension:null,system:null},patterns:null,operators:null,filterPatterns:null,calendarPatterns:null,actions:{format:{icon:"formatIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.format"],actions:{formatHeaderAndValues:{label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.formatting"],fn:"formatHeader"},hideColumn:{label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.hidecolumn"],fn:"hide",arg:'{"hide":true}'},showColumns:{label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.showcolumns"],actions:{showAll:{label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.showcolumns.all"],fn:"hide",arg:'{"hide":false,"column":"all"}'}}}}},filter:{icon:"filterIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.label.columnfilters"],fn:"filter"},sortAscending:{icon:"sortAscIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.label.sortasc"],fn:"sort",arg:["Asc"]},sortDescending:{icon:"sortDescIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.label.sortdesc"],fn:"sort",arg:["Desc"]}},visibleColumnsMoveData:{},reportInstance:null,init:function(e){var t=this;t.reportInstance=e,a=e.eventManager,i.init(e),o.each(e.components.table,function(){!t.genericPropertiesInitialized&&this.config.genericProperties&&(t.setGenericProperties(this.config.genericProperties),t.genericPropertiesInitialized=!0),t.genericPropertiesInitialized?t.initColumns(this):alert("Error: generic properties not set for interactive column.")})},initColumns:function(e){var t,n,r=this,l=e.config.id,s=e.config.allColumnsData,c=this.reportInstance.config.container;this.reportViewport=o("div#reportViewFrame"),this.scrollContainer=this.reportViewport.find(".body").first(),r.allColumns[l]=s,r.allColumnGroups[l]=e.config.allColumnGroupsData,r.allColumnsMap[l]={},r.basicFormatForm.elements[1][0][0].groups=[{name:i.i18n["net.sf.jasperreports.components.headertoolbar.label.extfonts"],values:[]}],o.each(r.fonts.extension,function(e,t){r.basicFormatForm.elements[1][0][0].groups[0].values.push([t,t])}),r.basicFormatForm.elements[1][0][0].groups.push({name:i.i18n["net.sf.jasperreports.components.headertoolbar.label.sysfonts"],values:[]}),o.each(r.fonts.system,function(e,t){r.basicFormatForm.elements[1][0][0].groups[1].values.push([t,t])}),r.basicFormatForm.elements[1][0][1].values=[],o.each(r.fontSizes,function(e,t){r.basicFormatForm.elements[1][0][1].values.push([t,t])}),this.count[l]=o.grep(e.columns,function(e){return e}).length,this.prepareVisibleColumnsMoveData(l);var d=r.actions.format.actions.showColumns;for(n in s)t=s[n],t.interactive&&(d.actions[t.uuid]={label:i.decodeHTML(t.label),fn:"hide",arg:'{"hide":false, "columnUuid": "'+t.uuid+'"}'}),r.allColumnsMap[l][t.uuid]=t;i.ui.foobar.reset(),i.ui.forms.add(i.interactive.column.columnFilterForm),i.ui.forms.add(i.interactive.column.columnConditionalFormattingForm),i.ui.forms.add(i.interactive.column.basicFormatForm),a.registerEvent("jive.interactive.column.init").trigger(),o.each(e.columns,function(e,t){t&&i.initInteractiveElement(t,c)})},prepareVisibleColumnsMoveData:function(e){var t,n,i,a=this.reportInstance.config.container,r=a.find("table.jrPage").find("td.jrcolHeader[data-tableuuid="+e+"]:first"),l=[];r.parents("table").each(function(n,i){if(t=o(i),l=t.find("td.jrcolHeader[data-tableuuid="+e+"]"),l.length>0)return!1});for(var s=this.columnsData[e]={},c=this.reportInstance.zoom?this.reportInstance.zoom.level:1,d=0;d<l.length;d++){var u,p,f,m,h,b=o(l.get(d)).data("coluuid");s[b]||(u=t.find("td.jrcolHeader[data-coluuid="+b+"]"),p=u.eq(0),f=u.length>0?u.eq(u.length-1):p,m=p.outerWidth()*c,h=p.position().left,u.each(function(e,t){var n=o(t);n.position().left<h&&(m+=h-n.position().left,h=n.position().left),n.position().left+n.outerWidth()*c>h+m&&(m=n.position().left+n.outerWidth()*c-h)}),s[b]={jo:o(p),width:m,height:f.position().top-p.position().top+f.height(),colidx:f.data("colidx")})}l=[];for(i in s)s.hasOwnProperty(i)&&l.push(s[i]);for(l.sort(function(e,t){return e.jo.data("colidx")-t.jo.data("colidx")}),this.visibleColumnsMoveData[e]=[],d=0;d<l.length;d++){var v=l[d],g=v.jo.offset().left+this.scrollContainer.scrollLeft(),y=v.jo.position().left;n=this.getColumnByUuid(v.jo.data("coluuid"),e),null!=n&&(n.visible=!0),this.visibleColumnsMoveData[e].push({left:g,cLeft:y,right:g+v.width,cRight:y+v.width,width:v.width,index:null!=n?n.index:null,uuid:v.jo.data("coluuid")})}},getJoForCurrentSelection:function(e){var t=null;return e.parents("table").each(function(n,i){if(t=o(i).find('td.jrcolHeader[data-cellid="'+e.data("cellid")+'"]:first'),t.length>0)return!1}),t},getColumnByUuid:function(e,t){var n,o=this.allColumns[t];for(n in o)if(o[n].uuid===e)return o[n];return null},getInteractiveElementFromProxy:function(e){var t=e.attr("class").split(" "),n='td[data-cellid="'+t[1].substring(4)+'"]:first',i=null,a=e.offset().top;return e.parents().each(function(e,t){if((i=o(n,t))&&i.length>0&&i.offset().top<a)return!1;i=null}),i},zoom:function(e){var t=this;o.each(this.reportInstance.components.table,function(){t.prepareVisibleColumnsMoveData(this.config.id)}),i.zoom(e)},getElementSize:function(){var e=this,t=i.selected.jo,n=t.data("cellid"),a=null;return n=(""+n).replace(/\./g,"\\."),t.parents().each(function(i,r){var l=o("td.cel_"+n+":last",r);if(l&&l.length>0){var s=l.offset().top,c=l.outerHeight()*(e.reportInstance.zoom&&e.reportInstance.zoom.level?e.reportInstance.zoom.level:1);return a=s+c-t.offset().top,!1}}),null===a&&(a=i.selected.realHeight),{w:i.selected.realWidth,h:a}},onSelect:function(){var e=this,t=[],n=i.ui.foobar.menus.column.showColumns.jo,a=i.selected.jo.data("tableuuid");e.allColumns[a];1==e.count[a]?(i.ui.foobar.menus.column.format.jo.find("li").eq(1).hide(),i.ui.overlay.jo.draggable("option","disabled",!0)):(i.ui.foobar.menus.column.format.jo.find("li").eq(1).show(),i.ui.overlay.jo.draggable("option","disabled",!1)),n.children().each(function(n,i){if(n>0){var r=o(i).data("args"),l=e.getColumnByUuid(r.columnUuid,a);null!=l&&(r.column=[l.index],o(i).data("args",r)),l&&!0===l.visible?i.style.display="none":l?(t.push(l.index),i.style.display="block"):i.style.display="none"}}),t.length>0?(i.ui.foobar.menus.column.format.jo.find("li").eq(2).show(),n.children().eq(0).data("args",{hide:!1,column:t})):i.ui.foobar.menus.column.format.jo.find("li").eq(2).hide();var r=o("button:eq(2), button:eq(3)",i.ui.foobar.jo),l=o("button:eq(1)",i.ui.foobar.jo);i.selected.ie.config.canSort?r.removeClass("disabled"):r.addClass("disabled"),i.selected.ie.config.canFilter?l.removeClass("disabled"):l.addClass("disabled")},onDragStart:function(e,t){this.uuid=i.selected.jo.data("tableuuid"),this.currentColumnsMoveData=this.visibleColumnsMoveData[this.uuid],this.currentColMoveData=null;for(var n=0;n<this.currentColumnsMoveData.length;n++)if(this.currentColumnsMoveData[n].uuid===i.selected.jo.data("coluuid")){this.currentColMoveData=this.currentColumnsMoveData[n];break}this.colToMoveToIndex=this.currentColMoveData.index,this.prevPageX=e.pageX+this.scrollContainer.scrollLeft()},onDrag:function(e,t){var n,o,a,r,l,s=e.pageX+this.scrollContainer.scrollLeft(),c=this.currentColumnsMoveData.length,d=this.colToMoveToIndex,u=null;for(s>this.currentColMoveData.right?r=!0:s<this.currentColMoveData.left&&(r=!1),n=0;n<c;n++)if(o=this.currentColumnsMoveData[n],s<=o.right){d=parseInt(o.index),a=o.left+o.width/2,s<=a?(i.ui.marker.jo.css("left",o.cLeft+"px").show(),!0===r?u=d>0?d-1:0:!1===r&&(u=d)):(i.ui.marker.jo.css("left",o.cRight+"px").show(),!0===r?u=d:!1===r&&(u=d+1));break}var p=parseInt(this.currentColumnsMoveData[c-1].index);if((null===u&&s>o.right||u>p)&&(i.ui.marker.jo.css("left",o.cRight+"px").show(),u=p),this.colToMoveToIndex=u,l=o,s>this.prevPageX){if(this.reportViewport.width()+this.scrollContainer.scrollLeft()-5<l.right&&!this.isScrollingRight){this.isScrollingRight=!0;var f=this;this.scrollContainer.animate({scrollLeft:"+="+(l.width+10)},{duration:1e3,queue:!1}).promise().then(function(){f.isScrollingRight=!1})}}else if(l.cLeft<=this.scrollContainer.scrollLeft()&&!this.isScrollingLeft){this.isScrollingLeft=!0;var f=this;this.scrollContainer.animate({scrollLeft:"-="+(l.width-10)},{duration:1e3,queue:!1}).promise().then(function(){f.isScrollingLeft=!1})}this.prevPageX=s},onDragStop:function(e,t){null!=this.colToMoveToIndex&&this.colToMoveToIndex!=i.selected.ie.config.columnIndex&&i.selected.ie.move({index:this.colToMoveToIndex})},resize:function(e){var t=e<8?8:Math.floor(e);i.hide(),i.selected.ie.resize({width:t})},sort:function(e){i.hide(),i.selected.ie.sort({order:e[0]})},filter:function(){var e=i.selected.ie.config.columnLabel;!e.length&&(e="#"+(i.selected.ie.config.columnIndex+1)),i.ui.dialog.show(i.i18n["net.sf.jasperreports.components.headertoolbar.title.filtercolumn"]+": "+e,["columnfilter"])},formatHeader:function(){var e=i.selected.ie.config.columnLabel;!e.length&&(e="#"+(i.selected.ie.config.columnIndex+1)),i.ui.dialog.show(i.i18n["net.sf.jasperreports.components.headertoolbar.title.formatcolumn"]+": "+e,["basicFormat","columnConditionalFormatting"])},hide:function(e){if(i.hide(),e.hide)i.selected.ie.hide();else{var t,n;e.columnUuid?(n=i.elements[e.columnUuid]?this.allColumnsMap[i.elements[e.columnUuid].config.parentId]:this.allColumnsMap[i.selected.ie.config.parentId],t=[n[e.columnUuid].index]):t=e.column,i.selected.ie.unhide(t)}},setGenericProperties:function(e){i.interactive.column.fontSizes=e.fontSizes,i.interactive.column.fonts=e.fonts,i.interactive.column.patterns=e.patterns,i.interactive.column.operators=e.operators,i.interactive.column.filterPatterns=e.filterPatterns,i.interactive.column.calendarPatterns=e.calendarPatterns},showCurrencyDropDown:function(){i.selected.form.inputs.currencyBtn1.showOptions()},applyCurrencyFormat:function(e){var t=this,n=i.selected.form.inputs.currencyBtn1,a=o("#formatPattern").data("cSymbol");o("#formatPattern").children().each(function(n,i){var r=o(i);"[h]:mm:ss"!==r.val()&&(a&&a.length>0&&(r.text(t.numberFormat.addRemoveCurrencySymbol(r.text(),!1,a)),r.val(t.numberFormat.addRemoveCurrencySymbol(r.val(),!1,a))),e.val&&e.val.length>0&&(r.text(t.numberFormat.addRemoveCurrencySymbol(r.text(),!0,e.val)),r.val(t.numberFormat.addRemoveCurrencySymbol(r.val(),!0,e.val)),o("#formatPattern").data("cSymbol",e.val)))}),n.hideOptions()},togglePercentageFormat:function(){var e=this;o("#formatPattern").children().each(function(t,n){var a=o(n);"[h]:mm:ss"!==a.val()&&(a.text(e.numberFormat.addRemovePercentageForNumber(a.text(),i.selected.form.inputs.percentageBtn.value)),a.val(e.numberFormat.addRemovePercentage(a.val(),i.selected.form.inputs.percentageBtn.value)))})},toggleCommaFormat:function(){var e=this;o("#formatPattern").children().each(function(t,n){var a=o(n);"[h]:mm:ss"!==a.val()&&(a.text(e.numberFormat.addRemoveThousandsSeparator(a.text(),i.selected.form.inputs.commaBtn.value)),a.val(e.numberFormat.addRemoveThousandsSeparator(a.val(),i.selected.form.inputs.commaBtn.value)))})},addDecimal:function(){var e=this;o("#formatPattern").children().each(function(t,n){var i=o(n);"[h]:mm:ss"!==i.val()&&(i.text(e.numberFormat.addRemoveDecimalPlace(i.text(),!0)),i.val(e.numberFormat.addRemoveDecimalPlace(i.val(),!0)))})},remDecimal:function(){var e=this;o("#formatPattern").children().each(function(t,n){var i=o(n);"[h]:mm:ss"!==i.val()&&(i.text(e.numberFormat.addRemoveDecimalPlace(i.text(),!1)),i.val(e.numberFormat.addRemoveDecimalPlace(i.val(),!1)))})},numberFormat:{symbols:{currency:"\xa4"},regex:{numberPart:/([\d|#]+(?!,))/,decimalPart:/(\.[\d|#]+)/,numericChar:/[\d|#]/},addRemoveDecimalPlace:function(){function e(e){if(-1!=e.indexOf(".")){var t=i.interactive.column.numberFormat.regex.decimalPart.exec(e)[1];return e.replace(t,t+"0")}var n=i.interactive.column.numberFormat.regex.numberPart.exec(e)[1];return e.replace(n,n+".0")}function t(e){var t=e;if(-1!=t.indexOf(".")){var n=i.interactive.column.numberFormat.regex.decimalPart.exec(t)[1];t=n.length>2?t.replace(n,n.substring(0,n.length-1)):t.replace(n,"")}return t}return function(n,o){var i=n.split(";")[0],a=n.split(";")[1];return o?(n=e(i),a&&(n=n+";"+e(a)),n):(n=t(i),a&&(n=n+";"+t(a)),n)}}(),addRemoveThousandsSeparator:function(){function e(e){var t=e.indexOf(i.interactive.column.numberFormat.regex.numericChar.exec(e)),n=e.substring(0,t+1);return n+","+e.substring(n.length)}function t(e){return e.replace(",","")}return function(n,o){var i=n.indexOf(","),a=n.split(";")[0],r=n.split(";")[1];return o?-1==i&&(n=e(a),r&&(n=n+";"+e(r))):-1!=i&&(n=t(a),r&&(n=n+";"+t(r))),n}}(),addRemovePercentage:function(){function e(e){return e+" %"}function t(e){return e.substring(0,e.length-2)}return function(n,o){var i=n.indexOf("%"),a=n.split(";")[0],r=n.split(";")[1];return o?-1==i&&(n=e(a),r&&(n=n+";"+e(r))):-1!=i&&(n=t(a),r&&(n=n+";"+t(r))),n}}(),applyNegativeNumberPattern:function(e){var t=new RegExp(e.split(";")[0],"g"),n=i.interactive.column.numberFormatExpression||"###0",o=n.split(";")[0];return n=e.replace(t,o)},addRemovePercentageForNumber:function(e,t){var n=i.interactive.column.numberFormat.regex.numberPart.exec(e)[1];return t?-1==e.indexOf("%")&&-1==n.indexOf("00")&&(e=e.replace(n,n+"00"),e+=" %"):-1!=e.indexOf("%")&&-1!=n.indexOf("00")&&(e=e.replace(n,n.substring(0,n.length-2)),e=e.substring(0,e.length-2)),e},addRemoveCurrencySymbol:function(e,t,n){var o=n||i.interactive.column.numberFormat.symbols.currency,a=e.indexOf(o),r=e.split(";")[0],l=e.split(";")[1];return t?-1==a&&(e=o+" "+r,l&&(e=e+";"+o+" "+l)):-1!=a&&(e=r.substring(2),l&&(e=e+";"+l.substring(2))),e}}},i.interactive.column.debouncedDrag=i.withDebounce(i.interactive.column.onDrag,i.interactive.column,50,!1),i.interactive.column.columnFilterForm={name:"columnfilter",method:"get",jc:{},elements:[[[{type:"radio",id:"clearFilter",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.clearfilter.true"],value:"true"}]],[[{type:"radio",id:"clearFilter",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.clearfilter.false"],value:"false",colspan:4}],[{type:"list",id:"filterTypeOperator",values:[]},{type:"text",id:"fieldValueStart",value:""},{type:"label",value:"and"},{type:"text",id:"fieldValueEnd",value:""}]]],onCreate:function(e){var t=this;t.jc.filterStart=o("#fieldValueStart"),t.jc.filterEnd=o("#fieldValueEnd").prop("disabled",!0),t.jc.filterType=o("#filterTypeOperator").change(function(){var e=o(this).val();e.indexOf("BETWEEN")>=0?(t.jc.filterEnd.parent().parent().prev().show(),t.jc.filterEnd.parent().parent().show(),t.jc.filterEnd.prop("disabled",!1)):(t.jc.filterEnd.parent().parent().prev().hide(),t.jc.filterEnd.parent().parent().hide(),t.jc.filterEnd.prop("disabled",!0)),e.indexOf("NULL")>=0?(t.jc.filterStart.parent().parent().hide(),t.jc.filterStart.prop("disabled",!0)):(t.jc.filterStart.parent().parent().show(),t.jc.filterStart.prop("disabled",!1))}),o('input[name="clearFilter"]').change(function(){var e=i.selected.ie.config.filtering.filterData.filterType.toLowerCase();for(var n in t.jc)t.jc.hasOwnProperty(n)&&"true"==o(this).val()?t.jc[n].prop("disabled",!0):t.jc[n].prop("disabled",!1);t.jc.filterEnd.prop("disabled",!(t.jc.filterType.val().indexOf("BETWEEN")>=0&&"false"==o(this).val())),"boolean"==e&&"false"==o(this).val()&&(t.jc.filterStart.prop("disabled",!0),t.jc.filterStart.closest("td").hide())})},onShow:function(){var e=i.ui.dialog.jo;e.find(".applytoWrapper").hide(),e.find("#colprev").hide(),e.find("#colnext").hide();var t,n=this,a=i.selected.ie.config.filtering.filterData,r=a.filterType.toLowerCase(),l=i.interactive.column.operators[r],s=i.interactive.column.calendarPatterns.date,c=i.interactive.column.calendarPatterns.time;n.jc.filterType.empty(),o.each(l,function(e,t){n.jc.filterType.append(o("<option></option>",{value:t.key,text:t.val}))}),a.filterTypeOperator&&n.jc.filterType.val(a.filterTypeOperator),n.jc.filterStart.val(a.fieldValueStart);var d=null==a.filterTypeOperator;o('input[name="clearFilter"][value="'+d+'"]').prop("checked",!0);for(t in n.jc)n.jc.hasOwnProperty(t)&&d?n.jc[t].prop("disabled",!0):n.jc[t].prop("disabled",!1);if(!d&&a.filterTypeOperator&&a.filterTypeOperator.indexOf("BETWEEN")>=0?(n.jc.filterEnd.parent().parent().prev().show(),n.jc.filterEnd.parent().parent().show(),n.jc.filterEnd.val(a.fieldValueEnd).prop("disabled",!1)):(n.jc.filterEnd.parent().parent().prev().hide(),n.jc.filterEnd.parent().parent().hide(),n.jc.filterEnd.val(a.fieldValueEnd).prop("disabled",!0)),"boolean"===r?(n.jc.filterStart.prop("disabled",!0),n.jc.filterStart.closest("td").hide()):n.jc.filterStart.closest("td").show(),"date"===r){var u={changeMonth:!0,changeYear:!0,dateFormat:s,timeFormat:c,showSecond:!0};n.jc.filterStart.timepicker("destroy"),n.jc.filterEnd.timepicker("destroy"),n.jc.filterStart.datetimepicker(u),n.jc.filterEnd.datetimepicker(u)}else if("time"===r){var p={timeFormat:c,showSecond:!0,constrainInput:!1};n.jc.filterStart.datetimepicker("destroy"),n.jc.filterEnd.datetimepicker("destroy"),n.jc.filterStart.timepicker(p),n.jc.filterEnd.timepicker(p)}else n.jc.filterStart.datetimepicker("destroy"),n.jc.filterStart.timepicker("destroy"),n.jc.filterEnd.datetimepicker("destroy"),n.jc.filterEnd.timepicker("destroy");"boolean"!==r&&(a.filterTypeOperator&&a.filterTypeOperator.indexOf("NULL")>=0?(n.jc.filterStart.prop("disabled",!0),n.jc.filterStart.closest("td").hide()):n.jc.filterStart.closest("td").show())},submit:function(){var e={tableUuid:i.selected.ie.config.parentId,filterPattern:i.selected.ie.config.filtering.filterData.filterPattern,fieldValueStart:i.selected.form.jo.find('input[name="fieldValueStart"]').val(),filterTypeOperator:i.selected.form.jo.find('select[name="filterTypeOperator"]').val(),clearFilter:i.selected.form.jo.find('input[name="clearFilter"]:checked').val()};i.selected.form.jo.find('input[name="filterValueEnd"]').is(":hidden")||(e.fieldValueEnd=i.selected.form.jo.find('input[name="fieldValueEnd"]').val()),i.hide(),i.selected.ie.filter(e)}},i.interactive.column.basicFormatForm={actionDataCache:{},title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.basicformat"],name:"basicFormat",method:"get",prevApplyTo:null,elements:[[[{type:"text",id:"headingName",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.headingtext"],value:"",colspan:4}]],[[{type:"list",id:"fontName",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.fontname"],values:[],freeText:!0,size:6,rowspan:2},{type:"list",id:"fontSize",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.fontsize"],values:[],freeText:!0,size:6,rowspan:2},{type:"buttons",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.style"],items:[{type:"checkbox",id:"fontBold",value:"bold",bIcon:"boldIcon"},{type:"checkbox",id:"fontItalic",value:"italic",bIcon:"italicIcon"},{type:"checkbox",id:"fontUnderline",value:"underline",bIcon:"underlineIcon"}]},{type:"buttons",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.color"],items:[{type:"backcolor",id:"fontBackColor",bIcon:"backgroundColorIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.fontbackcolor"],drop:!0,showTransparent:!0,styleClass:"wide"},{type:"color",id:"fontColor",bIcon:"fontColorIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.fontcolor"],drop:!0}]}],[{type:"buttons",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.alignment"],items:[{type:"radio",id:"fontAlign",value:"Left",bIcon:"leftIcon"},{type:"radio",id:"fontAlign",value:"Center",bIcon:"centerIcon"},{type:"radio",id:"fontAlign",value:"Right",bIcon:"rightIcon"}]}]],[[{type:"list",id:"formatPattern",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.formatpattern"],freeText:!0,values:[],colspan:2,size:4,rowspan:2},{type:"buttons",id:"numberFormatButtons",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.numberformat"],items:[{type:"checkbox",id:"percentageBtn",fn:"togglePercentageFormat",value:"",bIcon:"percentageIcon"},{type:"checkbox",id:"commaBtn",fn:"toggleCommaFormat",value:"",bIcon:"commaIcon"},{type:"action",id:"increaseDecimalsBtn",fn:"addDecimal",value:"",bIcon:"increaseDecimalsIcon"},{type:"action",id:"decreaseDecimalsBtn",fn:"remDecimal",value:"",bIcon:"decreaseDecimalsIcon"}]}],[{type:"buttons",label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.currency"],items:[{type:"dropdown",drop:!0,id:"currencyBtn1",fn:"showCurrencyDropDown",bIcon:"currencyIcon",options:{none:{label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.currency.none"],value:"",fn:"applyCurrencyFormat"},locale_specific:{label:i.i18n["net.sf.jasperreports.components.headertoolbar.label.localespecific"],value:"\xa4",fn:"applyCurrencyFormat"},dollar:{label:"$ - USD",value:"$",fn:"applyCurrencyFormat"},euro:{label:"\u20ac - EUR",value:"\u20ac",fn:"applyCurrencyFormat"},pound:{label:"\xa3 - GBP",value:"\xa3",fn:"applyCurrencyFormat"},yen:{label:"\xa5 - YEN",value:"\xa5",fn:"applyCurrencyFormat"}}}]}]]],onCreate:function(e){var t=this,n=o("#applyTo");n.on("change",function(e){i.selected.form.onBlur(i.selected.form.prevApplyTo),i.selected.form.applyToChanged(this.value),i.selected.form.prevApplyTo=this.value}),o("#colnext, #colprev").on(i.clickEventName,function(e){if(this.className.indexOf("disabled")<0){var n=i.selected.ie.config.columnIndex;i.selected.form.onBlur(),"colnext"==this.id?i.selected.ie=i.elements[t.getNextVisibleColUuid(n)]:i.selected.ie=i.elements[t.getPrevVisibleColUuid(n)],i.selected.form.columnChanged()}}),o("#formatPatternText").on("change",function(e){var a,r,l=n.val();r="detailrows"===l?i.selected.ie.config.dataType:t.getGroupMetadata(l).dataType,"Numeric"===r?(a=i.selected.form.jo.find("table:eq(2)"),"[h]:mm:ss"===this.value?(o(this).attr("disabled",!0),a.find("tr:eq(0)").children("td:last").css("visibility","hidden"),a.find("tr:eq(1)").children("td:last").css("visibility","hidden")):(o(this).attr("disabled",!1),a.find("tr:eq(0)").children("td:last").css("visibility","visible"),a.find("tr:eq(1)").children("td:last").css("visibility","visible"))):o(this).attr("disabled",!1)})},updateApplyToSelector:function(e,t){var n,a,r,l=[],s=o("#applyTo"),c=i.interactive.column.allColumnGroups[i.selected.jo.data("tableuuid")],d=i.selected.ie.config.columnIndex,u=[],p=[],f=[];!e&&i.selected.ie.config.headingsTabContent&&l.push({value:"heading",text:i.i18n["net.sf.jasperreports.components.headertoolbar.applyto.option.headings"]}),o("option",s).remove(),o.each(c,function(e,n){-1!=o.inArray(d,n.forColumns)&&(a=n.groupName?n.groupName:n.id,"groupheading"===n.groupType?(r={value:n.id,text:a+" "+i.i18n["net.sf.jasperreports.components.headertoolbar.groupheading.prefix"]},t?n.conditionalFormattingData&&u.push(r):u.push(r)):"groupsubtotal"===n.groupType?(r={value:n.id,text:a+" "+i.i18n["net.sf.jasperreports.components.headertoolbar.groupsubtotal.prefix"]},t?n.conditionalFormattingData&&p.push(r):p.push(r)):"tabletotal"===n.groupType&&(r={value:n.id,text:i.i18n["net.sf.jasperreports.components.headertoolbar.applyto.option.tabletotal"]},t?n.conditionalFormattingData&&f.push(r):f.push(r)))});var m=[];(!t||t&&i.selected.ie.config.conditionalFormattingData)&&m.push({value:"detailrows",text:i.i18n["net.sf.jasperreports.components.headertoolbar.applyto.option.detailrows"]}),n=l.concat(u,m,p,f),o.each(n,function(e,t){s.append(o("<option></option>",t))}),n.length?s.attr("disabled",!1):s.attr("disabled",!0)},onShow:function(){var e,t,n=i.ui.dialog.jo;n.find(".applytoWrapper").show(),n.find("#colprev").show(),n.find("#colnext").show(),i.selected.form.jo.parent().css({"overflow-y":"hidden"}),this.updateColNavButtons(),this.updateApplyToSelector(),e=o.map(o("#applyTo option"),function(e){return e.value}),t=o.grep(e,function(e){return"detailrows"===e}).length>0,this.prevApplyTo="heading"===e[0]?"heading":t?"detailrows":e[0],o("#applyTo").val(this.prevApplyTo),this.applyToChanged(this.prevApplyTo)},columnChanged:function(){var e,t,n,a,r=o("#applyTo :selected").text(),l=i.selected.ie.config.columnLabel;!l.length&&(l="#"+(i.selected.ie.config.columnIndex+1)),i.ui.dialog.title.html(i.i18n["net.sf.jasperreports.components.headertoolbar.title.formatcolumn"]+": "+l),this.updateColNavButtons(),this.updateApplyToSelector(),e=o("#applyTo").find("option:contains("+r+")"),e.length>0?(e.attr("selected",!0),this.applyToChanged(e.val())):(t=o.map(o("#applyTo option"),function(e){return e.value}),n=o.grep(t,function(e){return"detailrows"===e}).length>0,a="heading"===t[0]?"heading":n?"detailrows":t[0],o("#applyTo").val(a),this.applyToChanged(a))},applyToChanged:function(e){var t=this,n=i.selected.form.jo.find("table");switch(e.substring(0,-1!=e.indexOf("_")?e.indexOf("_"):e.length)){case"heading":n.eq(2).hide(),n.eq(0).show();break;case"groupheading":n.eq(2).hide(),n.eq(0).hide();break;case"detailrows":n.eq(2).show(),n.eq(0).hide();break;case"tabletotal":case"groupsubtotal":n.eq(2).show(),n.eq(0).hide()}t.onGenericShow(e)},updateColNavButtons:function(){var e=i.selected.ie.config.columnIndex,t=o("#colnext"),n=o("#colprev");this.getNextVisibleColUuid(e)?t.removeClass("disabled"):t.addClass("disabled"),this.getPrevVisibleColUuid(e)?n.removeClass("disabled"):n.addClass("disabled")},getNextVisibleColUuid:function(e){var t,n=i.interactive.column.allColumns[i.selected.ie.config.parentId];for(t=e+1;n[t];t++)if(n[t].visible)return n[t].uuid;return!1},getPrevVisibleColUuid:function(e){var t,n=i.interactive.column.allColumns[i.selected.ie.config.parentId];for(t=e-1;t>=0;t--)if(n[t].visible)return n[t].uuid;return!1},getCacheKey:function(e){var t=e||o("#applyTo").val();return"heading"===t||"detailrows"===t?this.name+"_"+i.selected.ie.config.columnIndex+"_"+t:this.name+"_"+t},onGenericShow:function(e){var t,n,a,r,l=i.selected.form.inputs,s=!1,c=[];this.actionDataCache[this.getCacheKey()]?(t=this.actionDataCache[this.getCacheKey()].editTextElementData,s=!0):t="heading"===e?i.selected.ie.config.headingsTabContent:"detailrows"===e?i.selected.ie.config.valuesTabContent:this.getGroupMetadata(e),l.fontBold.set(t.fontBold),l.fontItalic.set(t.fontItalic),l.fontUnderline.set(t.fontUnderline),l.fontAlign.set(t.fontHAlign),s?("heading"===e&&l.headingName.set(t.headingName),l.fontName.set(t.fontName)):("heading"===e&&l.headingName.set(i.decodeHTML(t.headingName)),l.fontName.set(i.decodeHTML(t.fontName))),l.fontSize.set(t.fontSize),l.fontColor.set(t.fontColor),l.fontBackColor.set(t.fontBackColor,t.mode),"heading"!==e&&(n=i.selected.form.jo.find("table:eq(2)"),"detailrows"===e?a=i.selected.ie.config.dataType.toLowerCase():t.dataType&&(a=t.dataType.toLowerCase()),!a||"numeric"!=a&&"date"!=a&&"time"!=a?n.find("tr").hide():(o.each(i.interactive.column.patterns[a],function(e,t){t&&c.push('<option value="'+t.key+'">'+t.val+"</option>")}),o("#formatPattern").html(c.join("")),r=s?t.formatPattern:i.decodeHTML(t.formatPattern),l.formatPattern.set(r),n.find("tr").show(),"numeric"==a?"[h]:mm:ss"===r?(n.find("tr:eq(0)").children("td:last").css("visibility","hidden"),n.find("tr:eq(1)").children("td:last").css("visibility","hidden")):(n.find("tr:eq(0)").children("td:last").css("visibility","visible"),n.find("tr:eq(1)").children("td:last").css("visibility","visible"),l.percentageBtn.set(!1),l.commaBtn.set(!1)):(n.find("tr:eq(0)").children("td:last").css("visibility","hidden"),n.find("tr:eq(1)").children("td:last").css("visibility","hidden"))))},getGroupMetadata:function(e){var t={};return o.each(i.interactive.column.allColumnGroups[i.selected.ie.config.parentId],function(n,i){if(i.id===e)return o.extend(t,i.groupData),i.groupName&&(t.groupName=i.groupName),i.dataType&&(t.dataType=i.dataType),!1}),t},submit:function(){var e,t=[];this.actionDataCache[this.getCacheKey()]=this.getActionData();for(e in this.actionDataCache)this.actionDataCache.hasOwnProperty(e)&&t.push(this.actionDataCache[e]);i.hide(),i.selected.ie.format(t)},onBlur:function(e){this.actionDataCache[this.getCacheKey(e)]=this.getActionData(e)},onHide:function(){this.actionDataCache={}},getActionData:function(e){var t,n=i.selected.form.inputs,a=e||o("#applyTo").val(),r=a.substring(0,-1!=a.indexOf("_")?a.indexOf("_"):a.length),l=this.getGroupMetadata(a);switch(t={actionName:"editTextElement",editTextElementData:{applyTo:r,tableUuid:i.selected.ie.config.parentId,columnIndex:i.selected.ie.config.columnIndex,fontName:i.escapeFontName(n.fontName.get()),fontSize:n.fontSize.get(),fontBold:n.fontBold.get(),fontItalic:n.fontItalic.get(),fontUnderline:n.fontUnderline.get(),fontHAlign:n.fontAlign.get(),fontColor:n.fontColor.get(),fontBackColor:n.fontBackColor.getBackColor(),mode:n.fontBackColor.getModeValue(),dataType:l&&l.dataType}},r){case"heading":t.editTextElementData.headingName=n.headingName.get();break;case"tabletotal":case"detailrows":t.editTextElementData.formatPattern=n.formatPattern.get();break;case"groupheading":t.editTextElementData.groupName=l.groupName||null;break;case"groupsubtotal":t.editTextElementData.formatPattern=n.formatPattern.get(),t.editTextElementData.groupName=l.groupName||null}return t}},i.interactive.column.columnConditionalFormattingForm={actionDataCache:{},name:"columnConditionalFormatting",title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.conditions"],method:"get",options:null,conditionType:null,prevApplyTo:null,templateElements:[{type:"label",value:""},{type:"list",id:"conditionTypeOperator",values:[]},{type:"text",id:"conditionStart",value:"",wrapClass:"t_wrap"},{type:"label",value:"and",wrapClass:"t_wrap",tdClass:"condition_between_start"},{type:"text",id:"conditionEnd",value:"",wrapClass:"t_wrap"},{type:"buttons",items:[{type:"checkbox",id:"conditionFontBold",value:"bold",bIcon:"boldIcon",isTripleState:!0},{type:"checkbox",id:"conditionFontItalic",value:"italic",bIcon:"italicIcon",isTripleState:!0},{type:"checkbox",id:"conditionFontUnderline",value:"underline",bIcon:"underlineIcon",isTripleState:!0},{type:"backcolor",id:"conditionFontBackColor",bIcon:"backgroundColorIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.fontbackcolor"],drop:!0,showTransparent:!0,showReset:!0,styleClass:"wide"},{type:"color",id:"conditionFontColor",bIcon:"fontColorIcon",title:i.i18n["net.sf.jasperreports.components.headertoolbar.title.fontcolor"],drop:!0,showReset:!0}]},{type:"buttons",items:[{type:"action",id:"conditionMoveUp",fn:"conditionMoveUp",bIcon:"moveUpIcon",btnClass:"plain"},{type:"action",id:"conditionMoveDown",fn:"conditionMoveDown",bIcon:"moveDownIcon",btnClass:"plain"}]},{type:"button",id:"conditionRemove",bIcon:"deleteIcon",fn:"removeFormatCondition",btnClass:"plain",tdClass:"last"}],elements:[[[{type:"label",value:i.i18n["net.sf.jasperreports.components.headertoolbar.conditions.list"],align:"left",wrapClass:"wrapper label"}]],[[{type:"label",value:"#",isHeader:!0,tdWidth:"3%",align:"center"},{type:"label",value:i.i18n["net.sf.jasperreports.components.headertoolbar.condition.operator"],isHeader:!0,tdWidth:"26%",align:"center"},{type:"label",value:i.i18n["net.sf.jasperreports.components.headertoolbar.condition.condition"],colspan:3,isHeader:!0,tdWidth:"30%",align:"center"},{type:"label",value:i.i18n["net.sf.jasperreports.components.headertoolbar.condition.format"],isHeader:!0,tdWidth:"26%",align:"center"},{type:"label",isHeader:!0,tdWidth:"10%",align:"center"},{type:"label",isHeader:!0,tdClass:"last",tdWidth:"5%",align:"center"}],[{type:"label"},{type:"button",id:"conditionAdd",
bLabel:i.i18n["net.sf.jasperreports.components.headertoolbar.condition.add"],fn:"addFormatCondition",btnClass:"plain",nowrap:!0},{type:"label",nowrap:!0,colspan:3},{type:"label",nowrap:!0},{type:"label",nowrap:!0},{type:"label",nowrap:!0,tdClass:"last"}]]],onCreate:function(e){var t=e;t.on("change","select[name=conditionTypeOperator]",function(e){var t=o(this),n=t.closest("tr"),i=n.find("input[name^=conditionEnd]"),a=n.find("input[name^=conditionStart]");t.val().indexOf("BETWEEN")>=0?(i.closest("td").addClass("condition_between_end").show().prev().show(),i.prop("disabled",!1),a.closest("td").attr("colspan",1).addClass("condition_between_start")):(i.closest("td").removeClass("condition_between_end").hide().prev().hide(),i.prop("disabled",!0),a.closest("td").attr("colspan",3).removeClass("condition_between_start")),t.val().indexOf("NULL")>=0?a.prop("disabled",!0):a.prop("disabled",!1)}),t.on("rowchange","table",function(e){o(this).find("tr.jive_condition").each(function(e,t){o(this).find(".jive_textLabel:first div:first").text(e+1)})}),t.find("table:eq(1)").addClass("conditionList").find("tr:last").addClass("add")},columnChanged:function(){var e,t,n,a,r=o("#applyTo :selected").text(),l=i.selected.ie.config.columnLabel;!l.length&&(l="#"+(i.selected.ie.config.columnIndex+1)),i.ui.dialog.title.html(i.i18n["net.sf.jasperreports.components.headertoolbar.title.formatcolumn"]+": "+l),i.interactive.column.basicFormatForm.updateColNavButtons(),i.interactive.column.basicFormatForm.updateApplyToSelector(!0,!0),e=o("#applyTo").find("option:contains("+r+")"),e.length>0?(e.attr("selected",!0),this.applyToChanged(e.val())):(t=o.map(o("#applyTo option"),function(e){return e.value}),n=o.grep(t,function(e){return"detailrows"===e}).length>0,a=n?"detailrows":t[0],o("#applyTo").val(a||""),this.applyToChanged(a||""))},applyToChanged:function(e){this.onGenericShow(e)},onShow:function(){i.selected.form.jo.parent().css({"overflow-y":"hidden"}),i.interactive.column.basicFormatForm.updateColNavButtons(),i.interactive.column.basicFormatForm.updateApplyToSelector(!0,!0),this.prevApplyTo="detailrows",o("#applyTo").val("detailrows"),this.onGenericShow("detailrows")},getGroupMetadata:function(e){var t={};return o.each(i.interactive.column.allColumnGroups[i.selected.ie.config.parentId],function(n,i){if(i.id===e)return o.extend(t,i.conditionalFormattingData),i.groupName&&(t.groupName=i.groupName),!1}),t},onGenericShow:function(e){var t,n=this,a=i.selected.form.jo.find("table:eq(1)"),r=!1,l=i.selected.form.jo.find("div.jive_inputbutton[bname=conditionAdd]");i.selected.form.jo.parent().css({"overflow-y":"auto"}),this.actionDataCache[this.getCacheKey()]?(t=this.actionDataCache[this.getCacheKey()].conditionalFormattingData,r=!0):-1!=e.indexOf("group")||-1!=e.indexOf("tabletotal")?t=this.getGroupMetadata(e):"detailrows"==e&&(t=i.selected.ie.config.conditionalFormattingData),t?(n.conditionType=t.conditionType.toLowerCase(),n.options=i.interactive.column.operators[n.conditionType],l.removeClass("disabled"),"boolean"===n.conditionType?a.find("th:eq(2), tr.add td:eq(2)").hide():a.find("th:eq(2), tr.add td:eq(2)").show(),o.each(t.conditions,function(e,t){n.addFormatCondition(i.selected.form.jo,t,r)})):(i.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){n.removeRow(o(this))}),l.addClass("disabled"))},onBlur:function(e){var t,n=this,a=e||o("#applyTo").val();"heading"!==a&&(t=this.getCacheKey(a))&&(this.actionDataCache[t]=this.getActionData(a)),i.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){n.removeRow(o(this))})},onHide:function(){var e=this;this.actionDataCache={},i.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){e.removeRow(o(this))})},submit:function(){var e,t=[];this.actionDataCache[this.name]=this.getActionData();for(e in this.actionDataCache)this.actionDataCache.hasOwnProperty(e)&&t.push(this.actionDataCache[e]);i.hide(),i.selected.ie.format(t)},addFormatCondition:function(e,t,n){if(!e.is(".disabled")){var a,r=this,l=r.conditionType,s=i.interactive.column.calendarPatterns.date,c=i.interactive.column.calendarPatterns.time,d=e.closest("form"),u=d.find("table:eq(1)"),p=[],f=i.selected.form.inputs,m=[];if(p.push('<tr class="jive_condition">'),o.each(this.templateElements,function(e,t){i.ui.forms.createTemplateElement(t,r,d,p)}),p.push("</tr>"),a=o(p.join("")),a.insertBefore(u.find("tr:last")),o.each(r.options,function(e,t){t&&m.push('<option value="'+t.key+'">'+t.val+"</option>")}),a.find("select[name=conditionTypeOperator]").append(m.join("")).trigger("change"),"date"===l){var h={changeMonth:!0,changeYear:!0,dateFormat:s,timeFormat:c,showSecond:!0};a.find("input[name=conditionStart]").datetimepicker(h),a.find("input[name=conditionEnd]").datetimepicker(h)}else if("time"===l){var b={timeFormat:c,showSecond:!0,constrainInput:!1};a.find("input[name=conditionStart]").timepicker(b),a.find("input[name=conditionEnd]").timepicker(b)}else"boolean"===l&&(a.find("input[name=conditionStart]").prop("disabled",!0),a.find("input[name=conditionStart]").closest("td").hide());t?(a.find("select[name=conditionTypeOperator]").val(t.conditionTypeOperator).trigger("change"),f[a.find("input[name=conditionEnd]").attr("id")].set(t.conditionEnd),"text"===l&&n?f[a.find("input[name=conditionStart]").attr("id")].set(t.conditionStart):f[a.find("input[name=conditionStart]").attr("id")].set(i.decodeHTML(t.conditionStart)),f[a.find(".jive_inputbutton[bname^=conditionFontBold]").attr("bname")].set(t.conditionFontBold),f[a.find(".jive_inputbutton[bname^=conditionFontItalic]").attr("bname")].set(t.conditionFontItalic),f[a.find(".jive_inputbutton[bname^=conditionFontUnderline]").attr("bname")].set(t.conditionFontUnderline),f[a.find(".jive_inputbutton[bname^=conditionFontColor]").attr("bname")].set(t.conditionFontColor),f[a.find(".jive_inputbutton[bname^=conditionFontBackColor]").attr("bname")].set(t.conditionFontBackColor,t.conditionMode)):(f[a.find(".jive_inputbutton[bname^=conditionFontBold]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontItalic]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontUnderline]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontColor]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontBackColor]").attr("bname")].set(null,null)),u.trigger("rowchange")}},removeFormatCondition:function(e){var t=e.closest("tr"),n=t.closest("table");this.removeRow(t),n.trigger("rowchange")},removeRow:function(e){var t=i.selected.form.inputs;e.find("[name^=condition]").each(function(){delete t[o(this).attr("id")]}),e.find(".jive_inputbutton[bname^=conditionFont]").each(function(){delete t[o(this).attr("bname")]}),e.remove()},conditionMoveUp:function(e){var t=e.closest("tr"),n=t.prev(),o=t.closest("table");o.find("tr").index(t)>1&&(t.insertBefore(n),o.trigger("rowchange"))},conditionMoveDown:function(e){var t=e.closest("tr"),n=t.next(),o=t.closest("table"),i=o.find("tr");n.length>0&&i.index(t)<i.length-2&&(t.insertAfter(n),o.trigger("rowchange"))},getCacheKey:function(e){var t=e||o("#applyTo").val();return"heading"===t?null:"detailrows"===t&&i.selected.ie.config.conditionalFormattingData?this.name+"_"+i.selected.ie.config.columnIndex+"_"+t:this.getGroupMetadata(t)&&this.getGroupMetadata(t).conditionalFormattingData?this.name+"_"+t:null},getActionData:function(e){var t,n,a=e||o("#applyTo").val(),r=a.substring(0,-1!=a.indexOf("_")?a.indexOf("_"):a.length),l=i.selected.form.inputs;return-1!=a.indexOf("group")?(t=this.getGroupMetadata(a),n={actionName:"conditionalFormatting",conditionalFormattingData:{applyTo:r,tableUuid:i.selected.ie.config.parentId,columnIndex:i.selected.ie.config.columnIndex,conditionPattern:t.conditionPattern,conditionType:t.conditionType,conditions:[],groupName:t.groupName}}):"detailrows"!=a&&"tabletotal"!==r||(t="tabletotal"===r?this.getGroupMetadata(a):i.selected.ie.config.conditionalFormattingData,n={actionName:"conditionalFormatting",conditionalFormattingData:{applyTo:r,tableUuid:i.selected.ie.config.parentId,columnIndex:i.selected.ie.config.columnIndex,conditionPattern:t.conditionPattern,conditionType:t.conditionType,conditions:[]}}),i.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(e,t){var i=o(this);n.conditionalFormattingData.conditions.push({conditionStart:l[i.find("input[name=conditionStart]").attr("id")].get(),conditionEnd:l[i.find("input[name=conditionEnd]").attr("id")].get(),conditionTypeOperator:l[i.find("select[name=conditionTypeOperator]").attr("id")].get(),conditionFontBold:l[i.find(".jive_inputbutton[bname^=conditionFontBold]").attr("bname")].get(),conditionFontItalic:l[i.find(".jive_inputbutton[bname^=conditionFontItalic]").attr("bname")].get(),conditionFontUnderline:l[i.find(".jive_inputbutton[bname^=conditionFontUnderline]").attr("bname")].get(),conditionFontColor:l[i.find(".jive_inputbutton[bname^=conditionFontColor]").attr("bname")].get(),conditionFontBackColor:l[i.find(".jive_inputbutton[bname^=conditionFontBackColor]").attr("bname")].getBackColor(),conditionMode:l[i.find(".jive_inputbutton[bname^=conditionFontBackColor]").attr("bname")].getModeValue()})}),n}},n.exports=i.interactive.column});