/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","./BaseComponentModel","underscore"],function(t,e,r){var i=t("./BaseComponentModel"),n=t("underscore"),a={AD_HOC_DESIGNER:"adhoc designer",JSS_IREPORT_STUDIO:"JSS/iReport studio"};r.exports=i.extend({defaults:function(){return{charttype:void 0,datetimeSupported:!1,hcinstancedata:void 0,id:void 0,interactive:!0,module:"jive.highcharts",type:"chart"}},api:{changeType:{}},actions:{"change:charttype":function(){return{actionName:"changeChartType",changeChartTypeData:{chartComponentUuid:this.get("chartUuid"),chartType:this.get("charttype")}}}},initialize:function(){if(this.has("hcinstancedata")){var t=this.get("hcinstancedata"),e=this._detectCreator(t);a.AD_HOC_DESIGNER===e&&(delete t.width,delete t.height)}this.unset("uimodule"),this.config=JSON.parse(JSON.stringify(this.toJSON()))},changeType:function(t){this.trigger("action",{actionName:"changeChartType",changeChartTypeData:{chartComponentUuid:this.config.chartUuid,chartType:t.type},options:{showErrorDialog:!0}})},_detectCreator:function(t){var e,r=t.services,i=n.some(r,function(t){return-1!=t.service.indexOf("adhoc")});return i&&(e=a.AD_HOC_DESIGNER),e&&this.set("creator",e),e},toReportComponentObject:function(){if(this.get("interactive"))return{id:this.get("id"),componentType:"chart",chartType:this.get("charttype"),name:this.get("name")}},updateFromReportComponentObject:function(t){this.set({charttype:t.chartType})},handleServerError:function(t){this.trigger("serverError",t)},handleClientError:function(t){this.trigger("serverError",t)}})});