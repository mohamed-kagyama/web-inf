/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","./DashletModel","../../enum/dashboardComponentTypes","../../enum/dashboardWiringStandardIds","bundle!DashboardBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage","../../dashboardSettings","underscore"],function(e,r,n){function t(e){var r=this.get("parameters"),n={},t=this;r&&r.length&&h.each([i.REFRESH_SLOT,i.APPLY_SLOT].concat(h.pluck(r,"id")),function(e){n[e]=function(e){return function(r,n){(t.lastPayload||(t.lastPayload={}))[e]=r,(t.lastSender||(t.lastSender={}))[e]=n,t.trigger("signal",{name:e,value:r},n)}}(e)}),e.register(this,{signals:[],slots:n})}var a=e("./DashletModel"),s=e("../../enum/dashboardComponentTypes"),i=e("../../enum/dashboardWiringStandardIds"),o=e("bundle!DashboardBundle"),d=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),l=e("../../dashboardSettings"),h=e("underscore"),u=d.extend({bundle:o});n.exports=a.extend({componentName:o["dashboard.component.web.page.component.name"],defaults:h.extend({},a.prototype.defaults,{type:s.WEB_PAGE_VIEW,timeout:void 0,url:l.DASHLET_WEBPAGE_VIEW_DEFAULT_URL,autoRefresh:l.DASHLET_AUTO_REFRESH,refreshInterval:l.DASHLET_REFRESH_INTERVAL_TIME_UNIT_DEFAULT_MINUTES,refreshIntervalUnit:l.DASHBOARD_REFRESH_INTERVAL_UNIT,scroll:l.DASHLET_SCROLL,showTitleBar:l.DASHLET_SHOW_TITLE_BAR,showRefreshButton:l.DASHLET_SHOW_REFRESH_BUTTON,showMaximizeButton:l.DASHLET_SHOW_MAXIMIZE_BUTTON}),validation:h.extend({},a.prototype.validation,{url:[{required:!0,msg:new u("dashboard.component.error.url.required")}],refreshInterval:[{required:!0,msg:new u("dashboard.error.web.page.view.refreshInterval.required")},{integerNumber:!0,msg:new u("dashboard.error.web.page.view.refreshInterval.integer")},{fn:function(e,r,n){var t=n.refreshIntervalUnit,a={second:l.DASHLET_REFRESH_INTERVAL_TIME_UNIT_SECONDS,minute:l.DASHLET_REFRESH_INTERVAL_TIME_UNIT_MINUTES};if(e<a[t])return"Value must be bigger than "+a[t]},msg:new u("dashboard.error.web.page.view.refreshInterval.min",l.DASHLET_REFRESH_INTERVAL_TIME_UNIT_MINUTES,l.DASHLET_REFRESH_INTERVAL_TIME_UNIT_SECONDS)}],refreshIntervalUnit:[{required:!0,msg:new u("dashboard.error.web.page.view.refreshIntervalUnit.required")},{oneOf:["second","minute"],msg:new u("dashboard.error.web.page.view.refreshIntervalUnit.oneOf",o["dashboard.dialog.properties.refresh.interval.second"],o["dashboard.dialog.properties.refresh.interval.minute"])}]}),initialize:function(){a.prototype.initialize.apply(this,arguments),this.on("change:autoRefresh",function(){this.get("autoRefresh")||this.isValid(["refreshInterval","refreshIntervalUnit"])||this.set({refreshInterval:this.defaults.refreshInterval,refreshIntervalUnit:this.defaults.refreshIntervalUnit})},this)},acceptWiringVisitor:function(e){this.on("parameters:set",h.bind(t,this,e)),t.call(this,e)}})});