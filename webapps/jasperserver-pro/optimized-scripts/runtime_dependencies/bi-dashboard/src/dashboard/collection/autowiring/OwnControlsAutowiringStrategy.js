/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","./BaseAutowiringStrategy","../../enum/dashboardComponentTypes","../../enum/dashboardWiringStandardIds"],function(e,r,n){function o(e,r,n,o){var t=r.reduce(function(e,r){return r.component.get("ownerResourceId")===n.resource.id&&e.push(r),e},[]),c=n.get("parameters")||[];u.each(t,function(e){var o=u.find(c,function(r){return e.component.resource.id===r.uri||e.component.getOwnerUri()===r.uri&&e.component.getOwnerParameterName()===r.id||e.component.resource.id===r.uri+"_files/"+r.id});e.consumers.add({consumer:n.id+":"+o.id}),r.get(e.component.get("parentId")+":"+d.REFRESH_SIGNAL).consumers.add({consumer:n.id+":"+d.APPLY_SLOT})})}function t(e,r,n,o){var t=r.find(function(e){return e.component.resource&&e.component.resource.id===n.resource.id}),c=n.collection.find(function(e){return e.resource&&e.resource.id===n.get("ownerResourceId")});c&&u.each(c.get("parameters"),function(e){n.getOwnerParameterName()===e.id&&(t.consumers.add({consumer:c.id+":"+e.id}),t.component.get("parentId")&&r.get(t.component.get("parentId")+":"+d.REFRESH_SIGNAL).consumers.add({consumer:c.id+":"+d.APPLY_SLOT}))})}var u=e("underscore"),c=e("./BaseAutowiringStrategy"),s=e("../../enum/dashboardComponentTypes"),d=e("../../enum/dashboardWiringStandardIds");n.exports=c.extend({autowire:function(e,r,n){r.resource&&r.resource.resource&&(r.resource.resource.type===s.REPORT||r.resource.resource.type===s.ADHOC_VIEW)&&o(this,e,r,n),r.resource&&r.resource.resource&&r.resource.resource.type===s.INPUT_CONTROL&&t(this,e,r,n)}})});