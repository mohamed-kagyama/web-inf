/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../hyperlink/handler/dashboardHyperlinkHandlerAdhocExecution","../../../enum/dashboardWiringStandardIds","../ImageView"],function(e,n,t){function o(e){e.name===a.REFRESH_SLOT?this._renderComponent():e.name===a.APPLY_SLOT&&this._renderComponent()}var i=e("underscore"),r=e("../../../hyperlink/handler/dashboardHyperlinkHandlerAdhocExecution"),a=e("../../../enum/dashboardWiringStandardIds"),s=e("../ImageView");t.exports={notify:function(e){this.model.notify(e),this.model.collection.getDashboardPropertiesComponent().applyParameters()},_initComponent:function(){var e=this;if(this.component=new s({model:this.model,el:this.$content}),this.$content.click(function(n){r.events.click(n,i.reduce(e.model.get("outputParameters"),function(e,n){return e.parameters[n.id]=n.defaultValue,e},{parameters:{}}),e)}),this.listenTo(this.model,"signal",o),this.model.lastPayload)for(var n in this.model.lastPayload)o.call(this,{name:n,value:this.model.lastPayload[n]},this.model.lastSender[n])},_onComponentPropertiesChange:function(e){i.isEmpty(i.omit(e,"selected"))||this._renderComponent()},_renderComponent:function(){var e=this.model.getParametrizationResult("url",this.paramsModel.attributes,{tolerateMissing:!0});this.component.render(e),this.trigger("componentRendered",this)},_onRefreshClick:function(){this._renderComponent()}}});