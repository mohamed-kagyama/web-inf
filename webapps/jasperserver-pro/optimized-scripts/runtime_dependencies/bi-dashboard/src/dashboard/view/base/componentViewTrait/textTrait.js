/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../hyperlink/handler/dashboardHyperlinkHandlerAdhocExecution","../../../enum/dashboardWiringStandardIds","../FreeTextView"],function(e,t,n){function o(e){e.name===s.REFRESH_SLOT?this._renderComponent():e.name===s.APPLY_SLOT&&this._renderComponent()}var i=e("underscore"),r=e("../../../hyperlink/handler/dashboardHyperlinkHandlerAdhocExecution"),s=e("../../../enum/dashboardWiringStandardIds"),a=e("../FreeTextView");n.exports={notify:function(e){this.model.notify(e),this.model.collection.getDashboardPropertiesComponent().applyParameters()},_initComponent:function(){var e=this;if(this.component=new a({model:this.model,el:this.$content}),this.$content.click(function(t){r.events.click(t,i.reduce(e.model.get("outputParameters"),function(e,t){return e.parameters[t.id]=t.defaultValue,e},{parameters:{}}),e)}),this.listenTo(this.model,"signal",o),this.model.lastPayload)for(var t in this.model.lastPayload)o.call(this,{name:t,value:this.model.lastPayload[t]},this.model.lastSender[t]);this.on("componentAttached",this.component.applyFontSize,this.component),this.listenTo(this.model.collection.getDashboardPropertiesComponent(),"change:dashletPadding",function(e,t){this.component.applyFontSize(t)},this)},_onComponentPropertiesChange:function(){this._renderComponent()},_renderComponent:function(){var e=this.model.getParametrizationResult("text",this.paramsModel.attributes,{tolerateMissing:!0});this.component.render(e),this.trigger("componentRendered",this)},_removeComponent:function(){this.component.remove(),this.off("componentAttached"),this.stopListening(this.model.collection.getDashboardPropertiesComponent())}}});