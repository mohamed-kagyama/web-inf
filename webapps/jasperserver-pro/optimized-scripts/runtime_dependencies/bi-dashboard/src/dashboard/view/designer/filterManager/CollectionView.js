/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","backbone","underscore"],function(e,i,t){var n=e("backbone"),s=e("underscore");t.exports=n.View.extend({el:function(){return this._template(this._templateOptions)},constructor:function(e){e||(e={}),this.collection=e.collection||new n.Collection,this._template=s.template(e.template||"<div></div>"),this._templateOptions=e.templateOptions||{},this._modelView=e.modelView||n.View,this._modelViewOptions=e.modelViewOptions||{},this._subviews=[],n.View.apply(this,arguments),this._$subviewsContainer=e.contentContainer?this.$(e.contentContainer):this.$el,this.initCollectionEventHandlers()},initCollectionEventHandlers:function(){this.listenTo(this.collection,"add",this.addSubview),this.listenTo(this.collection,"remove",this.removeSubview)},addSubview:function(e){var i=new this._modelView(s.extend({},this._modelViewOptions,{model:e}));return this._$subviewsContainer.append(i.render().$el),this._subviews.push(i),i},removeSubview:function(e){var i=this.getSubviewByModel(e);if(i){var t=s.indexOf(this._subviews,i);this._subviews.splice(t,1),i.remove()}},getSubviewByModel:function(e){return s.find(this._subviews,function(i){return i.model===e})},render:function(){return s.invoke(this._subviews,"remove"),this._subviews=[],this._$subviewsContainer.empty(),this.collection.forEach(s.bind(this.addSubview,this)),this},remove:function(){s.invoke(this._subviews,"remove"),this._subviews=[],n.View.prototype.remove.apply(this,arguments)}})});