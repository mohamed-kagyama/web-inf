/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","./handler/dashboardHyperlinkHandlerLocalAnchor","./handler/dashboardHyperlinkHandlerLocalPage","./handler/dashboardHyperlinkHandlerRemotePage","./handler/dashboardHyperlinkHandlerRemoteAnchor","./handler/dashboardHyperlinkHandlerReference","./handler/dashboardHyperlinkHandlerReportExecution","./handler/dashboardHyperlinkHandlerAdhocExecution","underscore","jquery","runtime_dependencies/js-sdk/src/common/logging/logger","../dashboardSettings","runtime_dependencies/bi-report/src/bi/report/jive/enum/hyperlinkTypes"],function(e,r,n){function a(e,r,n){k[e]=n,r[e].resolve()}function d(e,r){var n=r.requireModules&&r.requireModules[0];n&&E.error("Failed to load module: '"+n+"' for handling hyperlinks of type: '"+e+"'!")}var o=e("./handler/dashboardHyperlinkHandlerLocalAnchor"),i=e("./handler/dashboardHyperlinkHandlerLocalPage"),l=e("./handler/dashboardHyperlinkHandlerRemotePage"),t=e("./handler/dashboardHyperlinkHandlerRemoteAnchor"),s=e("./handler/dashboardHyperlinkHandlerReference"),p=e("./handler/dashboardHyperlinkHandlerReportExecution"),h=e("./handler/dashboardHyperlinkHandlerAdhocExecution"),c=e("underscore"),u=e("jquery"),y=e("runtime_dependencies/js-sdk/src/common/logging/logger"),H=e("../dashboardSettings"),f=e("runtime_dependencies/bi-report/src/bi/report/jive/enum/hyperlinkTypes"),E=y.register("defaultLinkOptions"),k={};k[f.LOCAL_ANCHOR]=o,k[f.LOCAL_PAGE]=i,k[f.REMOTE_PAGE]=l,k[f.REMOTE_ANCHOR]=t,k[f.REFERENCE]=s,k[f.REPORT_EXECUTION]=p,k[f.ADHOC_EXECUTION]=h,n.exports={events:function(){for(var e={},r=H.DEFAULT_HYPERLINK_EVENTS,n=0;n<r.length;n++)e[r[n]]=function(e,r,n){var a="jr_hyperlink_interception"===e.eventType?"click":e.type.toLowerCase(),d=r.type,o=k[d];if(o&&o.events&&"function"==typeof o.events[a])return o.events[a].apply(this,arguments)};return e}(),beforeRender:function(e,r){var n={},a=this;c.each(e,function(e){n[e.data.type]||(n[e.data.type]=[]),n[e.data.type].push(e)}),c.each(c.keys(n),function(e){k[e]&&k[e].beforeRender&&k[e].beforeRender.apply(a,arguments)})},discoverHyperlinkHandlers:function(r){var n=new u.Deferred,o={},i=c.chain(r).map(function(e){return e.data.type}).unique().value();return c.each(i,function(r){k[r]||(o[r]=new u.Deferred,e(["vizShim!"+H.HYPERLINK_MODULE_PREFIX+r],c.partial(a,r,o),c.partial(d,r)))}),u.when.apply(u,c.values(o)).always(function(){n.resolve()}),n}}});