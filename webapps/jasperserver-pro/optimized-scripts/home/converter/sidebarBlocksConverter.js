/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","momentExtension","runtime_dependencies/js-sdk/src/common/util/parse/date","../types/expandableBlockEnum","../util/cookie","../types/expandableBlockCookieStateEnum","settings!globalConfiguration","bundle!HomeBundle"],function(e,t,n){function i(e){return d.get(e)!==c.COLLAPSED}function r(e){var t=e._links,n="#";return t.run?n=t.run.href:t.edit?n=t.edit.href:t.open&&(n=t.open.href),n}var o=e("underscore"),l=e("momentExtension"),s=e("runtime_dependencies/js-sdk/src/common/util/parse/date"),a=e("../types/expandableBlockEnum"),u=e("../util/cookie"),d=u.cookie,c=e("../types/expandableBlockCookieStateEnum"),p=e("settings!globalConfiguration"),m=e("bundle!HomeBundle"),E=s.toMomentDateOrTimeOrTimestampPattern(p.timestampFormat," ",!0),k=function(e,t){var n=o.groupBy(t,"group");return[{id:a.RECENT_ITEMS,title:m["recently.viewed.items"],isExpanded:i(a.RECENT_ITEMS),items:e.map(function(e){return{label:e.label,path:e.uri,resourceType:e.resourceType,description:e.description,date:l(e.lastAccessTime).calendar(void 0,{sameElse:E}),actionAvailable:Object.keys(e._links).length>0,url:r(e)}})},{id:a.VIDEO_TUTORIALS,title:m["tutorial.view"],isExpanded:i(a.VIDEO_TUTORIALS),items:n.tutorial.map(function(e){return{linkClass:"tutorial",title:e.title,url:e.url}})},{id:a.POPULAR_RESOURCES,title:m["popular.resources"],isExpanded:i(a.POPULAR_RESOURCES),items:n.popular.map(function(e){return{linkClass:e.id,title:e.title,url:e.url,description:e.description}})}]};t.sidebarBlocksConverter=k});