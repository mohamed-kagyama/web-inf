/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore"],function(e,a,n){var r=e("underscore"),t=function(e){r.bindAll(this,"canUsePresentationItemName"),this._initialize(e)};r.extend(t.prototype,{_initialize:function(e){this.granularSpecs=e.domainSchemaGranularSpecs},canRemoveTableReference:function(e){return this.granularSpecs.canNotRemoveTheVeryLastTableReferenceForSpecificTable(e)},canRenameTableReference:function(e,a){return this.granularSpecs.tableReferenceNameShouldBeUniqueAcrossAllTableReferences(e,a)},canRenameDerivedTable:function(e,a,n){var r=!0;n&&(r=this.granularSpecs.derivedTableNameShouldBeUniqueAmongTables(e,a,n));var t=this.granularSpecs.derivedTableNameShouldBeUniqueAmongAllTableReferences(e,a);return r&&t},canUpdateDataSourceGroup:function(e,a){return this.granularSpecs.dataSourceGroupNameShouldBeUniqueOnSameLevel({id:e,name:a})},canCreateDataSourceGroup:function(e,a){return this.granularSpecs.dataSourceGroupNameShouldBeUniqueOnSameLevel({name:e,parentId:a})},canUseJoinTreeName:function(e,a){return this.granularSpecs.joinTreeNameShouldBeUniqueThroughAllJoinTreeNames(e,a)},canCreateJoinExpression:function(e){return this.granularSpecs.joinExpressionShouldUseDifferentLeftAndRightTableReferences(e)&&this.granularSpecs.joinExpressionShouldUseUniqueCombinationOfLeftTableAndFieldAndRightTableAndField(e)},canUseNewPresentationItemNames:function(e,a){var n=this.granularSpecs.newPresentationItemNamesShouldBeUniqueBetweenThemselves(e),t=r.every(e,function(e){return this.granularSpecs.presentationItemNameShouldBeUniqueThroughAllPresentationItemNames({name:e,existingPresentationItemsByNameMap:a})},this);return n&&t},canUsePresentationItemName:function(e){return this.granularSpecs.presentationItemNameShouldBeUniqueThroughAllPresentationItemNames(e)},canUseDataIslandName:function(e,a){return this.granularSpecs.dataIslandNameShouldBeUniqueThroughAllDataIslandNames(e,a)},canCreateCalcField:function(e){var a=e.calcFieldName;return this._canUseCalcFieldName(a,e)},canUpdateCalcField:function(e){var a=e.calcFieldId,n=e.calcFieldType,r=e.calcFieldName;return this._canUseCalcFieldName(r,e)&&!this.granularSpecs.calcFieldDataTypeCanNotBeChangedIfThereAreDependentFilters(a,n)},shouldRenameJoinAliasOnTableReferenceRename:function(e,a){return this.granularSpecs.joinAliasNameShouldBeRenamedIfItIsTheSameAsTableReferenceName(e,a)},_canUseCalcFieldName:function(e,a){return this.granularSpecs.calcFieldNameCanNotBeEmpty(e)&&this.granularSpecs.resourceNameShouldNotContainForbiddenCharacters(e)&&this.granularSpecs.calcFieldNameShouldBeUniqueThroughOtherFieldNamesOnSameLevel(e,a)}}),n.exports=t});