/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","./Index"],function(e,n,i){var t=e("underscore"),d=e("./Index"),o=function(e){e=e||{},this.indexConfig=e,this.indexes={}};t.extend(o.prototype,{hasIndex:function(e){return!t.isUndefined(this._getIndexConfig(e))},getItem:function(e,n){return this._getItemFromIndex(this.indexes[e],n)},addItems:function(e){e=t.isArray(e)?e:[e];var n,i,d=this.indexConfig.length;for(n=0;n<d;n++)i=this.indexConfig[n],this._addItemsToIndex(i,e)},removeItems:function(e){e=t.isArray(e)?e:[e];var n,i=e.length;for(n=0;n<i;n++)this._removeItem(e[n])},clearIndex:function(e){this.indexes[e].clear()},dropIndex:function(e){var n=this._getIndexConfig(e),i=t.indexOf(this.indexConfig,n);delete this.indexes[e],this.indexConfig.splice(i,1)},addIndex:function(e,n){n=n&&(t.isArray(n)?n:[n]),this.indexConfig.push(e),n&&this._addItemsToIndex(e,n)},_removeItem:function(e){var n,i,t,d,o=this.indexConfig.length;for(n=0;n<o;n++)i=this.indexConfig[n].name,(t=this.indexes[i])&&(d=e[i],void 0!==t.getValue(d)&&this._removeItemFromIndex(t,d))},_addItemsToIndex:function(e,n){var i,t,o=n.length;for(this.indexes[e.name]||(this.indexes[e.name]=new d({name:e.name,type:e.type||"number"})),i=this.indexes[e.name],t=0;t<o;t++)this._addItemToIndex(i,n[t])},_getIndexConfig:function(e){return t.find(this.indexConfig,function(n){return n.name===e})},_getItemFromIndex:function(e,n){return e&&e.getValue(n)},_addItemToIndex:function(e,n){e.addToIndex(n)},_removeItemFromIndex:function(e,n){e.removeFromIndex(n)}}),i.exports=o});