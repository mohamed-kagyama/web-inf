/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","underscore","runtime_dependencies/js-sdk/src/components/dateAndTime/DateAndTimePicker"],function(e,i,t){var r=e("jquery"),n=e("underscore"),c=e("runtime_dependencies/js-sdk/src/components/dateAndTime/DateAndTimePicker"),a=function(e){this.initialize(e)};n.extend(a.prototype,{initialize:function(e){var i=e.el,t=e.bindingValue,a=e.constr;n.bindAll(this,"_createAndShowDateTimePicker","_onDateTimePickerClose"),this.DateAndTimePickerConstructor=a||c;var s=t.$?t.$(i):r(i);if(this.datePickerInput=s,this.datePickerTrigger=null,t.el&&(this.datePickerInput=s.find(t.el),!this.datePickerInput.length))throw new Error("Element for date picker is not found.");if(t.trigger&&(this.datePickerTrigger=s.find(t.trigger),!this.datePickerTrigger.length))throw new Error("Trigger for date picker is not found.");this.dateAndTimePickerOptions=n.extend({},t,{el:this.datePickerInput,onClose:n.partial(this._onDateTimePickerClose,t.onClose)}),this.datePickerTrigger||this._createDateAndTimePicker(),this._initEvents()},remove:function(){this._setInputDisableState(!1),this.datePickerTrigger&&this.datePickerTrigger.off("click",this._createAndShowDateTimePicker),this.dateTimePicker&&this.dateTimePicker.remove()},_initEvents:function(){this.datePickerTrigger&&this.datePickerTrigger.on("click",this._createAndShowDateTimePicker)},_createDateAndTimePicker:function(){this.dateTimePicker=new this.DateAndTimePickerConstructor(this.dateAndTimePickerOptions)},_createAndShowDateTimePicker:function(){this._createDateAndTimePicker(),this.dateTimePicker.show(),this._setInputDisableState(!0)},_onDateTimePickerClose:function(e){var i=Array.prototype.slice.call(arguments,1);this._setInputDisableState(!1),e&&e.apply(null,i)},_setInputDisableState:function(e){this.datePickerInput.prop("disabled",e)}}),t.exports={create:function(e){return{bind:function(i,t){i._dateTimePickerController=new a({el:i,bindingValue:t.value,constr:e.DateAndTimePicker})},unbind:function(e){e._dateTimePickerController.remove(),delete e._dateTimePickerController}}}}});