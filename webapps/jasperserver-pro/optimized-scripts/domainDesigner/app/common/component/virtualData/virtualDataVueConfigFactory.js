/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","text!./template/virtualDataTemplate.htm","jquery"],function(t,e,o){var i=t("underscore"),n=t("text!./template/virtualDataTemplate.htm"),r=t("jquery");o.exports={create:function(t){var e={},o=t.$||r,s=t.$window||o(window),c=i.isNumber(t.debounce)?t.debounce:0;return{template:n,props:["top","height","scrollPos"],computed:{topPx:function(){return Math.round(this.top)+"px"},heightPx:function(){return Math.round(this.height)+"px"}},data:function(){return{currentScrollPos:0}},methods:{onScroll:function(t){c>0?this._debouncedScroll.call(this,t):this._scroll(t)},_scroll:function(e){var o=e.target.scrollTop;this.currentScrollPos=o,t.eventBus.trigger("canvas:scroll",o)},_debouncedScroll:i.debounce(function(t){this._scroll(t)},c),onResize:function(){var e=o(this.$el),i=e.height(),n=e.width();i&&i!==this.getHeight()&&(this.setHeight(i),t.eventBus.trigger("window:resize",i,n))},setHeight:function(t){t&&(e.height=t)},getHeight:function(){return e.height||t.defaultHeight}},created:function(){s.on("resize",this.onResize)},mounted:function(){this.onResize()},updated:function(){e.height||this.onResize();var t=!i.isUndefined(this.scrollPos),o=this.scrollPos!==this.currentScrollPos;t&&o&&(this.$el.scrollTop=this.scrollPos)},destroyed:function(){s.off("resize",this.onResize)}}}}});