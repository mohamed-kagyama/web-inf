/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","./enum/resourceTypeToIconNameEnum","../util/resourceLookupUtil","../../enum/placementsEnum","bundle!DomainDesignerBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage"],function(e,n,r){function o(e){var n;return n="file"===e.resourceType&&e.fileType?e.fileType:e.resourceType,p[n]}function t(e){return l.omit(l.cloneDeep(e),"_links")}function i(e){if(d.isFolder(e))return[]}function u(e,n){var r,o=!1;return l.isEmpty(e)||(r=n.resourceType,o=e.some(function(e){return r===e})),o}function s(e){return{placement:m.BOTTOM_LEFT,content:{items:[{label:f("domain.designer.resource.tooltip.path"),text:e.uri},{label:f("domain.designer.resource.tooltip.description"),text:e.description}]}}}function c(e){e=e||{},l.bindAll(this,"convert"),this.resourceTypesToSelect=e.resourceTypesToSelect||[]}var l=e("underscore"),p=e("./enum/resourceTypeToIconNameEnum"),d=e("../util/resourceLookupUtil"),m=e("../../enum/placementsEnum"),a=e("bundle!DomainDesignerBundle"),T=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),f=T.create(a);l.extend(c.prototype,{convert:function(e){var n={id:e.uri,label:e.label,icon:o(e),invalid:!1,properties:t(e),visible:!1};return d.isFolder(e)?l.extend(n,{children:i(e),open:!1}):l.extend(n,{tooltip:s(e)}),u(this.resourceTypesToSelect,e)&&l.extend(n,{isSelectable:!0}),n}}),r.exports=c});