/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","underscore","../../util/selectionRulesUtil","../../util/extractElementFromEventUtil","../../util/collectElementDataAttributesUtil","../../util/extractFnFromConfigurationUtil"],function(t,e,l){function n(t){var e=s.result(t,"allowed")||!0,l=s.result(t,"event")||"click",n=r(this.$el);e&&n.on(l,t.selector,s.bind(o,this,t))}function i(t,e){return f({config:t,name:"onSelection",context:this,options:e})}function o(t,e){var l,n=s.result(t,"multiple")||!1,o=(s.result(t,"onToggleSelection"),s.result(t,"onRangeSelection"),s.result(t,"onSelection"),c.byCurrentTarget(e)),r=a.getElementDataAttributes(t.attrs,o),m="onSelection";n&&(u.isCtrlKeyHeld(e)?m="onToggleSelection":u.isShiftKeyHeld(e)&&(m="onRangeSelection")),l=f({config:t,name:m,context:this,options:r})||i.call(this,t,r),u.isLeftMouseButton(e)&&t.testFn(r)&&l&&l(e)}var r=t("jquery"),s=t("underscore"),u=t("../../util/selectionRulesUtil"),c=t("../../util/extractElementFromEventUtil"),a=t("../../util/collectElementDataAttributesUtil"),f=t("../../util/extractFnFromConfigurationUtil");l.exports={_initializeSelectable:function(){var t=s.result(this,"selection"),e=s.result(t,"selector");if(!e)throw new Error("Selector must be specified.");var l=s.result(t,"attrs")||[],i=f({config:t,name:"shouldBeSelectable",context:this})||function(){return!0},o=s.extend(t,{selector:e,testFn:i,attrs:l});n.call(this,o)}}});