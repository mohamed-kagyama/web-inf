/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../enum/subResourceTypesEnum","../enum/fileExtensionEnum"],function(e,n,r){function u(e){return e=e||{},h.keys(e)[0]}function t(e){return e[u(e)]}function l(e,n){return t(e)[n]}function o(e){return u(e)}function i(e){return l(e,"uri")}function s(e){var n=e.split("/");return n[n.length-1]}function a(e,n){var r=n.length>0?n.length+1:0,u=e.lastIndexOf("."),t=e.substr(0,u);return t.substr(0,t.length-r)}function c(e,n){return a(s(e),n)}function f(e,n){var r=e;return n&&(r=r+"_"+n),r+L.PROPERTIES}function m(e,n){var r=L.PROPERTIES,u=g(e),t=g(n),l=e.length-u.length-r.length,o=e.substr(0,l),i=n.length-t.length-r.length;return o===n.substr(0,i)}function g(e){var n=R.exec(e);if(n){return"_"+n[1]+(n[2]?"_"+n[2]:"")+(n[3]?"_"+n[3]:"")}return""}function d(e){var n=g(e);return n?n.substr(1):""}function E(e){return e.substr(e.length-L.XML.length)===L.XML||(e+=L.XML),e}function b(e){return e.type===p.FILE_REFERENCE?s(e.uri):f(e.label,e.locale)}function F(e,n){return 0===e.indexOf(n+_)}var h=e("underscore"),p=e("../enum/subResourceTypesEnum"),L=e("../enum/fileExtensionEnum"),R=new RegExp(".*(?:(?:[_])([a-z][a-z]))(?:[_]){0,1}([A-Z][A-Z]){0,1}(?:(?:[_])([^_]*)){0,1}.properties"),_="_files";r.exports={isSameBundleBaseBase:m,isResourceDomainSubResource:F,getBundleLocaleNameFromFileName:d,getBundleLocaleSuffixFromFileName:g,createBundleLabelFromLabelAndLocale:f,parseFileNameFromUrl:s,parseBundleLabelFromFileName:a,parseBundleLabelFromUrl:c,getFirstKeyValue:t,getFirstDataSourceName:o,getEmbeddedResourceUri:i,createSecurityFileLabelForDownload:E,getBundleName:b}});