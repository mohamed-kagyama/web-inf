/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","momentExtension","numeral/numeral","../../../model/schema/enum/genericTypesEnum","runtime_dependencies/js-sdk/src/jrs.configs","bundle!adhoc_masks","bundle!adhoc_masks_client","bundle!DomainDesignerBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage"],function(e,n,s){function t(e){return l.reduce(e,function(e,n){return e.concat([n.type])},[])}function r(e){var n=e.typeToMask,s=e.masks,t=e.typesForExtending;return l.each(t,function(e){n[e].available=n[e].available.concat(s[e])}),n}function a(e){var n,s,t,r=e.typeOptions,a=e.genericMasks,o=e.clientMasks,c={};return l.each(r,function(r){n=i({typeOption:r,masks:a}),s=i({typeOption:r,masks:o}),t=u({genericMasksForType:n,clientMasksForType:s,maskGroup:e.maskGroup}),c[r.type]=t}),c}function i(e){var n=e.masks,s={};for(var t in n)n.hasOwnProperty(t)&&o(t)===e.typeOption.bundlePropertyTitle&&(s[t]=n[t]);return s}function o(e){var n=e.lastIndexOf(f),s=e.lastIndexOf(f,n-1);return e.slice(s+1,n)}function u(e){var n,s,t=e.genericMasksForType,r=e.clientMasksForType,a=e.maskGroup,i=[];for(var o in t)t.hasOwnProperty(o)&&(n=o.lastIndexOf(f),s=o.slice(n+1),i[s]={label:t[o],value:t[o]},r[o]&&(a===b.DATE?i[s].label=c.tz(m.userTimezone).format(r[o]):a===b.NUMBER&&(i[s].label=p(k.ADH_101_EXAMPLE_NUMBER).format(r[o]))));return i}var l=e("underscore"),c=e("momentExtension"),p=e("numeral/numeral"),d=e("../../../model/schema/enum/genericTypesEnum"),m=e("runtime_dependencies/js-sdk/src/jrs.configs"),k=e("bundle!adhoc_masks"),y=e("bundle!adhoc_masks_client"),E=e("bundle!DomainDesignerBundle"),T=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),M=T.create(E),f="_",b={DATE:"DATE",NUMBER:"NUMBER"},g={value:"",label:M("domain.designer.presentationDesigner.presentationField.none")},D=l.pick(d,"INTEGER","DECIMAL","TIME","TIMESTAMP","DATE"),_=l.reduce(D,function(e,n){return e[n]={defaults:g,available:[g]},e},{}),v=[{type:d.INTEGER,bundlePropertyTitle:"int"},{type:d.DECIMAL,bundlePropertyTitle:"dec"}],A=[{type:d.DATE,bundlePropertyTitle:"date"},{type:d.TIME,bundlePropertyTitle:"time"},{type:d.TIMESTAMP,bundlePropertyTitle:"timestamp"}],I=a({typeOptions:A,genericMasks:k,clientMasks:y,maskGroup:b.DATE}),O=a({typeOptions:v,genericMasks:k,clientMasks:y,maskGroup:b.NUMBER});_=r({typeToMask:_,typesForExtending:t(A),masks:I}),_=r({typeToMask:_,typesForExtending:t(v),masks:O}),s.exports=_});