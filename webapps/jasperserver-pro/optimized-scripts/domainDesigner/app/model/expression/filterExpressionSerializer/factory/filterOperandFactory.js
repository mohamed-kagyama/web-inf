/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../../../model/util/profileAttributeUtil","../../../enum/clientExpressionsEnum","../../../../../model/schema/enum/filterOperandTypesEnum","../../../enum/genericTypeToExpressionLiteralTypeEnum","../../../enum/genericTypeToCastFunctionEnum","../../../../../model/schema/enum/fieldTypesToGenericTypesEnum"],function(e,n,t){function i(e,n){var t={},i={},r=a(n);t[E.function.name]={},t[E.function.name][E.functionName.name]=E.attribute.name;var u=c.extractProfileAttributeArgs(e);return t[E.function.name][y.operands.name]=s.map(u,function(e){var n={};return n[y.string.name]={},n[y.string.name][y.value.name]=e,n}),r?(i[E.function.name]={},i[E.function.name][E.functionName.name]=r,i[E.function.name][y.operands.name]=[t],i):t}function r(e){var n=v[e];return T[n]}function a(e){var n=v[e];return d[n]}function u(e){var n={};return n[y.variable.name]={},n[y.variable.name][y.name.name]=e.name,n}function m(e){var n={},t=r(e.fieldType);return s.isString(e.value)&&c.containsProfileAttribute(e.value)?n=i(e.value,e.fieldType):s.isNull(e.value)?n[y.NULL.name]={}:(n[t]={},n[t][y.value.name]=e.value),n}function o(e){if(!e.isAll){var n=r(e.fieldType),t={};return t[y.list.name]={},t[y.list.name][y.items.name]=s.map(e.items,function(e){var t={};return s.isNull(e)?t[y.NULL.name]={}:(t[n]={},t[n][y.value.name]=e),t}),t}}function l(e){var n=r(e.fieldType),t={},a=e.start.value,u=e.end.value,m=y.range.name,o=y.boundary.name,l=y.start.name,f=y.end.name,p=y.value.name;return t[m]={},t[m][l]={},t[m][f]={},t[m][l][o]={},t[m][f][o]={},s.isString(a)&&c.containsProfileAttribute(a)?t[m][l][o]=i(a,e.fieldType):(t[m][l][o][n]={},t[m][l][o][n][p]=a),s.isString(u)&&c.containsProfileAttribute(u)?t[m][f][o]=i(u,e.fieldType):(t[m][f][o][n]={},t[m][f][o][n][p]=u),t}var s=e("underscore"),c=e("../../../../../model/util/profileAttributeUtil"),f=e("../../../enum/clientExpressionsEnum"),p=e("../../../../../model/schema/enum/filterOperandTypesEnum"),T=e("../../../enum/genericTypeToExpressionLiteralTypeEnum"),d=e("../../../enum/genericTypeToCastFunctionEnum"),v=e("../../../../../model/schema/enum/fieldTypesToGenericTypesEnum"),y=f.operators,E=f.functions,A={};A[p.LITERAL]=m,A[p.VARIABLE]=u,A[p.LIST]=o,A[p.RANGE]=l,t.exports={create:function(e){var n=A[e.type];if(n)return n(e)}}});