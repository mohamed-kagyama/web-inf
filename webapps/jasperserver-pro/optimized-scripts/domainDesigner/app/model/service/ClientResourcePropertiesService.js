/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../util/resourcePropertiesUtil"],function(e,r,t){var i=e("underscore"),s=e("../util/resourcePropertiesUtil"),n=function(e){this.initialize(e)};i.extend(n.prototype,{initialize:function(e){this.resourcePropertiesService=e.resourcePropertiesService,this.serverResourcePropertiesModelSerializer=e.serverResourcePropertiesModelSerializer,this.resourceProperties=e.resourceProperties},isDomainSaved:function(){return Boolean(this.resourceProperties.get("uri"))},serialize:function(e){return this.serverResourcePropertiesModelSerializer.serialize(this.resourceProperties,e)},serializeToClientModel:function(){return this.resourceProperties.toJSON()},getBundles:function(){return this.resourceProperties.get("bundles").map(i.cloneDeep)},getDataSourceUri:function(e){return this.resourceProperties.get("dataSources")[e]},getDomainLabel:function(){return this.resourceProperties.get("label")},getDataSourceName:function(){var e=this.resourceProperties.get("dataSources");return s.getFirstDataSourceName(e)},replaceBundles:function(e){var r=this,t=this.getBundles(),s=i.reduce(t,function(t,s){var n=i.find(e,function(e){return r._isBundlesTheSame(e,s)});return n?t.push(n):t.push(s),t},[]),n=i.reduce(e,function(e,t){return i.find(s,function(e){return r._isBundlesTheSame(t,e)})||e.push(t),e},[]);return s.concat(n)},isAnyDuplicateBundles:function(e){var r=this,t=this.getBundles();return i.some(e,function(e){return i.some(t,function(t){return r._isBundlesTheSame(e,t)})})},_isBundlesTheSame:function(e,r){return s.getBundleName(e)===s.getBundleName(r)}}),t.exports=n});