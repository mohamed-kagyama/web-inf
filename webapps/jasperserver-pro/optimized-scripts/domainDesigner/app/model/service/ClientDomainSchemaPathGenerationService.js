/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../model/schema/util/entityUtil","../../../model/schema/util/schemaModelUtil","../../../model/schema/enum/schemaEntitiesEnum","../../component/dependenciesInspector/convertor/util/dispatcherActionUtil"],function(t,e,n){function i(t){r.bindAll(this,"getEntityParentPath","getEntityPath"),this.dataStore=t.dataStore}var r=t("underscore"),o=t("../../../model/schema/util/entityUtil"),a=t("../../../model/schema/util/schemaModelUtil"),s=t("../../../model/schema/enum/schemaEntitiesEnum");t("../../component/dependenciesInspector/convertor/util/dispatcherActionUtil");r.extend(i.prototype,{getEntityParentPath:function(t){var e=this._getParents(t);return this._buildPath(e)},getEntityPath:function(t){var e=[],n=this._getEntityFromDataStore(t),i=this._getParents(n);return e=e.concat([n]).concat(i),this._buildPath(e)},_getEntityFromDataStore:function(t){var e=this.dataStore.getCollections(),n=this._getType(t);return n===s.PRESENTATION_FIELD?a.getPresentationSetOrFieldById(t.id,e):a.getResourceByIdAndType(t.id,n,e)},_getType:function(t){var e=t.entityType;return e||(e=o.getEntityName(t)),e},_getParents:function(t){var e=this.dataStore.getCollections(),n=this._getType(t);return n===s.PRESENTATION_FIELD?this._getPresentationParents(t):a.getResourceParentsByIdAndType(t.id,n,e)},_getPresentationParents:function(t){var e=this.dataStore.getCollections();return o.isPresentationField(t)||(t=a.getPresentationSetOrFieldById(t.id,e)),a.getPresentationParents(t,e)},_buildPath:function(t){var e;return t.length>0&&(t.reverse(),e=t.map(function(t){return t.name}).join(".")),e}}),n.exports=i});