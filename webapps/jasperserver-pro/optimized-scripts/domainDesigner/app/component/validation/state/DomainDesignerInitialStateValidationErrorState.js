/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../rest/enum/requestCanceledEnum","../../../rest/errorHandling/errorHandlingUtil","./enum/validationStateNameEnum"],function(i,e,a){var r=i("underscore"),t=i("../../../rest/enum/requestCanceledEnum"),o=i("../../../rest/errorHandling/errorHandlingUtil"),n=i("./enum/validationStateNameEnum"),c=function(i){this.initialize(i)};r.extend(c.prototype,{initialize:function(i){this.orphanResourcesValidationErrorSpecification=i.orphanResourcesValidationErrorSpecification,this.dataSourceInvalidValidationErrorSpecification=i.dataSourceInvalidValidationErrorSpecification,this.domainSchemaNameMismatchErrorsToAvailableSchemasListConverter=i.domainSchemaNameMismatchErrorsToAvailableSchemasListConverter,this.dataSourceSchemaNameMismatchValidationErrorSpecification=i.dataSourceSchemaNameMismatchValidationErrorSpecification,this.emptyResourcesElementValidationErrorSpecification=i.emptyResourcesElementValidationErrorSpecification},enter:function(i,e){var a,r=i.xhr;if(r===t.CANCELED)e.enter(n.GOTO_PREVIOUS_LOCATION_STATE,i);else{a=o.getErrors(r);var c=this.emptyResourcesElementValidationErrorSpecification.isSatisfiedBy(a),s=this.dataSourceInvalidValidationErrorSpecification.isSatisfiedBy(a),E=this.dataSourceSchemaNameMismatchValidationErrorSpecification.isSatisfiedBy(a),S=this.orphanResourcesValidationErrorSpecification.isSatisfiedBy(a);i.errors=a,s?e.enter(n.DATA_SOURCE_ERROR_STATE,i):E?(i.availableSchemasToMap=this.domainSchemaNameMismatchErrorsToAvailableSchemasListConverter.convert(a),e.enter(n.TRY_TO_MAP_SCHEMAS_AFTER_VALIDATION_ERROR_STATE,i)):S||c?e.enter(n.VALIDATION_ERROR_REMOVE_ORPHAN_RESOURCES_STATE,i):e.enter(n.UNRECOVERABLE_ERROR_STATE,i)}}}),a.exports=c});