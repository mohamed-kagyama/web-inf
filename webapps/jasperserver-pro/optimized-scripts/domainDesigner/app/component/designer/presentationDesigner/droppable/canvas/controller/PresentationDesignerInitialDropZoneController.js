/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","backbone"],function(e,t,n){var s=e("underscore"),o=e("backbone"),i=function(e){this.initialize(e)};s.extend(i.prototype,{initialize:function(e){this.store=e.store,this.dropAcceptedByDropZoneResourcesSpecification=e.dropAcceptedByDropZoneResourcesSpecification,this.presentationDesignerDropStrategyFactory=e.presentationDesignerDropStrategyFactory,this.presentationSidebarDraggableItemsFactory=e.presentationSidebarDraggableItemsFactory,this.storeChangeEventBus=e.storeChangeEventBus,this.presentationDesignerEventBus=e.presentationDesignerEventBus,this.presentationDesignerViewStateModelService=e.presentationDesignerViewStateModelService,this._initEvents()},_initEvents:function(){this.listenTo(this.storeChangeEventBus,"change",this._onStoreChangeEventBus),this.listenTo(this.presentationDesignerEventBus,"emptyDataIslandsDropZone:drop",this._onDrop),this.listenTo(this.presentationDesignerEventBus,"emptyDataIslandsDropZone:over",this._onDropZoneOver),this.listenTo(this.presentationDesignerEventBus,"emptyDataIslandsDropZone:out",this._onDropZoneOut)},_onStoreChangeEventBus:function(){var e=this.store.get("emptyDataIslandsDropZone"),t=this.presentationDesignerViewStateModelService.getPresentationSidebarSelectedItems();t=this.presentationSidebarDraggableItemsFactory.create(t),e.isActive=this.dropAcceptedByDropZoneResourcesSpecification.isSatisfiedBy(t,e)},_onDrop:function(e){var t,n=this.store.get("emptyDataIslandsDropZone");t=this.presentationDesignerDropStrategyFactory.create({items:e,dropZoneModel:n}),t&&t.execute(),n.isOver=!1},_onDropZoneOver:function(){this.store.get("emptyDataIslandsDropZone").isOver=!0},_onDropZoneOut:function(){this.store.get("emptyDataIslandsDropZone").isOver=!1}},o.Events),n.exports=i});