/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../../../../model/schema/util/entityUtil","../../../../../common/factory/compositeAndValidationRuleFactory"],function(t,a,e){var i=t("underscore"),o=t("../../../../../../model/schema/util/entityUtil"),r=t("../../../../../common/factory/compositeAndValidationRuleFactory"),s=function(t){this.fieldAndSetNameValidator=t.fieldAndSetNameValidator,this.escapeJsonValidator=t.escapeJsonValidator,this.bundleKeyValidator=t.bundleKeyValidator,this.escapeJsonValidator=t.escapeJsonValidator,this.emptyValidator=t.emptyValidator,this.idValidator=t.idValidator,this.startsFromNumberValidator=t.startsFromNumberValidator};i.extend(s.prototype,{_getBaseValidators:function(){return{label:[this.escapeJsonValidator],labelId:[this.escapeJsonValidator,this.bundleKeyValidator],description:[this.escapeJsonValidator],descriptionId:[this.escapeJsonValidator,this.bundleKeyValidator],name:[this.emptyValidator,this.idValidator,this.startsFromNumberValidator]}},_getFieldsAndSetsValidators:function(t){var a=this._getBaseValidators(),e=i.partial(this.fieldAndSetNameValidator.fn,t);return a.name.push({fn:e}),a},_getValidationRules:function(t){var a,e=t.property,i=t.modelType,r=t.id;return o.isPresentationField(i)||o.isPresentationSet(i)?a=this._getFieldsAndSetsValidators(r):o.isDataIsland(i)&&(a=this._getBaseValidators()),a[e]},_adaptBackboneValidationRulesToSingleFunction:function(t){return t=i.isArray(t)?t:[t],t=t.map(function(t){return{validate:t.fn}}),r.create(t)},create:function(t){var a=this._getValidationRules(t);return a=this._adaptBackboneValidationRulesToSingleFunction(a)}}),e.exports=s});