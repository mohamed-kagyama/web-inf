/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","backbone","../../../../../dispatcher/enum/applicationStateEventsEnum"],function(e,t,i){var n=e("underscore"),s=e("backbone"),r=e("../../../../../dispatcher/enum/applicationStateEventsEnum"),o=function(e){this.initialize(e)};n.extend(o.prototype,{initialize:function(e){this.presentationDesignerEventBus=e.presentationDesignerEventBus,this.presentationDesignerSidebarSingleSelectStrategy=e.presentationDesignerSidebarSingleSelectStrategy,this.applicationDispatcherEventBus=e.applicationDispatcherEventBus,this.presentationDesignerViewStateModelService=e.presentationDesignerViewStateModelService,this.presentationSidebarItemsRangeSelectionProvider=e.presentationSidebarItemsRangeSelectionProvider,this._initEvents()},_initEvents:function(){this.listenTo(this.presentationDesignerEventBus,"sidebar:selectItem",this.selectItem),this.listenTo(this.presentationDesignerEventBus,"sidebar:rangeSelection",this.onRangeSelection),this.listenTo(this.presentationDesignerEventBus,"sidebar:toggleSelection",this.toggleItemSelection)},selectItem:function(e){this.presentationDesignerSidebarSingleSelectStrategy.execute(e)},toggleItemSelection:function(e){var t;this._isSelectionEmpty()?this.selectItem(e):this._canTogglePresentationSidebarSelection(e)&&(t=this.presentationDesignerViewStateModelService.getNewPresentationSidebarSelection(e,{toggle:!0,parentId:e.parentId}),this.applicationDispatcherEventBus.trigger(r.PRESENTATION_DESIGNER_SET_SIDEBAR_SELECTION,{selection:t}))},onRangeSelection:function(e){var t;this._isSelectionEmpty()?this.selectItem(e):this._canTogglePresentationSidebarSelection(e)&&(t=this.presentationSidebarItemsRangeSelectionProvider.getRangeSelectionByLastSelectedItem(e),this.applicationDispatcherEventBus.trigger(r.PRESENTATION_DESIGNER_SET_SIDEBAR_SELECTION,{selection:t}))},_canTogglePresentationSidebarSelection:function(e){return this.presentationDesignerViewStateModelService.canTogglePresentationSidebarSelection(e)},_isSelectionEmpty:function(){return this.presentationDesignerViewStateModelService.isPresentationSidebarSelectionEmpty()}},s.Events),i.exports=o});