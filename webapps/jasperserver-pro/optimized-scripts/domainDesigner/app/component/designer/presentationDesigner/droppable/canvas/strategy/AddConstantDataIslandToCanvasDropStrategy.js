/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../enum/constantDataIslandLabelEnum","../enum/addPresentationItemsToCanvasEventEnum"],function(e,t,n){var a=e("underscore"),s=e("../../../enum/constantDataIslandLabelEnum"),i=e("../enum/addPresentationItemsToCanvasEventEnum"),o=function(e){this.initialize(e)};a.extend(o.prototype,{initialize:function(e){a.bindAll(this,"execute"),this.clientDomainSchemaService=e.clientDomainSchemaService,this.applicationDispatcherEventBus=e.applicationDispatcherEventBus,this.presentationSidebarConstantGroupToPresentationDataIslandDTOHierarchyConverter=e.presentationSidebarConstantGroupToPresentationDataIslandDTOHierarchyConverter,this.presentationCanvasDroppableItemsService=e.presentationCanvasDroppableItemsService},execute:function(e){var t=e.items,n=e.position,a=this.presentationCanvasDroppableItemsService.getItemsNestingLevel(t),o=this.presentationCanvasDroppableItemsService.getItemsConstantGroupId(t),r=this.presentationCanvasDroppableItemsService.getResourceIdsInItemsPaths(t),c=this.presentationSidebarConstantGroupToPresentationDataIslandDTOHierarchyConverter.convert({nestingLevel:a,constantGroupId:o,resourceIdsInItemsPaths:r,constantDataIslandLabel:s.CONSTANT_DATA_ISLAND_LABEL,constantDataIslandName:this.clientDomainSchemaService.generateConstantDataIslandName()});this.applicationDispatcherEventBus.trigger(i.ADD_CONSTANT_DATA_ISLAND,{selection:{positionOffset:0,itemsQuantity:t.length},dataIsland:c[0],position:n})}}),n.exports=o});