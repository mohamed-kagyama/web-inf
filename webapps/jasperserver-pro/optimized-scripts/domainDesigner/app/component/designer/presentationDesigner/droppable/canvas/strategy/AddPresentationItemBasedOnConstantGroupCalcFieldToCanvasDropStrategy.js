/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../enum/constantDataIslandLabelEnum","../enum/addPresentationItemsToCanvasEventEnum"],function(e,t,n){var a=e("underscore"),s=e("../../../enum/constantDataIslandLabelEnum"),i=e("../enum/addPresentationItemsToCanvasEventEnum"),r=function(e){this.initialize(e)};a.extend(r.prototype,{initialize:function(e){a.bindAll(this,"execute"),this.clientDomainSchemaService=e.clientDomainSchemaService,this.applicationDispatcherEventBus=e.applicationDispatcherEventBus,this.presentationCanvasDroppableItemsService=e.presentationCanvasDroppableItemsService,this.presentationSidebarConstantGroupCalcFieldsToPresentationItemsDTOHierarchyConverter=e.presentationSidebarConstantGroupCalcFieldsToPresentationItemsDTOHierarchyConverter},execute:function(e){var t=e.items,n=e.position,a=e.parentId,r=this.presentationCanvasDroppableItemsService.getItemsNestingLevel(t),o=this.presentationCanvasDroppableItemsService.getItemsConstantGroupId(t),c=this.presentationCanvasDroppableItemsService.getResourceIdsInItemsPaths(t),p=this.presentationSidebarConstantGroupCalcFieldsToPresentationItemsDTOHierarchyConverter.convert({parentId:a,nestingLevel:r,constantGroupId:o,resourceIdsInItemsPaths:c,constantDataIslandName:this.clientDomainSchemaService.generateConstantDataIslandName(),constantDataIslandLabel:s.CONSTANT_DATA_ISLAND_LABEL});this.applicationDispatcherEventBus.trigger(i.ADD_PRESENTATION_ITEMS,{selection:{parentId:a,positionOffset:n,itemsQuantity:t.length},presentationItems:p,position:n})}}),n.exports=r});