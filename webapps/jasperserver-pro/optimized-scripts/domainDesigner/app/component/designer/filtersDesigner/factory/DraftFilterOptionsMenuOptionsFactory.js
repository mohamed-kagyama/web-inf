/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../util/filterTypeUtil","bundle!DomainDesignerBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage"],function(e,i,t){var r=e("underscore"),l=e("../util/filterTypeUtil"),o=e("bundle!DomainDesignerBundle"),a=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),n=a.create(o),s=function(e){this.initialize(e)};r.extend(s.prototype,{initialize:function(e){this.filterSupportsAlternativeValueEditorSpecification=e.filterSupportsAlternativeValueEditorSpecification,this.filterSupportsSwapOptionSpecification=e.filterSupportsSwapOptionSpecification,this.filterSupportsFieldToValueEditorSpecification=e.filterSupportsFieldToValueEditorSpecification},create:function(e){var i=Boolean(e.isRawValueEditor),t=l.isFieldToFieldFilter(e.leftOperand.type,e.rightOperand.type),r=!t,o=[];return this.filterSupportsFieldToValueEditorSpecification.isSatisfiedBy(e)&&o.push({action:"fieldToValue",value:r,triggerEvent:"draftFilter:valueEditor:fieldToValue",label:n("domain.designer.filters.draftState.optionsMenu.fieldToValueComparison")}),o.push({action:"fieldToField",value:t,triggerEvent:"draftFilter:valueEditor:fieldToField",label:n("domain.designer.filters.draftState.optionsMenu.fieldToFieldComparison")}),r&&(o=this._getFieldToValueEditorOptions({isRawValueEditor:i,filter:e,options:o})),this.filterSupportsSwapOptionSpecification.isSatisfiedBy(e)&&(o=this._getFieldToFieldEditorOptions({options:o})),o},_getFieldToValueEditorOptions:function(e){var i=e.filter,t=e.options,r=e.isRawValueEditor;return this.filterSupportsAlternativeValueEditorSpecification.isSatisfiedBy(i)&&(t=t.concat([{value:!1,label:"",cssClass:"separator"},{action:"singleSelect",value:!r,triggerEvent:"draftFilter:valueEditor:singleSelect",label:n("domain.designer.filters.draftState.optionsMenu.selectFromAvailableValues")},{action:"input",value:r,triggerEvent:"draftFilter:valueEditor:input",label:n("domain.designer.filters.draftState.optionsMenu.enterRawValue")}])),t},_getFieldToFieldEditorOptions:function(e){var i=e.options;return i=i.concat([{value:!1,label:"",cssClass:"separator"},{action:"swap",value:!1,triggerEvent:"draftFilter:variables:swap",label:n("domain.designer.filters.draftState.optionsMenu.swapFields")}])}}),t.exports=s});