/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","text!./template/fieldValueEditorTemplate.htm","bundle!DomainDesignerBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage","../../../../../../common/mixin/droppable/droppableViewMixin"],function(e,i,t){var r=e("underscore"),o=e("text!./template/fieldValueEditorTemplate.htm"),n=e("bundle!DomainDesignerBundle"),a=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),l=e("../../../../../../common/mixin/droppable/droppableViewMixin"),d=a.create(n),s=r.template("{{-sourceName}}:{{-fieldName}}"),p=r.template("draftFilter:{{-which}}:drop"),h=r.template("draftFilter:{{-which}}:over"),c=r.template("draftFilter:{{-which}}:out"),u=r.template("draftFilter:{{-which}}:removeField");t.exports={create:function(e){var i=e.store,t=e.filtersDesignerEventBus;return{template:o,props:["filter","operand"],components:{},computed:{label:function(){return this.isFieldAvailable?s({sourceName:this.operand.sourceName,fieldName:this.operand.fieldName}):d("domain.designer.filters.draftState.dropZone.emptyMessage")},isFieldAvailable:function(){return Boolean(this.operand.fieldId)},isOver:function(){return i.get("runtime")[this.which].over},which:function(){return this.operand.which},isLeft:function(){return"left"===this.which}},methods:r.extend({initializeDroppableArea:function(){this._initializeDroppable&&this._initializeDroppable({el:".jr-jDropZone",drop:"drop",over:"over",out:"out"})},destroyDroppableArea:function(){this._destroyDroppable&&this._destroyDroppable()},drop:function(e,i){t.trigger(p({which:this.which}),i)},over:function(){t.trigger(h({which:this.which}))},out:function(){t.trigger(c({which:this.which}))},removeField:function(){t.trigger(u({which:this.which}))}},l),mounted:function(){this.initializeDroppableArea()},updated:function(){this.operand.shouldDropZoneBeActive?this.initializeDroppableArea():this.destroyDroppableArea()},destroyed:function(){this.destroyDroppableArea()}}}}});