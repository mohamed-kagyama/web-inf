/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../../../../model/schema/enum/genericTypesEnum","../../util/filterOperandTypeUtil","../../../../../model/enum/clientExpressionsEnum"],function(e,n,t){function i(e){return e.currentFilter.dataType===h.STRING}function r(e){var n=e.newFilterOptions.isRawValueEditor;return l(e)&&e.currentFilter.isRawValueEditor&&!m.isUndefined(n)&&!n}function o(e){var n=e.newFilterOptions.isRawValueEditor,t=e.currentFilter.isRawValueEditor;return l(e)&&(n||m.isUndefined(n)&&t)}function s(e){return m.indexOf(F,e.currentFilter.expression.operator)>=0}function u(e){return S.isLiteral(e.newFilterOptions.rightOperandType)}function a(e){return m.indexOf(O,e.newFilterOptions.operator)>=0}function c(e){return S.isList(e.newFilterOptions.rightOperandType)}function l(e){return m.indexOf(O,e.currentFilter.expression.operator)>=0}function f(e){var n=e.currentFilter.expression.right,t=!0;if(n){var i=n.items&&n.items.length>0,r=!m.isUndefined(n.value);t=!(i||r)}return t}function p(e){return(f(e)||s(e))&&u(e)&&a(e)&&!r(e)&&!o(e)}function d(e){return!f(e)&&c(e)&&l(e)}var m=e("underscore"),h=e("../../../../../../model/schema/enum/genericTypesEnum"),S=e("../../util/filterOperandTypeUtil"),E=e("../../../../../model/enum/clientExpressionsEnum"),O=[E.operators.equals.name,E.operators.notEqual.name],F=[E.functions.contains.name,E.functions.notContains.name,E.functions.startsWith.name,E.functions.notStartsWith.name,E.functions.endsWith.name,E.functions.notEndsWith.name],y=function(e){this.initialize(e)};m.extend(y.prototype,{initialize:function(e){this.isSwitchFromStringSingleSelectToOperatorsWithEmptyDefaultValueSpecification=e.isSwitchFromStringSingleSelectToOperatorsWithEmptyDefaultValueSpecification},isSatisfiedBy:function(e){return i(e)&&(p(e)||d(e))||this.isSwitchFromStringSingleSelectToOperatorsWithEmptyDefaultValueSpecification.isSatisfiedBy(e)}}),t.exports=y});