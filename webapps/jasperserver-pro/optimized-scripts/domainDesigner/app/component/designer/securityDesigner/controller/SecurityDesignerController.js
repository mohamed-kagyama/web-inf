/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","backbone","runtime_dependencies/js-sdk/src/common/util/base64","../../optionsDesigner/util/resourceDownloadUtil","../../../../model/util/resourcePropertiesUtil","../../../../model/enum/subResourceTypesEnum","../../../../dispatcher/enum/applicationStateEventsEnum"],function(e,t,o){var n=e("underscore"),i=e("backbone"),r=(e("runtime_dependencies/js-sdk/src/common/util/base64"),e("../../optionsDesigner/util/resourceDownloadUtil")),s=e("../../../../model/util/resourcePropertiesUtil"),u=(e("../../../../model/enum/subResourceTypesEnum"),e("../../../../dispatcher/enum/applicationStateEventsEnum"),function(e){this.storeChangeEventBus=e.storeChangeEventBus,this.securityDesignerStore=e.securityDesignerStore,this.securityFileUploadDialog=e.securityFileUploadDialog,this.securityDesignerResourcePropertiesToStoreConverter=e.securityDesignerResourcePropertiesToStoreConverter,this._initEvents(),this.applicationDispatcherEventBus=e.applicationDispatcherEventBus});n.extend(u.prototype,i.Events,{_initEvents:function(){this.listenTo(this.storeChangeEventBus,"change",this._onChangeState),this.listenTo(this.storeChangeEventBus,"download:securityFile",this._onDownloadSecurityFile)},_onChangeState:function(e){},_getFileNameForUrlDownload:function(e){var t=s.parseFileNameFromUrl(e.uri);return s.createSecurityFileLabelForDownload(t)},_getFileNameForContentDownload:function(e){return s.createSecurityFileLabelForDownload(e.label)},_onDownloadSecurityFile:function(e){r.downloadResource(e,this._getFileNameForUrlDownload,this._getFileNameForContentDownload)}}),o.exports=u});