/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","underscore","runtime_dependencies/js-sdk/src/common/component/panel/Panel","runtime_dependencies/js-sdk/src/common/component/panel/trait/resizablePanelTrait"],function(e,i,n){var t=e("jquery"),o=e("underscore"),s=e("runtime_dependencies/js-sdk/src/common/component/panel/Panel"),r=e("runtime_dependencies/js-sdk/src/common/component/panel/trait/resizablePanelTrait");n.exports=s.extend({constructor:function(e){o.bindAll(this,"_onResizePanel","_onWindowResize"),this.$window=e.$window||t(window),this.footerHeight=e.footerHeight,this.joinTreesSectionMinHeight=e.joinTreesSectionMinHeight,s.prototype.constructor.call(this,{el:e.el,traits:[r],handles:function(e){return{s:e.find(".jr-jJoinsSectionResizer")}},minHeight:e.minHeight,maxHeight:e.maxHeight}),this.on("resize",this._onResizePanel),this.$window.on("resize",this._onWindowResize)},remove:function(){this.off("resize",this._onResizePanel),this.$window.off("resize",this._onWindowResize),s.prototype.remove.apply(this,arguments)},_onResizePanel:function(e,i){var n=this.$window.height()-this.footerHeight,t=i.size.height;this.$el.offset().top+t<n-this.joinTreesSectionMinHeight&&this.$el.css({height:"",flex:"0 0 "+i.size.height+"px"})},_onWindowResize:function(e){e.target===this.$window[0]&&this.$el.css({height:"",flex:""})}})});