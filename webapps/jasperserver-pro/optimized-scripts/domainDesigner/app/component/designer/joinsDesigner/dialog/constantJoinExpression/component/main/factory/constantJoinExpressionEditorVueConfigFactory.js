/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","text!../template/constantJoinExpressionEditorVueTemplate.htm","bundle!DomainDesignerBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage","../../../../../../../../common/vue/computed/i18nComputed","../../../../../../../../common/component/validation/enum/messageTypesEnum","../../../../../enum/constantJoinExpressionOperatorsEnum","../../../../../../../../../model/schema/enum/fieldTypesToGenericTypesEnum"],function(e,n,i){function t(e){e=e||{};var n=e.store,i=e.eventBus;return{template:o,components:{actionButton:e.ActionButton,validation:e.Validation},computed:s.extend({operatorOptions:function(){var n=this.fieldType,i=g[n],t=e.selectOptionsWithAdditionalPropsFactory.create({operators:u[i]});return t.length>0?t:this.availableOperators},headerMessage:function(){return this.id?x:f},titleText:function(){return this.id?m:p},mainActionText:function(){return this.id?E:h},isUpdateDisabled:function(){return this.expressionValidationInProgress||s.isEmpty(this.value)},isValidateButtonDisabled:function(){return this.constantJoinValidationInProgress||s.isEmpty(this.value)},validationMessage:function(){return this.successMessage||this.errorMessage||this.warningMessage},validationMessageType:function(){return this.warningMessage?d.WARNING:this.errorMessage?d.ERROR:this.successMessage?d.SUCCESS:void 0},disableInput:function(){return this.constantJoinValidationInProgress||this.expressionValidationInProgress},constantJoinValidationLabel:function(){return this.id?this.i18n["domain.designer.dialog.updating"]:this.i18n["domain.designer.dialog.creating"]},cancelConstantJoinValidationLabel:function(){return this.id?this.i18n["domain.designer.dialog.cancel.update"]:this.i18n["domain.designer.dialog.cancel.creation"]}},c),data:function(){return n.attributes},methods:{changeValue:function(e){i.trigger("constantJoinExpression:changeValue",e)},changeField:function(e){i.trigger("constantJoinExpression:changeField",e,this.fieldOptions)},changeOperator:function(e){i.trigger("constantJoinExpression:changeOperator",e)},onClickMainAction:function(){this.errorMessage||i.trigger("constantJoinExpression:changeExpression")},onValidateButtonClicked:function(){!this.errorMessage&&!this.successMessage&&!this.warningMessage&&i.trigger("constantJoinExpression:validateExpression")},onValidationCancelButtonClick:function(){i.trigger("constantJoinExpression:cancelValidation")},isOperatorSelected:function(e){return this.operator===e},isFieldSelected:function(e){return this.field===e}}}}var s=e("underscore"),o=e("text!../template/constantJoinExpressionEditorVueTemplate.htm"),a=e("bundle!DomainDesignerBundle"),r=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),c=e("../../../../../../../../common/vue/computed/i18nComputed"),d=e("../../../../../../../../common/component/validation/enum/messageTypesEnum"),u=e("../../../../../enum/constantJoinExpressionOperatorsEnum"),g=e("../../../../../../../../../model/schema/enum/fieldTypesToGenericTypesEnum"),l=r.create(a),p=l("domain.designer.joinsDesigner.constantJoinExpression.dialog.title.create"),m=l("domain.designer.joinsDesigner.constantJoinExpression.dialog.title.update"),h=l("domain.designer.joinsDesigner.constantJoinExpression.dialog.button.create"),E=l("domain.designer.joinsDesigner.constantJoinExpression.dialog.button.update"),f=l("domain.designer.joinsDesigner.constantJoinExpression.dialog.headerMessage.create"),x=l("domain.designer.joinsDesigner.constantJoinExpression.dialog.headerMessage.update");i.exports={create:t}});