/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","bundle!DomainDesignerBundle","runtime_dependencies/js-sdk/src/common/util/i18nMessage","../../../../../../../../model/util/resourcePropertiesUtil"],function(e,i,r){var n=e("underscore"),s=e("bundle!DomainDesignerBundle"),t=e("runtime_dependencies/js-sdk/src/common/util/i18nMessage"),l=e("../../../../../../../../model/util/resourcePropertiesUtil"),u=t.create(s),o=function(e){this.initialize(e)};n.extend(o.prototype,{initialize:function(e){n.bindAll(this,"validate"),this.clientResourcePropertiesService=e.clientResourcePropertiesService},validate:function(e){var i=this._getFileReferenceSourceFileName(e),r=n.reduce(e,function(e,r){var n=l.parseFileNameFromUrl(r.uri);return l.isSameBundleBaseBase(n,i)?e.validFiles.push(r):e.invalidFiles.push(r),e},{invalidFiles:[],validFiles:[],errorMessage:u("domain.designer.advanced.options.bundlesUploadDialog.differentFileBaseName")},this);if(r.invalidFiles.length)return r},_getFileReferenceSourceFileName:function(e){var i=this.clientResourcePropertiesService.getBundles();return i[0]?this._getBundleName(i[0]):l.parseFileNameFromUrl(e[0].uri)},_getBundleName:function(e){return l.getBundleName(e)}}),r.exports=o});