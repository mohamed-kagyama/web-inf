/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../../../../model/schema/util/entityUtil","../../../../../../model/util/profileAttributeUtil","../../../../layout/sidebarView/enum/artificialTreeResourceTypesEnum","../../../../../util/getResourceSourceNameOrNameUtil","../../../../enum/iconNameToTreeItemMapping"],function(e,t,i){var r=e("underscore"),o=e("../../../../../../model/schema/util/entityUtil"),a=e("../../../../../../model/util/profileAttributeUtil"),n=e("../../../../layout/sidebarView/enum/artificialTreeResourceTypesEnum"),u=e("../../../../../util/getResourceSourceNameOrNameUtil"),c=e("../../../../enum/iconNameToTreeItemMapping"),l=function(e){this.initialize(e)};r.extend(l.prototype,{initialize:function(e){r.bindAll(this,"convert"),this.clientDataSourceGroupService=e.clientDataSourceGroupService,this.treeViewNodeFactory=e.treeViewNodeFactory},convert:function(e,t){t=t||{};var i=t.selection||{},o=i[e.name],a={label:this._getLabel(e),value:e.name,addToSelection:Boolean(o),iconName:this._getIconName(e)};return r.extend(a,r.pick(e,"cssClass")),this.treeViewNodeFactory.create(a)},_getIconName:function(e){var t=e.type;if(o.isDataSourceGroup(e.type)){a.containsProfileAttribute(e.sourceName)&&(t=n.PROFILE_ATTRIBUTE_DATA_SOURCE_GROUP)}return c[t]},_getLabel:function(e){return o.isDataSourceGroup(e.type)?this.clientDataSourceGroupService.getName(e):u(e)}}),i.exports=l});