/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","backbone","../../../../../model/schema/util/entityUtil"],function(e,t,r){var i=e("underscore"),a=e("backbone"),o=e("../../../../../model/schema/util/entityUtil"),n=function(e){this.initialize(e)};i.extend(n.prototype,{initialize:function(e){this.resourceInfoStore=e.metadataDesignerVueStore.get("resourceInfo"),this.storeChangeEventBus=e.storeChangeEventBus,this.currentResourceInfoFactory=e.currentResourceInfoFactory,this.clientDataSourceGroupService=e.clientDataSourceGroupService,this.clientDomainSchemaService=e.clientDomainSchemaService,this.clientDomainSchemaMetadataService=e.clientDomainSchemaMetadataService,this.metadataDesignerViewStateModelService=e.metadataDesignerViewStateModelService,this.metadataDesignerCurrentDataSourceTypeBySidebarResourceProvider=e.metadataDesignerCurrentDataSourceTypeBySidebarResourceProvider,this._initEvents()},_initEvents:function(){this.listenTo(this.storeChangeEventBus,"change",this._setViewModelState)},_setViewModelState:function(){var e=this.metadataDesignerViewStateModelService.getCurrentSidebarResource();if(e.resourceId){var t=this._getCurrentMetadataResourceName(e),r=this.metadataDesignerCurrentDataSourceTypeBySidebarResourceProvider.getDataSourceType(e),i=this.currentResourceInfoFactory.create({dataSourceType:r,resourceName:t,resourceType:e.type,isAnyTablesPresentInDomain:this.clientDomainSchemaMetadataService.isAnyTablesPresentInDomain(),isAnyDataSourceGroupsPresentInDomain:this.clientDomainSchemaMetadataService.isAnyDataSourceGroupsPresentInDomain()});this.resourceInfoStore.availableResourcesTitle=i.availableResourcesTitle,this.resourceInfoStore.selectedResourcesTitle=i.selectedResourcesTitle,this.resourceInfoStore.manageResource=i.manageResource,this.resourceInfoStore.dataObjectName=i.dataObjectName,this.resourceInfoStore.instructionTitle=i.instructionTitle,this.resourceInfoStore.instructionText=i.instructionText}},_getCurrentMetadataResourceName:function(e){var t=this.clientDomainSchemaService.getEntityByIdAndType(e.resourceId,e.type);return o.isDataSourceGroup(e.type)?this.clientDataSourceGroupService.getName(t):t.name}},a.Events),r.exports=n});