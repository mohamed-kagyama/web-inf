/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","backbone"],function(e,t,i){var n=e("underscore"),o=e("backbone");i.exports=o.View.extend({constructor:function(e){n.bindAll(this,"_onItemDblClick"),e=e||{},this.tree=e.tree,this.debounceTime=e.debounceTime,o.View.apply(this,arguments)},initialize:function(){this._initEvents()},setElement:function(e){return o.View.prototype.setElement.apply(this,arguments),this.tree.setElement(e||this.$el),this},getValue:function(){return this._getValue()},remove:function(){this.tree.remove(),o.View.prototype.remove.call(this)},fetch:function(e){this.tree.setValue([],{renderSelection:!1}),this.tree.fetch(void 0,e)},_destroyDroppable:function(){this.$el&&this.$el.data("ui-droppable")&&this.$el.droppable("destroy")},_initEvents:function(){this.listenTo(this.tree,"item:dblclick",n.debounce(this._onItemDblClick,this.debounceTime,!0)),this.listenTo(this.tree,"list:item:click",this._onItemClick),this.listenTo(this.tree,"render:items",this._onRenderData),this.listenTo(this.tree,"selection:change",this._onSelection)},_onRenderData:function(){this.trigger("render:items")},_onSelection:function(){this.trigger("selection:change",this._getValue())},_getValue:function(){return n.compact(this.tree.getValue())},_onItemDblClick:function(){this.trigger("item:dblclick")},_onItemClick:function(){this.trigger("item:click")}})});