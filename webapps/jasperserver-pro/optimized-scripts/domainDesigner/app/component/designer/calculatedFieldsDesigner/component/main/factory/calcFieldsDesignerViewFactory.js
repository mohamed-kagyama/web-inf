/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../../../../common/component/validation/enum/messageTypesEnum","bundle!DomainDesignerBundle","text!../template/calculatedFieldsDesignerTemplate.htm"],function(e,i,n){var t=e("underscore"),s=e("../../../../../../common/component/validation/enum/messageTypesEnum"),o=e("bundle!DomainDesignerBundle"),r=e("text!../template/calculatedFieldsDesignerTemplate.htm");n.exports={create:function(e){return e=e||{},{template:r,components:{validation:e.Validation,inputErrorMessage:e.InputErrorMessage,operators:e.operatorsViewConfig,expressionEditor:e.textAreaExpressionEditorViewConfig,search:e.searchViewConfig,itemsTree:e.AvailableItemsTree,actionButton:e.actionButton},computed:{i18n:function(){return o},editMode:function(){return null!==this.id},validationMessageType:function(){return this.errors.expression.level===s.WARNING?s.WARNING:this.errors.expression.level===s.ERROR?s.ERROR:this.expressionValidationSuccessMessage?s.SUCCESS:void 0},validationMessageTypes:function(){return s},calcFieldValidationLabel:function(){return this.editMode?this.i18n["domain.designer.dialog.updating"]:this.i18n["domain.designer.dialog.creating"]},cancelCalcFieldValidationLabel:function(){return this.editMode?this.i18n["domain.designer.dialog.cancel.update"]:this.i18n["domain.designer.dialog.cancel.creation"]},disableInput:function(){return this.calcFieldValidationInProgress||this.expressionValidationInProgress},isCreateOrUpdateDisabled:function(){return this.expressionValidationInProgress||t.isEmpty(this.expression.string)},isValidationButtonDisabled:function(){return this.calcFieldValidationInProgress||t.isEmpty(this.expression.string)}},methods:{onTypeEdit:function(e){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:editType",e)},onNameEdit:function(e){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:editName",e)},onExpressionEdit:function(e){e={expression:e.value,selectionRange:e.selectionRange},this.$options.calculatedFieldsDesignerEventBus.trigger("designer:editExpression",e)},onValidationButtonClick:function(){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:validateExpression")},onValidationCancelButtonClick:function(){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:cancelValidation")},selectOperator:function(e){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:selectOperator",e)},onCancelButtonClick:function(){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:hide")},onCreateButtonClick:function(){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:createCalcField")},onUpdateButtonClick:function(){this.$options.calculatedFieldsDesignerEventBus.trigger("designer:updateCalcField")}}}}}});