/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","underscore","../util/repositoryResourceChooserDialogUtil"],function(e,r,t){function o(e){var r=e.resourceListNodeProvider,t=e.resourcesListActions,o=e.repositoryTreeActions,u=e.repositoryResourcesListNodeProvider,c=e.store;return{selectListItem:function(e,r){return t.select(e,r)},selectTreeNode:function(e,r){return o.select(e,r)},toggleRepositoryTree:function(e){return o.toggle(e)},getResourceListDataByQueryWord:function(e){return u.setQueryKeyword(e),this.refreshResourcesList().then(function(r){return{queryWord:e,data:r}})},resetSearchKeyword:function(){return u.resetQueryKeyword(),this.refreshResourcesList().then(function(e){return{searchKeyword:"",resourcesListData:e}})},refreshResourcesList:function(){return r.getData(void 0,{clearSelection:!0}).then(function(e){return e.visibleNodes})},fetch:function(e){return e=e||{},e.resetSearchKeyword&&u.resetQueryKeyword(),s.when(t.fetch(e),o.fetch(e)).then(function(e,r){return{resourcesListData:e,repositoryTreeData:r}})},getCurrentModeSelection:function(){var e,r=c.searchResultMode;return n.isRepositoryTreeMode(r)?e=i.keys(c.repositoryTree.selection):n.isResourcesListMode(r)&&(e=i.keys(c.resourcesList.selection)),e}}}var s=e("jquery"),i=e("underscore"),n=e("../util/repositoryResourceChooserDialogUtil");t.exports={create:o}});