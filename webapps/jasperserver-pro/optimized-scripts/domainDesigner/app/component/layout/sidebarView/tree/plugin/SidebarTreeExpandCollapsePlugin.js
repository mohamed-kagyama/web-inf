/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","underscore","../../../../../common/mixin/selection/selectionMixin"],function(e,i,t){var s=e("jquery"),o=e("underscore"),r=e("../../../../../common/mixin/selection/selectionMixin"),n=function(e){this.initialize(e)},l={CLICK:"click",DBLCLICK:"dblclick"};o.extend(n.prototype,{selection:{selector:"li",event:"click dblclick",attrs:["resourceId","resourceType"],onSelection:"toggleLevel"},initialize:function(e){this.$el=e.el,this.expandedNodesProvider=e.expandedNodesProvider,this.searchKeywordProvider=e.searchKeywordProvider,this.eventBus=e.eventBus,this.expandNodeEvent=e.expandNodeEvent,this.collapseNodeEvent=e.collapseNodeEvent,this.collapser=e.collapser||".jr-jTreeCollapser",this._initializeSelectable&&this._initializeSelectable()},toggleLevel:function(e,i){var t,s,o,r,n=e.resourceId,d=i.type,c=l.CLICK===d,a=l.DBLCLICK===d,p=this._collapserWasClicked(i);(c&&p||a)&&(t=this.expandedNodesProvider.isNodeExpanded(n),s=this.expandedNodesProvider.isNodeCollapsed(n),o=this.searchKeywordProvider.get(),r={resourceId:e.resourceId,type:e.resourceType},o?s?this.eventBus.trigger(this.expandNodeEvent,r):this.eventBus.trigger(this.collapseNodeEvent,r):t?this.eventBus.trigger(this.collapseNodeEvent,r):this.eventBus.trigger(this.expandNodeEvent,r))},_collapserWasClicked:function(e){return s(e.target).is(this.collapser)}},r),t.exports=n});