/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","jquery","underscore","backbone","../../../../../common/component/enum/placementsEnum","../../../../../common/component/tooltip/directive/wrapper/TooltipVueWrapper"],function(t,e,o){function i(t){this.initialize(t)}var n=t("jquery"),r=t("underscore"),p=t("backbone"),s=t("../../../../../common/component/enum/placementsEnum"),a=t("../../../../../common/component/tooltip/directive/wrapper/TooltipVueWrapper");r.extend(i.prototype,p.Events,{initialize:function(t){this.$=t.$||n,this.tree=t.tree,this.getTooltipOptions=t.getTooltipOptions,this._initEvents(),this._initTooltip(t)},_initTooltip:function(t){this.tooltipVueWrapper=t.tooltipVueWrapper||new a,this.$("body").append(this.tooltipVueWrapper.$mount().$el)},_initEvents:function(){var t=this;this.listenTo(this.tree,"list:item:mouseover",function(e,o){var i=o.currentTarget,n=t.getTooltipOptions(e,i),p=n.target||i,a=p===i,u=!n.bindToTarget||t.$.contains(p,o.target),c=a||u;n.content&&c&&t.tooltipVueWrapper.setState({type:n.type,placement:n.placement||s.BOTTOM_LEFT,offset:r.extend({},{top:0,left:0},n.offset),timeout:n.timeout,target:p,content:n.content})}),this.listenTo(this.tree,"render:data",this._onRenderData),this.listenTo(this.tree,"list:item:mouseout",function(){t.tooltipVueWrapper.resetState()})},_onRenderData:function(){this.tooltipVueWrapper.resetState()},remove:function(){this.tooltipVueWrapper.$destroy()}}),o.exports=i});