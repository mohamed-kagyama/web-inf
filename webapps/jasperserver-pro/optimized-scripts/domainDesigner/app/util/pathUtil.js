/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore"],function(e,n,t){var i=e("underscore");t.exports={_isDelimiter:function(e){return e%2},split:function(e,n,t,r){t=i.isArray(t)?t:[t],r=!!i.isUndefined(r)||r;var u=this,c=0,s=0,a=[],l=e.length;return i.each(e,function(r,u){r===n?s+=1:-1!==i.indexOf(t,r)?0!==s&&this._isDelimiter(s)?s=0:(s=0,a.push(e.slice(c,u)),c=u+1):s=0,u+1===l&&a.push(e.slice(c,l))},this),i.map(a,function(e){return r?u.unescape(e,n):e})},unescape:function(e,n){var t=0,r="",u=e.length,c="";return i.each(e,function(i,s){i===n?r+=n:(r.length&&(c+=this._getReplacedSubString(e,r,n,s,t),t=s),r=""),s+1===u&&(r.length?c+=this._getReplacedSubString(e,r,n,s+1,t):c+=e.slice(t,u))},this),c},_getReplacedSubString:function(e,n,t,i,r){var u=this._getReplaceSequence(n,t);return e.slice(r,i).replace(n,u)},_getReplaceSequence:function(e,n){var t;if(e.length%2)t=new Array((e.length-1)/2+1).join(n);else{var i=e.length/2;i=1===i?2:i,t=new Array(i).join(n)}return t},join:function(e,n,t){return i.map(e,function(e){return this.escape(e,n,[n,t])},this).join(t)},escape:function(e,n,t){var i=this._getEscapeRegexp(t);return null===e?"":e.replace(i,function(e){return n+e})},_getEscapeRegexp:function(e){return e=e.toString().replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").split("\\,"),new RegExp(e.join("|"),"g")}}});