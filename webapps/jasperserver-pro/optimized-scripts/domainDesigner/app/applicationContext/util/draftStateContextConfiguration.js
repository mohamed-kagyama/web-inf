/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","../../../util/aspect/aspectjs","../../../util/eventBusFactory","../../util/draftState/aspect/DraftStateAdvice","../../util/draftState/adapter/DraftStateGetActionNameAsFirstParameterAdviceAdapter","../../util/draftState/enum/applicationDispatcherDraftStateBlackListEnum","../../util/draftState/enum/menuEventBusDraftStateWhiteListEnum","../../util/draftState/enum/joinsDesignerEventBusDraftStateWhiteListEnum","../../util/draftState/enum/sidebarEventBusDraftStateWhiteListEnum","../../util/draftState/enum/applicationCrossComponentEventBusDraftStateWhiteListEnum","../../component/dialog/draftState/controller/DraftStateController","../../component/dialog/confirmation/view/ConfirmationDialogView","../../common/enum/automationDataNameAttributesEnum","bundle!CommonBundle"],function(t,e,a){function n(t){var e=new S({blackList:p,draftStateAdvice:t.get("draftStateAdvice")}),a=t.get("asyncApplicationDispatcher"),n=t.get("syncApplicationDispatcher"),i={"*":{modifyOriginal:!0},execute:{around:[e.intercept]}};d.each([a,n],function(t){f(t,i)})}function i(t){s({context:t,whiteList:v,eventBus:t.get("menuEventBus")})}function r(t){s({context:t,whiteList:D,eventBus:t.get("joinsDesignerEventBus")})}function o(t){s({context:t,whiteList:g,eventBus:t.get("applicationCrossComponentEventBus")})}function u(t){s({context:t,whiteList:E,eventBus:t.get("sidebarEventBus")})}function s(t){var e=t.context,a=t.blackList,n=t.whiteList,i=t.eventBus,r=new S({whiteList:n,blackList:a,draftStateAdvice:e.get("draftStateAdvice")});f(i,{"*":{modifyOriginal:!0},trigger:{around:[r.intercept]}})}function c(t,e){t.register("draftStateEventBus",m.create());var a=new l({applicationDispatcherEventBus:t.get("applicationDispatcherEventBus"),viewStateModelService:t.get("viewStateModelQueryService"),draftStateEventBus:t.get("draftStateEventBus")});t.register("draftStateAdvice",a),n(t),i(t),r(t),o(t),u(t),t.register("draftStateController",new B({draftStateEventBus:t.get("draftStateEventBus"),confirmationDialog:new h({yesLabel:A["button.yes"],noLabel:A["button.no"],dataNameAttrs:L.common.draftStateConfirmationDialog})}))}var d=t("underscore"),f=t("../../../util/aspect/aspectjs"),m=t("../../../util/eventBusFactory"),l=t("../../util/draftState/aspect/DraftStateAdvice"),S=t("../../util/draftState/adapter/DraftStateGetActionNameAsFirstParameterAdviceAdapter"),p=t("../../util/draftState/enum/applicationDispatcherDraftStateBlackListEnum"),v=t("../../util/draftState/enum/menuEventBusDraftStateWhiteListEnum"),D=t("../../util/draftState/enum/joinsDesignerEventBusDraftStateWhiteListEnum"),E=t("../../util/draftState/enum/sidebarEventBusDraftStateWhiteListEnum"),g=t("../../util/draftState/enum/applicationCrossComponentEventBusDraftStateWhiteListEnum"),B=t("../../component/dialog/draftState/controller/DraftStateController"),h=t("../../component/dialog/confirmation/view/ConfirmationDialogView"),L=t("../../common/enum/automationDataNameAttributesEnum"),A=t("bundle!CommonBundle");a.exports=c});