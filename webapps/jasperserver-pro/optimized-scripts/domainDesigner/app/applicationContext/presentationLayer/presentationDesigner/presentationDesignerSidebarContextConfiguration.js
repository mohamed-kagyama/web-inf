/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","vue","../../../util/uriUtil","../../../common/component/search/factory/searchVueWrapperConfigFactory","../../../common/component/search/factory/searchVueConfigFactory","../../../component/layout/sidebarView/tree/TreeListDataProvider","../../../component/layout/sidebarView/predicate/MatchBySearchKeyword","../../../component/layout/sidebarView/provider/getDefaultResourceSearchPropertyProvider","../../../component/layout/sidebarView/predicate/DoNotSkipChildrenConversion","../../../../util/nestedTreeModel/NestedTreeModel","../../../util/AutoIdGenerationStrategyBasedOnEntityId","../../../../util/CompositeProcessor","../../../component/layout/sidebarView/converter/CompositeConcatenatingConverter","../../../component/layout/sidebarView/converter/ConstantGroupTreeConverter","../../../component/layout/sidebarView/converter/SchemaToDesignerTreeConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerAddParentIdSidebarConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerAddIndexSidebarConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerAddSourceConverter","../../../component/layout/sidebarView/converter/JoinTreesTreeConverter","../../../component/layout/sidebarView/converter/DataSourceTreeConverter","../../../component/layout/sidebarView/converter/CompositeResourceConverter","../../../component/designer/joinsDesigner/predicate/doNotAcceptTableReferencesUsedInJoins","../../../component/layout/sidebarView/converter/processor/resourcesTreeItemIdProcessor","../../../component/designer/presentationDesigner/sidebar/processor/presentationDesignerSidebarTreeItemResourceProcessor","../../../component/layout/sidebarView/converter/processor/treeItemValueProcessor","../../../component/layout/sidebarView/converter/processor/TreeItemSelectionProcessor","../../../component/layout/sidebarView/converter/processor/treeItemCalcFieldParentIdProcessor","../../../component/layout/sidebarView/converter/processor/TreeItemExpandedProcessor","../../../component/layout/sidebarView/factory/contextMenu/menuOptionsProviderFactory","../../../component/layout/sidebarView/factory/contextMenu/menuEventHandlerFactory/showContextMenuEventHandlerFactory","../../../../util/predicate/CompositePredicate","../../../component/layout/sidebarView/component/sidebarLayout/SidebarLayoutVueComponent","text!../../../component/layout/sidebarView/component/sidebarLayout/template/sidebarLayoutVueTemplate.htm","../../../common/converter/emptyProfileAttributeValuesToPlaceholderLabelConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerJoinsTreeAddDataIslandSourceIdConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerDataSourceResourcesTreeAddDataIslandSourceIdConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerConstantGroupsTreeAddDataIslandSourceIdConverter","../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerIsJoinTreeItemConverter","../../../component/designer/presentationDesigner/sidebar/factory/presentationDesignerSidebarTreeOptionsFactory","../../../component/designer/presentationDesigner/sidebar/specification/PresentationDesignerSidebarTreeContextMenuVisibilitySpecification","../../../component/layout/sidebarView/tree/SidebarSearchKeywordProvider","../../../component/layout/sidebarView/predicate/doNotAcceptEmptyElementsIfResourceDoNotMatch","../../../common/enum/automationDataNameAttributesEnum","../../../common/factory/addAutomationDataNameAttributeMixinFactory","../../../../util/eventBusFactory"],function(e,r,t){function o(e,r){e.register("presentationDesignerSidebarSearchKeywordProvider",new Q({service:e.get("presentationDesignerViewStateModelService")})),e.register("presentationDesignerMatchBySearchKeyword",new m({getSearchProperty:g,searchKeywordProvider:e.get("presentationDesignerSidebarSearchKeywordProvider")}));var t=new E({isItemSelected:e.get("presentationDesignerViewStateModelService").isPresentationSidebarItemSelected}),o=new V([e.get("baseTreeResourceConverter"),T,f,F]).convert,n=new N({searchKeywordProvider:e.get("presentationDesignerSidebarSearchKeywordProvider"),isExpanded:e.get("viewStateModelQueryService").isNodeExpanded,isCollapsed:e.get("viewStateModelQueryService").isNodeCollapsed}),i=new l({isExpanded:e.get("viewStateModelQueryService").isNodeExpanded,searchKeywordProvider:e.get("presentationDesignerSidebarSearchKeywordProvider")}),a=new V([A,n.process,x,e.get("js-sdk/src/commonSidebarTreeNodeConverter"),e.get("treeItemLabelProcessor").getNameAsLabel,t.process]).convert,s=new D({resourceMatch:!0,resourceOrChildrenMatch:e.get("presentationDesignerMatchBySearchKeyword").match,resourceJsonMatch:q,convertResourceNoChildren:new V([o,U,a]),convertChildrenMatch:i.match,convertResource:e.get("constantGroupMapBasedConverter"),comparator:e.get("comparatorByLabel"),postProcess:w}),d=new P({resourceMatch:I,resourceOrChildrenMatch:new O([e.get("presentationDesignerMatchBySearchKeyword").match,e.get("showDefaultSchemaInSidebarPredicate")]).match,resourceJsonMatch:q,convertResourceNoChildren:new V([o,G,a]),convertChildrenMatch:i.match,convertResource:e.get("resourceMapBasedConverter"),comparator:e.get("dataSourceComparator"),schemaLessDataSourceWithEmptyResolvedSchemaAttributeSpec:e.get("schemaLessDataSourceWithEmptyResolvedSchemaAttributeSpec"),postProcess:new y([w,H]).process});e.register("presentationItemsToTreeStructureConverter",new M({resourceMatch:!0,resourceOrChildrenMatch:e.get("presentationDesignerMatchBySearchKeyword").match,resourceJsonMatch:q,convertResourceNoChildren:new V([o,J,h,W,a]),convertChildrenMatch:i.match,convertResource:e.get("joinTreesMapBasedConverter"),comparator:e.get("dataSourceComparator"),postProcess:w})),e.register("schemaToPresentationDesignerTreeConverter",new C({clientDomainSchemaCalcFieldsService:e.get("clientDomainSchemaCalcFieldsService"),converter:new S({converters:[s,d,e.get("presentationItemsToTreeStructureConverter")],postProcess:w})})),e.register("presentationDesignerSidebarNestedTreeModel",new v([],{idGenerationStrategy:new b,pathSeparator:c.getRootUri(),nodeIdAttribute:"resourceId"})),e.register("presentationDesignerSidebarTreeDataProvider",new u({schemaToNestedTreeModelConverter:e.get("schemaToPresentationDesignerTreeConverter"),nestedTreeModel:e.get("presentationDesignerSidebarNestedTreeModel")}))}function n(e,r){var t=B.create({eventBus:e.get("presentationDesignerEventBus")});e.register("presentationDesignerSidebarContextMenuEventHandlers",a.extend({},t,e.get("createCalcFieldMenuEventHandler"),e.get("editCalcFieldMenuEventHandler"),e.get("removeCalcFieldMenuEventHandler")));var o=R.create([e.get("createConstantCalcFieldMenuOption"),e.get("editCalcFieldMenuOption"),e.get("removeCalcFieldMenuOption")]);e.register("presentationDesignerSidebarContextMenuOptionsProvider",o)}function i(e,r){e.register("presentationDesignerSidebarSearchEventBus",Y.create());var t=s.extend(X.create({config:p.create({eventBus:e.get("presentationDesignerSidebarSearchEventBus")}),dataNames:z.presentationDesigner.sidebarSearch}));e.register("presentationDesignerSidebarSearch",s.extend(d.create({search:t,data:e.get("presentationDesignerSidebarSearchStore").attributes}))),e.register("presentationDesignerSidebarTreeContextMenuVisibilitySpecification",new k({nestedTreeModel:e.get("presentationDesignerSidebarNestedTreeModel")}));var o=e.get("sidebarTreeDataProviderPromiseWrapper"),n=j.getTreeOptions({listItemHeight:r.list.listItemHeight,dataProvider:o(e.get("presentationDesignerSidebarTreeDataProvider").getData),sidebarTreeContextMenuVisibilitySpecification:e.get("presentationDesignerSidebarTreeContextMenuVisibilitySpecification"),presentationDesignerSidebarContextMenuEventHandlers:e.get("presentationDesignerSidebarContextMenuEventHandlers"),presentationDesignerSidebarContextMenuOptionsProvider:e.get("presentationDesignerSidebarContextMenuOptionsProvider"),sidebarTooltipOptionsFactory:e.get("sidebarTooltipOptionsFactory")});e.register("presentationDesignerSidebarTree",e.get("sidebarTreeFactory").create(n)),e.register("presentationDesignerSidebar",new L({data:e.get("presentationDesignerSidebarStore").attributes,tree:e.get("presentationDesignerSidebarTree"),template:K}))}var a=e("underscore"),s=e("vue"),c=e("../../../util/uriUtil"),d=e("../../../common/component/search/factory/searchVueWrapperConfigFactory"),p=e("../../../common/component/search/factory/searchVueConfigFactory"),u=e("../../../component/layout/sidebarView/tree/TreeListDataProvider"),m=e("../../../component/layout/sidebarView/predicate/MatchBySearchKeyword"),g=e("../../../component/layout/sidebarView/provider/getDefaultResourceSearchPropertyProvider"),l=e("../../../component/layout/sidebarView/predicate/DoNotSkipChildrenConversion"),v=e("../../../../util/nestedTreeModel/NestedTreeModel"),b=e("../../../util/AutoIdGenerationStrategyBasedOnEntityId"),y=e("../../../../util/CompositeProcessor"),S=e("../../../component/layout/sidebarView/converter/CompositeConcatenatingConverter"),D=e("../../../component/layout/sidebarView/converter/ConstantGroupTreeConverter"),C=e("../../../component/layout/sidebarView/converter/SchemaToDesignerTreeConverter"),h=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerAddParentIdSidebarConverter"),w=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerAddIndexSidebarConverter"),T=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerAddSourceConverter"),M=e("../../../component/layout/sidebarView/converter/JoinTreesTreeConverter"),P=e("../../../component/layout/sidebarView/converter/DataSourceTreeConverter"),V=e("../../../component/layout/sidebarView/converter/CompositeResourceConverter"),I=e("../../../component/designer/joinsDesigner/predicate/doNotAcceptTableReferencesUsedInJoins"),f=e("../../../component/layout/sidebarView/converter/processor/resourcesTreeItemIdProcessor"),x=e("../../../component/designer/presentationDesigner/sidebar/processor/presentationDesignerSidebarTreeItemResourceProcessor"),A=e("../../../component/layout/sidebarView/converter/processor/treeItemValueProcessor"),E=e("../../../component/layout/sidebarView/converter/processor/TreeItemSelectionProcessor"),F=e("../../../component/layout/sidebarView/converter/processor/treeItemCalcFieldParentIdProcessor"),N=e("../../../component/layout/sidebarView/converter/processor/TreeItemExpandedProcessor"),R=e("../../../component/layout/sidebarView/factory/contextMenu/menuOptionsProviderFactory"),B=e("../../../component/layout/sidebarView/factory/contextMenu/menuEventHandlerFactory/showContextMenuEventHandlerFactory"),O=e("../../../../util/predicate/CompositePredicate"),L=e("../../../component/layout/sidebarView/component/sidebarLayout/SidebarLayoutVueComponent"),K=e("text!../../../component/layout/sidebarView/component/sidebarLayout/template/sidebarLayoutVueTemplate.htm"),H=e("../../../common/converter/emptyProfileAttributeValuesToPlaceholderLabelConverter"),J=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerJoinsTreeAddDataIslandSourceIdConverter"),G=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerDataSourceResourcesTreeAddDataIslandSourceIdConverter"),U=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerConstantGroupsTreeAddDataIslandSourceIdConverter"),W=e("../../../component/designer/presentationDesigner/sidebar/converter/presentationDesignerIsJoinTreeItemConverter"),j=e("../../../component/designer/presentationDesigner/sidebar/factory/presentationDesignerSidebarTreeOptionsFactory"),k=e("../../../component/designer/presentationDesigner/sidebar/specification/PresentationDesignerSidebarTreeContextMenuVisibilitySpecification"),Q=e("../../../component/layout/sidebarView/tree/SidebarSearchKeywordProvider"),q=e("../../../component/layout/sidebarView/predicate/doNotAcceptEmptyElementsIfResourceDoNotMatch"),z=e("../../../common/enum/automationDataNameAttributesEnum"),X=e("../../../common/factory/addAutomationDataNameAttributeMixinFactory"),Y=e("../../../../util/eventBusFactory");t.exports=function(e,r){o(e,r),n(e,r),i(e,r)}});