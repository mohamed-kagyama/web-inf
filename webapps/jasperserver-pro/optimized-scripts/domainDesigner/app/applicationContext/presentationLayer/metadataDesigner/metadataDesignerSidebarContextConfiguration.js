/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","vue","underscore","../../../../util/predicate/CompositePredicate","../../../common/enum/automationDataNameAttributesEnum","../../../common/factory/addAutomationDataNameAttributeMixinFactory","../../../component/layout/sidebarView/factory/contextMenu/menuOptionsProviderFactory","../../../component/layout/sidebarView/factory/contextMenu/menuEventHandlerFactory/showContextMenuEventHandlerFactory","../../../util/uriUtil","../../../component/layout/sidebarView/converter/CompositeConcatenatingConverter","../../../component/layout/sidebarView/converter/converterMap/dataSourceConverterMap","../../../component/layout/sidebarView/converter/CompositeResourceConverter","../../../component/layout/sidebarView/converter/GenericMapBasedConverter","../../../component/layout/sidebarView/converter/DataSourceTreeConverter","../../../component/layout/sidebarView/converter/ConstantGroupTreeConverter","../../../component/layout/sidebarView/predicate/MatchBySearchKeyword","../../../component/designer/metadataDesigner/provider/getResourceNameOrSearchNameAsPropertyProvider","../../../component/layout/sidebarView/tree/TreeListDataProvider","../../../component/layout/sidebarView/tree/SidebarSearchKeywordProvider","../../../component/layout/sidebarView/component/sidebarLayout/SidebarLayoutVueComponent","text!../../../component/layout/sidebarView/component/sidebarLayout/template/sidebarLayoutVueTemplate.htm","../../../../util/nestedTreeModel/NestedTreeModel","../../../util/AutoIdGenerationStrategyBasedOnEntityId","../../../component/designer/metadataDesigner/treeDataProvider/processor/metadataDesignerSidebarTreeItemResourceProcessor","../../../component/layout/sidebarView/converter/processor/dataSourceTreeItemIdProcessor","../../../component/layout/sidebarView/converter/processor/TreeItemSelectionProcessor","../../../component/layout/sidebarView/converter/processor/TreeItemExpandedProcessor","../../../component/layout/sidebarView/converter/processor/treeItemCalcFieldParentIdProcessor","../../../component/layout/sidebarView/converter/processor/treeItemValueProcessor","../../../component/designer/metadataDesigner/sidebar/factory/MetadataDesignerSidebarTooltipOptionsFactory","../../../component/layout/sidebarView/converter/SchemaToDesignerTreeConverter","../../../component/designer/metadataDesigner/sidebar/factory/metadataDesignerSidebarTreeOptionsFactory","../../../component/designer/metadataDesigner/sidebar/specification/metadataDesignerSidebarTreeContextMenuVisibilitySpecification","../../../component/layout/sidebarView/converter/processor/treeItemIsEmptyDataSourceProcessor","../../../component/designer/metadataDesigner/treeDataProvider/processor/treeItemIsEmptyDataSourceGroupProcessor","../../../component/layout/sidebarView/predicate/doNotAcceptEmptyElementsIfResourceDoNotMatch","../../../component/layout/sidebarView/predicate/DoNotSkipChildrenConversion","../../../common/converter/emptyProfileAttributeValuesToPlaceholderLabelConverter","../../../common/component/search/factory/searchVueWrapperConfigFactory","../../../common/component/search/factory/searchVueConfigFactory","../../../../util/eventBusFactory"],function(e,t,r){function o(e,t){e.register("metadataDesignerSidebarSearchKeywordProvider",new M({service:e.get("metadataDesignerViewStateModelService")})),e.register("metadataDesignerMatchBySearchKeyword",new w({getSearchProperty:h,searchKeywordProvider:e.get("metadataDesignerSidebarSearchKeywordProvider")}));var r=new F({isItemSelected:e.get("metadataDesignerViewStateModelService").isSidebarItemSelected}),o=new x({searchKeywordProvider:e.get("metadataDesignerSidebarSearchKeywordProvider"),isExpanded:e.get("viewStateModelQueryService").isNodeExpanded,isCollapsed:e.get("viewStateModelQueryService").isNodeCollapsed}),a=new W({isExpanded:e.get("viewStateModelQueryService").isNodeExpanded,searchKeywordProvider:e.get("metadataDesignerSidebarSearchKeywordProvider")}),n=new y([e.get("baseTreeResourceConverter"),E,N]).convert,i=new y([O,o.process,f,R,K,e.get("js-sdk/src/commonSidebarTreeNodeConverter"),e.get("treeItemLabelProcessor").getSourceNameAsLabel,r.process]).convert,c=new D({resourceMatch:!0,resourceOrChildrenMatch:e.get("metadataDesignerMatchBySearchKeyword").match,resourceJsonMatch:G,convertResourceNoChildren:new y([n,i]),convertChildrenMatch:a.match,convertResource:e.get("constantGroupMapBasedConverter"),comparator:e.get("comparatorByLabel")}),d=new S({resourceMatch:!0,resourceOrChildrenMatch:new s([e.get("metadataDesignerMatchBySearchKeyword").match,e.get("showDefaultSchemaInSidebarPredicate")]).match,resourceJsonMatch:G,convertResourceNoChildren:new y([n,e.get("treeItemIsDerivedTableProcessor").process,i]),convertChildrenMatch:a.match,convertResource:new b({converterMap:g}),comparator:e.get("comparatorByLabel"),schemaLessDataSourceWithEmptyResolvedSchemaAttributeSpec:e.get("schemaLessDataSourceWithEmptyResolvedSchemaAttributeSpec"),postProcess:k});e.register("schemaToMetadataDesignerTreeConverter",new A({clientDomainSchemaCalcFieldsService:e.get("clientDomainSchemaCalcFieldsService"),converter:new v({converters:[c,d]})})),e.register("metadataDesignerSidebarNestedTreeModel",new P([],{idGenerationStrategy:new I,pathSeparator:l.getRootUri(),nodeIdAttribute:"resourceId"})),e.register("metadataDesignerSidebarTreeDataProvider",new C({schemaToNestedTreeModelConverter:e.get("schemaToMetadataDesignerTreeConverter"),nestedTreeModel:e.get("metadataDesignerSidebarNestedTreeModel")}))}function a(e,t){var r=u.create({eventBus:e.get("metadataDesignerEventBus")});e.register("metadataDesignerSidebarContextMenuEventHandlers",c.extend({},r,e.get("copyDerivedTableMenuEventHandler"),e.get("createDerivedTableMenuEventHandler"),e.get("editDerivedTableMenuEventHandler"),e.get("removeDerivedTableMenuEventHandler"),e.get("createCalcFieldMenuEventHandler"),e.get("editCalcFieldMenuEventHandler"),e.get("removeCalcFieldMenuEventHandler")));var o=p.create([e.get("copyDerivedTableMenuOption"),e.get("createDerivedTableMenuOption"),e.get("editDerivedTableMenuOption"),e.get("removeDerivedTableMenuOption"),e.get("createConstantCalcFieldMenuOption"),e.get("editCalcFieldMenuOption"),e.get("removeCalcFieldMenuOption")]);e.register("metadataDesignerSidebarContextMenuOptionsProvider",o)}function n(e,t){e.register("metadataDesignerSidebarSearchEventBus",J.create());var r=i.extend(m.create({config:U.create({eventBus:e.get("metadataDesignerSidebarSearchEventBus")}),dataNames:d.metadataDesigner.sidebarSearch}));e.register("metadataDesignerSidebarSearch",i.extend(Q.create({search:r,data:e.get("metadataDesignerSidebarSearchStore").attributes}))),e.register("metadataDesignerSidebarTooltipOptionsFactory",new B({tooltipOffset:t.tooltip.offset}));var o=e.get("sidebarTreeDataProviderPromiseWrapper"),a=L.getTreeOptions({listItemHeight:t.list.listItemHeight,dataProvider:o(e.get("metadataDesignerSidebarTreeDataProvider").getData),metadataDesignerSidebarTreeContextMenuVisibilitySpecification:H,metadataDesignerSidebarContextMenuOptionsProvider:e.get("metadataDesignerSidebarContextMenuOptionsProvider"),metadataDesignerSidebarTooltipOptionsFactory:e.get("metadataDesignerSidebarTooltipOptionsFactory"),metadataDesignerSidebarContextMenuEventHandlers:e.get("metadataDesignerSidebarContextMenuEventHandlers")});e.register("metadataDesignerSidebarTree",e.get("sidebarTreeFactory").create(a)),e.register("metadataDesignerSidebar",new T({data:e.get("metadataDesignerSidebarStore").attributes,tree:e.get("metadataDesignerSidebarTree"),template:V}))}var i=e("vue"),c=e("underscore"),s=e("../../../../util/predicate/CompositePredicate"),d=e("../../../common/enum/automationDataNameAttributesEnum"),m=e("../../../common/factory/addAutomationDataNameAttributeMixinFactory"),p=e("../../../component/layout/sidebarView/factory/contextMenu/menuOptionsProviderFactory"),u=e("../../../component/layout/sidebarView/factory/contextMenu/menuEventHandlerFactory/showContextMenuEventHandlerFactory"),l=e("../../../util/uriUtil"),v=e("../../../component/layout/sidebarView/converter/CompositeConcatenatingConverter"),g=e("../../../component/layout/sidebarView/converter/converterMap/dataSourceConverterMap"),y=e("../../../component/layout/sidebarView/converter/CompositeResourceConverter"),b=e("../../../component/layout/sidebarView/converter/GenericMapBasedConverter"),S=e("../../../component/layout/sidebarView/converter/DataSourceTreeConverter"),D=e("../../../component/layout/sidebarView/converter/ConstantGroupTreeConverter"),w=e("../../../component/layout/sidebarView/predicate/MatchBySearchKeyword"),h=e("../../../component/designer/metadataDesigner/provider/getResourceNameOrSearchNameAsPropertyProvider"),C=e("../../../component/layout/sidebarView/tree/TreeListDataProvider"),M=e("../../../component/layout/sidebarView/tree/SidebarSearchKeywordProvider"),T=e("../../../component/layout/sidebarView/component/sidebarLayout/SidebarLayoutVueComponent"),V=e("text!../../../component/layout/sidebarView/component/sidebarLayout/template/sidebarLayoutVueTemplate.htm"),P=e("../../../../util/nestedTreeModel/NestedTreeModel"),I=e("../../../util/AutoIdGenerationStrategyBasedOnEntityId"),f=e("../../../component/designer/metadataDesigner/treeDataProvider/processor/metadataDesignerSidebarTreeItemResourceProcessor"),E=e("../../../component/layout/sidebarView/converter/processor/dataSourceTreeItemIdProcessor"),F=e("../../../component/layout/sidebarView/converter/processor/TreeItemSelectionProcessor"),x=e("../../../component/layout/sidebarView/converter/processor/TreeItemExpandedProcessor"),N=e("../../../component/layout/sidebarView/converter/processor/treeItemCalcFieldParentIdProcessor"),O=e("../../../component/layout/sidebarView/converter/processor/treeItemValueProcessor"),B=e("../../../component/designer/metadataDesigner/sidebar/factory/MetadataDesignerSidebarTooltipOptionsFactory"),A=e("../../../component/layout/sidebarView/converter/SchemaToDesignerTreeConverter"),L=e("../../../component/designer/metadataDesigner/sidebar/factory/metadataDesignerSidebarTreeOptionsFactory"),H=e("../../../component/designer/metadataDesigner/sidebar/specification/metadataDesignerSidebarTreeContextMenuVisibilitySpecification"),R=e("../../../component/layout/sidebarView/converter/processor/treeItemIsEmptyDataSourceProcessor"),K=e("../../../component/designer/metadataDesigner/treeDataProvider/processor/treeItemIsEmptyDataSourceGroupProcessor"),G=e("../../../component/layout/sidebarView/predicate/doNotAcceptEmptyElementsIfResourceDoNotMatch"),W=e("../../../component/layout/sidebarView/predicate/DoNotSkipChildrenConversion"),k=e("../../../common/converter/emptyProfileAttributeValuesToPlaceholderLabelConverter"),Q=e("../../../common/component/search/factory/searchVueWrapperConfigFactory"),U=e("../../../common/component/search/factory/searchVueConfigFactory"),J=e("../../../../util/eventBusFactory");r.exports=function(e,t){o(e,t),a(e,t),n(e,t)}});