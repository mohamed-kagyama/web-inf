/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","vue","runtime_dependencies/js-sdk/src/components/dialog/Dialog","../../../common/component/validation/Validation","../../../common/component/inputErrorMessage/InputErrorMessageWithVisibility","../../../component/designer/calculatedFieldsDesigner/validator/CalculatedFieldsDesignerValidator","../../../component/designer/calculatedFieldsDesigner/store/CalculatedFieldsDesignerStore","../../../../util/eventBusFactory","../../../model/service/CalculatedFieldsDesignerViewStateModelService","../../../component/designer/calculatedFieldsDesigner/component/main/factory/calcFieldsDesignerViewFactory","../../../component/designer/calculatedFieldsDesigner/controller/CalculatedFieldsDesignerController","../../../component/designer/calculatedFieldsDesigner/controller/CalculatedFieldsAvailableItemsTreeController","../../../component/designer/calculatedFieldsDesigner/component/operators/calculatedFieldsDesignerOperatorsViewConfig","../../../component/designer/calculatedFieldsDesigner/provider/calculatedFieldsDesignerInitialExpandedNodesProvider","../../../common/component/actionButton/ActionButton","../../../component/designer/calculatedFieldsDesigner/component/expressionEditor/TextAreaExpressionEditor","../../../common/component/search/factory/searchVueConfigFactory","../../../common/factory/addAutomationDataNameAttributeMixinFactory","../../../common/enum/automationDataNameAttributesEnum","../../../component/dialog/confirmation/view/ConfirmationDialogView","bundle!CommonBundle","../../../common/vue/factory/viewAsVueComponentFactory","../../../common/converter/emptyProfileAttributeValuesToPlaceholderLabelConverter","../../../component/layout/sidebarView/predicate/DoNotSkipChildrenConversion","../../../component/layout/sidebarView/converter/processor/TreeItemExpandedProcessor","../../../component/layout/sidebarView/tree/plugin/SidebarTreeExpandCollapsePlugin","../../../component/designer/calculatedFieldsDesigner/provider/CalculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider","../../../component/designer/calculatedFieldsDesigner/controller/CalcFieldsDesignerTreeSelectionController","../../../component/designer/calculatedFieldsDesigner/controller/CalcFieldsDesignerSearchKeywordProvider","../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/converter/calcFieldsAddVariableNameProcessor","../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/converter/calcFieldsAvailableItemsTreeItemResourceProcessor","../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/factory/calcFieldsAvailableItemsTreeOptionsFactory","../../../component/layout/sidebarView/tree/TreeListDataProvider","../../../util/uriUtil","../../../util/AutoIdGenerationStrategyBasedOnEntityId","../../../../util/nestedTreeModel/NestedTreeModel","../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/converter/SchemaToCalcFieldsDesignerAvailableItemsTreeConverter","../../../component/layout/sidebarView/converter/CompositeConcatenatingConverter","../../../component/layout/sidebarView/converter/JoinTreesTreeConverter","../../../component/designer/joinsDesigner/predicate/doNotAcceptTableReferencesUsedInJoins","../../../../util/predicate/CompositePredicate","../../../component/layout/sidebarView/converter/DataSourceTreeConverter","../../../component/layout/sidebarView/converter/processor/treeItemValueProcessor","../../../component/layout/sidebarView/converter/processor/resourcesTreeItemIdProcessor","../../../component/layout/sidebarView/converter/CompositeResourceConverter","../../../component/layout/sidebarView/predicate/doNotAcceptEmptyElementsIfResourceDoNotMatch","../../../component/layout/sidebarView/converter/ConstantGroupTreeConverter","../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/predicate/matchByCalcFieldContext","../../../component/layout/sidebarView/predicate/MatchBySearchKeyword","../../../component/layout/sidebarView/provider/getDefaultResourceSearchPropertyProvider"],function(e,r,t){function o(e,r){e.register("calculatedFieldsDesignerEventBus",p.create()),e.register("calculatedFieldsDesignerViewStateModelService",new v({viewStateModel:e.get("viewStateModelReadOnlyFacade")})),e.register("calculatedFieldsDesignerStore",new u)}function a(e,r){e.register("calcFieldsDesignerSearchKeywordProvider",new R({store:e.get("calculatedFieldsDesignerStore")})),e.register("calculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider",new x({store:e.get("calculatedFieldsDesignerStore")}));var t=new re({getSearchProperty:te,searchKeywordProvider:e.get("calcFieldsDesignerSearchKeywordProvider")}),o=new z([ee,Y]).match;e.register("calculatedFieldsDesignerDoNotSkipChildrenConversion",new N({isExpanded:e.get("calculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider").isNodeExpanded,searchKeywordProvider:e.get("calcFieldsDesignerSearchKeywordProvider")}).match);var a=new M({isExpanded:e.get("calculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider").isNodeExpanded,isCollapsed:e.get("calculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider").isNodeCollapsed,searchKeywordProvider:e.get("calcFieldsDesignerSearchKeywordProvider")}),i=new X([e.get("baseTreeResourceConverter"),Q,K]).convert,n=new X([a.process,k,e.get("js-sdk/src/commonSidebarTreeNodeConverter"),e.get("treeItemLabelProcessor").getNameAsLabel,q]).convert,l=new Z({resourceMatch:!0,resourceOrChildrenMatch:t.match,resourceJsonMatch:o,convertChildrenMatch:e.get("calculatedFieldsDesignerDoNotSkipChildrenConversion"),convertResourceNoChildren:new X([i,n]),convertResource:e.get("constantGroupMapBasedConverter"),comparator:e.get("comparatorByLabel")}),c=new _({resourceMatch:new z([$]).match,resourceOrChildrenMatch:t.match,resourceJsonMatch:o,convertChildrenMatch:e.get("calculatedFieldsDesignerDoNotSkipChildrenConversion"),convertResourceNoChildren:new X([i,n]),convertResource:e.get("resourceMapBasedConverter"),comparator:e.get("dataSourceComparator"),schemaLessDataSourceWithEmptyResolvedSchemaAttributeSpec:e.get("schemaLessDataSourceWithEmptyResolvedSchemaAttributeSpec"),postProcess:P}),s=new H({resourceMatch:!0,resourceOrChildrenMatch:t.match,resourceJsonMatch:o,convertChildrenMatch:e.get("calculatedFieldsDesignerDoNotSkipChildrenConversion"),convertResourceNoChildren:new X([i,n]),convertResource:e.get("joinTreesMapBasedConverter"),comparator:e.get("dataSourceComparator")});e.register("calcFieldsAvailableItemsTreeConverter",new W({clientDomainSchemaCalcFieldsService:e.get("clientDomainSchemaCalcFieldsService"),calculatedFieldsDesignerViewStateModelService:e.get("calculatedFieldsDesignerViewStateModelService"),converter:new j({converters:[l,c,s]})})),e.register("calcFieldsAvailableItemsNestedTreeModel",new U([],{idGenerationStrategy:new J,pathSeparator:G.getRootUri(),nodeIdAttribute:"resourceId"})),e.register("calcFieldsAvailableItemsTreeDataProvider",new O({schemaToNestedTreeModelConverter:e.get("calcFieldsAvailableItemsTreeConverter"),nestedTreeModel:e.get("calcFieldsAvailableItemsNestedTreeModel")}))}function i(e,r){var t=e.get("sidebarTreeDataProviderPromiseWrapper"),o=L.getTreeOptions({listItemHeight:r.list.listItemHeight,dataProvider:t(e.get("calcFieldsAvailableItemsTreeDataProvider").getData)});e.register("calcFieldsAvailableItemsTree",e.get("sidebarTreeFactory").create(o))}function n(e,r){e.register("saveConfirmationDialog",new V({yesLabel:E["button.ok"],noLabel:E["button.no"],dataNameAttrs:I.calculatedFieldsDesigner.confirmationDialog}));var t=A.create({view:e.get("calcFieldsAvailableItemsTree")}),o=y.create({eventBus:e.get("calculatedFieldsDesignerEventBus")}),a=T.create({config:o,dataNames:I.calculatedFieldsDesigner.search}),i=T.create({config:h,dataNames:I.calculatedFieldsDesigner.expressionEditor}),n=T.create({config:b,dataNames:I.calculatedFieldsDesigner.operators}),l=D.create({actionButton:S,Validation:d,InputErrorMessage:g,AvailableItemsTree:t,operatorsViewConfig:c.extend(n),searchViewConfig:c.extend(a),textAreaExpressionEditorViewConfig:c.extend(i)}),m=c.extend(T.create({config:l,dataNames:I.calculatedFieldsDesigner.dialog}));e.register("calculatedFieldsDesignerView",new m({calculatedFieldsDesignerEventBus:e.get("calculatedFieldsDesignerEventBus"),data:e.get("calculatedFieldsDesignerStore").attributes})),e.register("calculatedFieldsDesignerDialog",new s({zIndex:r.calculatedFieldsDesigner.zIndex,el:e.get("calculatedFieldsDesignerView").$mount().$el}))}function l(e,r){e.register("calculatedFieldsDesignerValidator",new m({validationService:e.get("validationServiceWrappedWithDoNotHandle400ErrorsNotification"),store:e.get("calculatedFieldsDesignerStore"),calculatedFieldsDesignerViewStateModelService:e.get("calculatedFieldsDesignerViewStateModelService"),clientDomainSchemaCalcFieldsService:e.get("clientDomainSchemaCalcFieldsService"),domainSchemaGranularSpecs:e.get("domainSchemaGranularSpecs")})),e.register("calculatedFieldsDesignerController",new F({storeChangeEventBus:e.get("storeChangeEventBus"),saveConfirmationDialog:e.get("saveConfirmationDialog"),dialog:e.get("calculatedFieldsDesignerDialog"),calculatedFieldsDesignerValidator:e.get("calculatedFieldsDesignerValidator"),store:e.get("calculatedFieldsDesignerStore"),applicationDispatcherEventBus:e.get("applicationDispatcherEventBus"),calculatedFieldsDesignerEventBus:e.get("calculatedFieldsDesignerEventBus"),calculatedFieldsDesignerViewStateModelService:e.get("calculatedFieldsDesignerViewStateModelService"),clientDomainSchemaCalcFieldsService:e.get("clientDomainSchemaCalcFieldsService"),expressionBulkUpdateService:e.get("expressionBulkUpdateService")})),e.register("calculatedFieldsAvailableItemsTreeController",new C({treeDataProvider:e.get("calcFieldsAvailableItemsTreeDataProvider"),storeChangeEventBus:e.get("storeChangeEventBus"),calculatedFieldsDesignerViewStateModelService:e.get("calculatedFieldsDesignerViewStateModelService"),calculatedFieldsDesignerInitialExpandedNodesProvider:w,tree:e.get("calcFieldsAvailableItemsTree"),calculatedFieldsDesignerEventBus:e.get("calculatedFieldsDesignerEventBus"),store:e.get("calculatedFieldsDesignerStore")})),e.register("calcFieldsDesignerTreeSelectionController",new B({calculatedFieldsDesignerEventBus:e.get("calculatedFieldsDesignerEventBus"),tree:e.get("calcFieldsAvailableItemsTree"),nestedTreeModel:e.get("calcFieldsAvailableItemsNestedTreeModel")})),e.register("calculatedFieldsDesignerSidebarTreeExpandCollapsePlugin",new f({eventBus:e.get("calculatedFieldsDesignerEventBus"),el:e.get("calcFieldsAvailableItemsTree").$el,expandedNodesProvider:e.get("calculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider"),searchKeywordProvider:e.get("calcFieldsDesignerSearchKeywordProvider"),expandNodeEvent:"availableItemsTree:expand",collapseNodeEvent:"availableItemsTree:collapse"}))}var c=e("vue"),s=e("runtime_dependencies/js-sdk/src/components/dialog/Dialog"),d=e("../../../common/component/validation/Validation"),g=e("../../../common/component/inputErrorMessage/InputErrorMessageWithVisibility"),m=e("../../../component/designer/calculatedFieldsDesigner/validator/CalculatedFieldsDesignerValidator"),u=e("../../../component/designer/calculatedFieldsDesigner/store/CalculatedFieldsDesignerStore"),p=e("../../../../util/eventBusFactory"),v=e("../../../model/service/CalculatedFieldsDesignerViewStateModelService"),D=e("../../../component/designer/calculatedFieldsDesigner/component/main/factory/calcFieldsDesignerViewFactory"),F=e("../../../component/designer/calculatedFieldsDesigner/controller/CalculatedFieldsDesignerController"),C=e("../../../component/designer/calculatedFieldsDesigner/controller/CalculatedFieldsAvailableItemsTreeController"),b=e("../../../component/designer/calculatedFieldsDesigner/component/operators/calculatedFieldsDesignerOperatorsViewConfig"),w=e("../../../component/designer/calculatedFieldsDesigner/provider/calculatedFieldsDesignerInitialExpandedNodesProvider"),S=e("../../../common/component/actionButton/ActionButton"),h=e("../../../component/designer/calculatedFieldsDesigner/component/expressionEditor/TextAreaExpressionEditor"),y=e("../../../common/component/search/factory/searchVueConfigFactory"),T=e("../../../common/factory/addAutomationDataNameAttributeMixinFactory"),I=e("../../../common/enum/automationDataNameAttributesEnum"),V=e("../../../component/dialog/confirmation/view/ConfirmationDialogView"),E=e("bundle!CommonBundle"),A=e("../../../common/vue/factory/viewAsVueComponentFactory"),P=e("../../../common/converter/emptyProfileAttributeValuesToPlaceholderLabelConverter"),N=e("../../../component/layout/sidebarView/predicate/DoNotSkipChildrenConversion"),M=e("../../../component/layout/sidebarView/converter/processor/TreeItemExpandedProcessor"),f=e("../../../component/layout/sidebarView/tree/plugin/SidebarTreeExpandCollapsePlugin"),x=e("../../../component/designer/calculatedFieldsDesigner/provider/CalculatedFieldsDesignerAvailableItemsTreeExpandedNodesProvider"),B=e("../../../component/designer/calculatedFieldsDesigner/controller/CalcFieldsDesignerTreeSelectionController"),R=e("../../../component/designer/calculatedFieldsDesigner/controller/CalcFieldsDesignerSearchKeywordProvider"),K=e("../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/converter/calcFieldsAddVariableNameProcessor"),k=e("../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/converter/calcFieldsAvailableItemsTreeItemResourceProcessor"),L=e("../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/factory/calcFieldsAvailableItemsTreeOptionsFactory"),O=e("../../../component/layout/sidebarView/tree/TreeListDataProvider"),G=e("../../../util/uriUtil"),J=e("../../../util/AutoIdGenerationStrategyBasedOnEntityId"),U=e("../../../../util/nestedTreeModel/NestedTreeModel"),W=e("../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/converter/SchemaToCalcFieldsDesignerAvailableItemsTreeConverter"),j=e("../../../component/layout/sidebarView/converter/CompositeConcatenatingConverter"),H=e("../../../component/layout/sidebarView/converter/JoinTreesTreeConverter"),$=e("../../../component/designer/joinsDesigner/predicate/doNotAcceptTableReferencesUsedInJoins"),z=e("../../../../util/predicate/CompositePredicate"),_=e("../../../component/layout/sidebarView/converter/DataSourceTreeConverter"),q=e("../../../component/layout/sidebarView/converter/processor/treeItemValueProcessor"),Q=e("../../../component/layout/sidebarView/converter/processor/resourcesTreeItemIdProcessor"),X=e("../../../component/layout/sidebarView/converter/CompositeResourceConverter"),Y=e("../../../component/layout/sidebarView/predicate/doNotAcceptEmptyElementsIfResourceDoNotMatch"),Z=e("../../../component/layout/sidebarView/converter/ConstantGroupTreeConverter"),ee=e("../../../component/designer/calculatedFieldsDesigner/component/availableItemsTree/predicate/matchByCalcFieldContext"),re=e("../../../component/layout/sidebarView/predicate/MatchBySearchKeyword"),te=e("../../../component/layout/sidebarView/provider/getDefaultResourceSearchPropertyProvider");t.exports=function(e,r){o(e,r),a(e,r),i(e,r),n(e,r),l(e,r)}});