/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","runtime_dependencies/jrs-ui/src/namespace/namespace","jquery","runtime_dependencies/jrs-ui/src/components/components.dialogs","../dialog/dialog.definitions","runtime_dependencies/js-sdk/src/jrs.configs"],function(e,n,o){var r=e("runtime_dependencies/jrs-ui/src/namespace/namespace"),t=r.JRS,s=e("jquery"),i=e("runtime_dependencies/jrs-ui/src/components/components.dialogs"),a=e("../dialog/dialog.definitions"),d=a.GeneratorPropertiesDialog,c=e("runtime_dependencies/js-sdk/src/jrs.configs");t.CreateReport=function(e,n){var o=null,r=function(e){return o||(o=new d({advUri:e,okHandler:t.CreateReport.showGeneratedReport,messages:n})),o};return{showGeneratedReport:function(n){var o="reportGenerator.html?action=displayTempReportUnit&advUri="+encodeURIComponent(n.sourceURI)+"&template="+encodeURIComponent(n.template||"")+"&generator="+encodeURIComponent(n.generator||"")+"&exportFormat=html";e.ajax(o,{type:"GET",dataType:"json",success:function(e,n,o){"OK"===e.status?window.location=e.data:i.errorPopup.show(e.data.msg)},error:function(e,n,o){i.errorPopup.show("Unknown Error")}})},selectADV:function(){r().show()},selectGenerator:function(e){r(e).show()}}}(s,c),s(function(){0===s("#ajaxbuffer").length&&s("body").append(s('<div id="ajaxbuffer" style="display:none"></div>'))}),o.exports=t.CreateReport});