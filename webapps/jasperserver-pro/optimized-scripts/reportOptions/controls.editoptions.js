/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","runtime_dependencies/jrs-ui/src/namespace/namespace","runtime_dependencies/jrs-ui/src/util/utils.common","underscore","jquery","runtime_dependencies/jrs-ui/src/controls/controls.controller"],function(e,n,t){var o=e("runtime_dependencies/jrs-ui/src/namespace/namespace"),r=o.JRS,i=e("runtime_dependencies/jrs-ui/src/util/utils.common"),s=i.addDataToForm,c=e("underscore"),l=e("jquery");e("runtime_dependencies/jrs-ui/src/controls/controls.controller"),r.EditOptions=function(e,n,t){return t.Base.extend({constructor:function(o,r){this.controlsController=new t.Controller({reportUri:r}),this.viewModel=this.controlsController.getViewModel(),this.controlsController.fetchAndSetInputControlsState();var i=e(o);i.on("click","button#done",n.bind(this.handleClick,this,i[0],"save")),i.on("click","button#cancel",n.bind(this.handleClick,this,i[0],"cancel"))},handleClick:function(e,t,o){o.preventDefault(),e.method="post",e._eventId.value=t,"cancel"==t?e.submit():"save"==t&&this.controlsController.validate().then(n.bind(function(n){n&&this.submitForm(e)},this))},submitForm:function(e){var n=this.viewModel.get("selection");n&&s(e,n),e.submit()}})}(l,c,r.Controls),t.exports=r.EditOptions});