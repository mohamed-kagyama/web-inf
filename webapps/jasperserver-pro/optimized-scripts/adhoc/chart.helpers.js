/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","prototype","./chart.ajax","../base/designer.base"],function(e,t,n){var r=e("prototype"),o=r.$,a=e("./chart.ajax"),i=e("../base/designer.base");a.canSaveReport=function(){return window.localContext.state.canSave},a.canSetMask=function(){return"NaN"!=window.localContext.state.dataTypes[a.getCurrentMeasure()]},a.draggerListener=function(e){e.preventDefault(),window.localContext.currentlyDragging=!0;var t={x:e.pointerX()-window.localContext.containerMovePosition.x,y:e.pointerY()-window.localContext.containerMovePosition.y};window.localContext.containerMovePosition={x:e.pointerX(),y:e.pointerY()};var n=parseInt(o("chartBorder").getStyle("width")),r=parseInt(o("chartBorder").getStyle("height")),a=Math.abs(n+t.x),i=Math.abs(r+t.y);o("chartBorder").setStyle({width:a+"px",height:i+"px"})},a.canMoveMeasureUp=function(){var e=!1;return window.selObjects[0]&&window.selObjects[0].index<window.localContext.state.measureNames.length-1&&(e=!0),e},a.canMoveMeasureDown=function(){var e=!1;return window.selObjects[0]&&window.selObjects[0].index&&window.selObjects[0].index>0&&(e=!0),e},a.supportsSeries=function(){return window.localContext.state.type!=a.PIE_CHART},a.isPie=function(){return window.localContext.state.type==a.PIE_CHART},a.isBar=function(){return window.localContext.state.type==a.BAR_CHART},a.isArea=function(){return window.localContext.state.type==a.AREA_CHART},a.isLine=function(){return window.localContext.state.type==a.LINE_CHART},a.isType=function(e){return window.localContext.state.type==e},a.isMeasureNumeric=function(e){var t=0===arguments.length?a.getCurrentMeasure():e;return window.localContext.state.isNumeric[t]},a.isSelectedMeasureNumeric=function(){return window.isMeasureNumeric()},a.isDataType=function(e,t){var n=arguments.length<2?a.getCurrentMeasure():t;return window.localContext.state.dataTypes[n]==e},a.isMask=function(e,t){var n=arguments.length<2?a.getCurrentMeasure():t;return window.localContext.state.masks[n]==e},a.isFunctionSelected=function(e,t){return t=t||a.getCurrentMeasure(),window.localContext.state.summaryFunctions[t]==e},a.isContentPageSize=function(){return window.localContext.state.paperSize==a.CONTENT_PAGE_SIZE},a.isInLegendArea=function(e,t){var n=o("chartBorder").cumulativeOffset(),r=o("chartBorder").cumulativeScrollOffset(),a={left:n[0]+r[0],top:n[1]+r[1]},i={left:a.left+window.localContext.state.legendLeft,top:a.top+window.localContext.state.legendTop};return e<i.left+window.localContext.state.legendWidth+20&&e>=i.left-20&&t<i.top+window.localContext.state.legendHeight+20&&t>=i.top-20},a.getChartWidth=function(){return o("chartBorder").getWidth()},a.getChartHeight=function(){return o("chartBorder").getHeight()},a.getHasMargins=function(){return window.localContext.state.hasMargins},a.getTitleHeight=function(){var e=o("titleCaption");return e?e.getHeight():0},a.getTitleBottom=function(){var e=window.getTitleHeight();return 0===e?e:e+o("titleCaption").positionedOffset()[1]},a.canAddAsMeasure=function(){var e=window.selObjects.length>1;return!window.localContext.state.hasMeasures&&!e||window.localContext.state.seriesEnabled&&a.supportsSeries()},a.selectedMeasureShowsSummaryOptions=function(){return!!window.localContext.state.measureNames[a.getCurrentMeasure()]},a.canReplaceMeasure=function(){if(1==window.selObjects.length){var e,t=i.getSelectedObject();return!!t&&(e=t.isParent(),window.localContext.state.hasMeasures&&(!window.localContext.state.seriesEnabled||!a.supportsSeries())&&!e)}return!1},a.canAddAsGroup=function(e){if(window.selObjects[0]&&"measuresTree"==window.selObjects[0].parent.treeId)return!1;if(1==window.selObjects.length){var t,n=i.getSelectedObject();return!!n&&(t=n.isParent(),(e||!window.localContext.state.hasGroup)&&!t&&!window.adhocDesigner.isPercentOfParentCalcSelected(n))}return!1},a.canReplaceGroup=function(){if(window.selObjects[0]&&"measuresTree"==window.selObjects[0].parent.treeId)return!1;if(1==window.selObjects.length){var e,t=i.getSelectedObject();return!!t&&(e=t.isParent(),window.localContext.state.hasGroup&&!e&&!window.adhocDesigner.isPercentOfParentCalcSelected(t))}return!1},n.exports=a});