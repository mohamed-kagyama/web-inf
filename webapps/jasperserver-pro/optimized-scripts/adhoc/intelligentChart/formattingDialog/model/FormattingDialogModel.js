/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","backbone","runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension","bundle!adhoc_messages","../view/appearanceTab/util/validators"],function(o,t,e){function a(o){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var n=o("underscore"),r=o("backbone"),l=o("runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension"),i=o("bundle!adhoc_messages"),s=o("../view/appearanceTab/util/validators"),u=r.Model.extend({validation:{xAxisStep:{xRegExpPattern:/^[0-9]+$/,min:1,msg:i.ADH_1214_ICHARTS_CHART_FORMAT_DIALOG_ERROR_ENTER_CORRECT_VALUE},yAxisStep:{xRegExpPattern:/^[0-9]+$/,min:1,msg:i.ADH_1214_ICHARTS_CHART_FORMAT_DIALOG_ERROR_ENTER_CORRECT_VALUE},xAxisRotation:{xRegExpPattern:/^[-0-9]+$/,range:[-90,90],msg:i.ADH_1214_ICHARTS_CHART_FORMAT_DIALOG_ERROR_ENTER_CORRECT_VALUE},yAxisRotation:{xRegExpPattern:/^[-0-9]+$/,range:[-90,90],msg:i.ADH_1214_ICHARTS_CHART_FORMAT_DIALOG_ERROR_ENTER_CORRECT_VALUE},legend:{oneOf:["bottom","left","right","top","none"],msg:i.ADH_1214_ICHARTS_CHART_FORMAT_DIALOG_ERROR_ENTER_CORRECT_VALUE}},formattingOptions:["xAxisStep","yAxisStep","xAxisRotation","yAxisRotation","legend","legendBorder","showDataPoints","showScatterLine","showSingleMeasuresLabels","showMeasureOnValueAxis","autoScaleFonts","gaugesLayout","gaugesMinValue","gaugesMaxValue","gaugesDecimalPlaces","gaugesSuffixLabel","gaugeStopColor1Value","gaugeStopColor2Value","gaugeStopColor3Value","gaugeStopColor4Value","gaugeStopColor1Color","gaugeStopColor2Color","gaugeStopColor3Color","gaugeStopColor4Color"],defaults:{gaugeStopColor1Value:.2,gaugeStopColor2Value:.5,gaugeStopColor3Value:.7,gaugeStopColor4Value:1,gaugeStopColor1Color:"#33a4ff",gaugeStopColor2Color:"#33a4ff",gaugeStopColor3Color:"#33a4ff",gaugeStopColor4Color:"#33a4ff"},initialize:function(o,t){this.callUpdateState=t.updateState,this.on("invalid",function(o,t){}),this.on("change",function(o,t){this.modelChanged=!0})},set:function(o,t,e){var n={};return"object"===a(o)?(n=o,e=t):n[o]=t,n=this._convertAttrsToInternalStructure(n),r.Model.prototype.set.call(this,n,e)},_convertAttrsToInternalStructure:function(o){var t,e,a;for(o=n.clone(o),t=1;t<=4;t++)e="color".concat(t,"Stop"),a="gaugeStopColor".concat(t,"Value"),o[e]&&(o[a]=o[e],delete o[e]);if(!n.isUndefined(o.gaugeStopColors)){if(n.isArray(o.gaugeStopColors))for(t=0;t<o.gaugeStopColors.length;t++)o["gaugeStopColor".concat(t+1,"Color")]=o.gaugeStopColors[t];delete o.gaugeStopColors}for(t=1;t<=4;t++)n.isUndefined(o["gaugeStopColor".concat(t,"Color")])&&(o["gaugeStopColor".concat(t,"Color")]=this.defaults["gaugeStopColor".concat(t,"Color")]);return o},_convertAttrsFromInternalStructure:function(o){var t,e,a;for(o=n.clone(o),o.gaugeStopColors=[],t=1;t<=4;t++)o.gaugeStopColors.push(o["gaugeStopColor".concat(t,"Color")]),delete o["gaugeStopColor".concat(t,"Color")],e="gaugeStopColor".concat(t,"Value"),a="color".concat(t,"Stop"),o[a]=o[e],delete o[e];return o},parse:function(o){var t={};return n.each(this.formattingOptions,function(e){t[e]=o[e]}),t},applyModel:function(){this.modelChanged&&(this.callUpdateState(this._convertAttrsFromInternalStructure(this.attributes)),this._savedAttributes=this.attributes,this.modelChanged=!1)},rollbackChangesAfterApply:function(o){this._savedAttributes&&(this.set(o||this._savedAttributes,{silent:!0}),this.applyModel())}});n.extend(u.prototype,l.mixin),n.extend(u.prototype,{isValid:function(){return!(s.validateGaugesProps(this.attributes).size>0)&&l.mixin.isValid.apply(this,arguments)}}),e.exports=u});