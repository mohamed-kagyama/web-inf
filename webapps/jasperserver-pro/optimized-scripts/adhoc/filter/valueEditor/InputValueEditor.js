/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","jquery","runtime_dependencies/js-sdk/src/jrs.configs","./AbstractValueEditor"],function(e,t,n){var r=e("underscore"),o=e("jquery"),s=e("runtime_dependencies/js-sdk/src/jrs.configs"),i=e("./AbstractValueEditor");n.exports=i.extend({inputSelector:"input[type='text']",events:function(){var e={};return e["change "+this.inputSelector]="onChange",e},registerEvents:function(){this.listenTo(this.model,"change:"+this.modelVariableName,this.render)},onChange:function(){var e=o(this.$(this.inputSelector)[0]),t=this.convert(e.val());this.setValue(t)},serializeModel:function(){var e=this.model.toJSON();return e.value=this._replaceValue(e.value),e},_replaceValue:function(e){return e===s.inputControlsConstants.NULL_SUBSTITUTION_VALUE&&(e=""),!r.isString(e)||e.toLowerCase()!==s.inputControlsConstants.NULL_SUBSTITUTION_VALUE.toLowerCase()+"_corrupted"&&e.toLowerCase()!==s.inputControlsConstants.NULL_SUBSTITUTION_LABEL.toLowerCase()+"_corrupted"||(e=e.split("_corrupted")[0]),e},_basicValueConverter:function(e){return e.toLowerCase()!==s.inputControlsConstants.NULL_SUBSTITUTION_VALUE.toLowerCase()&&e.toLowerCase()!==s.inputControlsConstants.NULL_SUBSTITUTION_LABEL.toLowerCase()||(e+="_corrupted"),""===e&&(e=s.inputControlsConstants.NULL_SUBSTITUTION_VALUE),e}})});