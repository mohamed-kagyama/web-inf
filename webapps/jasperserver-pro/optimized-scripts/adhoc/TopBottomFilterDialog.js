/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","bundle!adhoc_messages","runtime_dependencies/js-sdk/src/common/component/dialog/DialogWithModelInputValidation","text!./template/topBottomFilterDialogTemplate.htm"],function(t,o,e){var i=t("underscore"),n=t("bundle!adhoc_messages"),s=t("runtime_dependencies/js-sdk/src/common/component/dialog/DialogWithModelInputValidation"),l=t("text!./template/topBottomFilterDialogTemplate.htm");e.exports=s.extend({constructor:function(t){t||(t={}),this.options=t;var o=this.extendModel(this.options.model);s.prototype.constructor.call(this,{modal:!0,model:o,resizable:!1,dataNameAttribute:"topBottomFilterDialog",title:n["top"===o.get("type")?"ADH_1236_DIALOG_TITLE_TOP":"ADH_1236_DIALOG_TITLE_BOTTOM"],content:i.template(l,{i18n:n,model:i.extend({},o.attributes)}),buttons:[{label:n.ADH_1236_DIALOG_OK,action:"ok",primary:!0},{label:n.ADH_1236_DIALOG_CANCEL,action:"cancel",primary:!1}]}),this.on("button:ok",i.bind(this._onOk,this)),this.on("button:cancel",i.bind(this._onCancel,this))},extendModel:function(t){return t.validation=i.extend({},{limit:[{required:!0,msg:n.ADH_1236_DIALOG_ERROR_AMOUNT_REQUIRED},{range:[1,999],msg:n.ADH_1236_DIALOG_ERROR_AMOUNT_RANGE}]}),t},open:function(){this.bindValidation(),s.prototype.open.apply(this,arguments)},close:function(){this.unbindValidation(),this.clearValidationErrors(),s.prototype.close.apply(this,arguments)},_onCancel:function(){this.close(),this.remove()},_onOk:function(){this.model.isValid(!0)&&(this.close(),this.remove(),this.options.ok&&this.options.ok(this.model.toJSON()))}})});