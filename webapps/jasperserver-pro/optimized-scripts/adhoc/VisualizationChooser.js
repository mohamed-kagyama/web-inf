/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","runtime_dependencies/bi-adhoc/src/adhoc/api/visualChooser/VisualizationTypesController","runtime_dependencies/bi-adhoc/src/adhoc/api/visualChooser/VisualChooserDialog"],function(e,i,a){var s=e("runtime_dependencies/bi-adhoc/src/adhoc/api/visualChooser/VisualizationTypesController"),o=e("runtime_dependencies/bi-adhoc/src/adhoc/api/visualChooser/VisualChooserDialog"),n=function(){return window.localContext.mode.indexOf("olap")>=0},t={init:function(){this.visualizationTypesManager||(this.visualizationTypesManager=new s),this._dialog||(this._dialog=new o,this._dialog.on("visualizationTypeChange",this._onVisalizationTypeChange,this),this._updateDisabledTypes())},show:function(){this._dialog.prevChartType=this._dialog.getSelectedType().selectedType,this._updateDisabledTypes(),this._dialog.open()},hide:function(){this._dialog.close()},setSelectedType:function(e){var i=this.visualizationTypesManager.getTypeByLegacyAdhocName(e);i&&this._dialog.setSelectedType(i.name)},_onVisalizationTypeChange:function(e){var i=e.legacyAdhocType;"table"===i||"crosstab"===i?window.adhocDesigner.onDataModeSelector(this._resolveOLAPDataModes(i)):window.adhocDesigner.onDataModeSelector(this._resolveOLAPDataModes(window.designerBase.ICHART),i)},_resolveOLAPDataModes:function(e){var i=e;return n()&&(i="table"===e||"crosstab"===e?window.designerBase.OLAP_CROSSTAB:window.designerBase.OLAP_ICHART),i},_updateDisabledTypes:function(){var e=[];n()&&(e=e.concat(["Table","TimeSeriesLine","TimeSeriesSpline","TimeSeriesArea","TimeSeriesAreaSpline","TimeSeriesHeatMap","DualMeasureTreeMap","TreeMap","OneParentTreeMap","Gauge","MultiLevelGauge","ArcGauge"])),this._dialog.setDisabledTypes(e)}};a.exports=t});