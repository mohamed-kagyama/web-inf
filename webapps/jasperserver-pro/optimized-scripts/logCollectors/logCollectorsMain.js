/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define("runtime_dependencies/jrs-ui/src/administer/administer.base",["require","exports","module","prototype","underscore","../core/core.ajax","../core/core.ajax.utils"],function(e,t,i){var n=e("prototype"),o=n.Template,s=e("underscore"),r=e("../core/core.ajax"),a=r.ajaxTargettedUpdate,l=r.AjaxRequester,c=e("../core/core.ajax.utils"),d=c.baseErrorHandler;void 0===window.Administer&&(window.Administer={}),window.Administer=s.extend({_messages:{},urlContext:null,getMessage:function(e,t){var i=this._messages[e];return i?new o(i).evaluate(t||{}):""},menuActions:{"p#navAnalysisOptions":function(){return window.Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return window.Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return window.Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return window.Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return window.Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return window.Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return window.Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return window.Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return window.Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return window.Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return window.Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,i){a(e,{postData:t,callback:i,mode:l.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):d(e)}},window.Administer),i.exports=window.Administer}),define("runtime_dependencies/jrs-ui/src/administer/administer.logging",["require","exports","module","prototype","../core/core.layout","../util/utils.common","./administer.base","../components/components.webHelp","jquery"],function(e,t,i){var n=e("prototype"),o=n.$,s=e("../core/core.layout"),r=e("../util/utils.common"),a=r.matchAny,l=e("./administer.base"),c=e("../components/components.webHelp"),d=e("jquery"),u={initialize:function(){s.resizeOnClient("serverSettingsMenu","settings"),c.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var e=this;o("display").observe("click",function(e){var t=e.element(),i=a(t,[s.BUTTON_PATTERN],!0);if(i)for(var n in l.menuActions)if(i.match(n)&&!i.up("li").hasClassName("selected"))return void(document.location=l.menuActions[n]())}),d(".js-logSettings select").on("change",function(t){var i,n=d(t.target);i=n.hasClass("js-newLogger")?d("#newLoggerName").val():n.parent().prev().text(),e._setLevel(encodeURIComponent(i),n.val())})},_setLevel:function(e,t){document.location="log_settings.html?logger="+e+"&level="+t}};void 0===e&&document.observe("dom:loaded",function(){u.initialize()}),i.exports=u}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(e,i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(i,n)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.4.0",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,t.bind(function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this))},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){this.getCommands(e).instances.push(t)},clearCommands:function(e){this.getCommands(e).instances=[]}}),i}(),n.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var i=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,i):this.storage.addCommand(e,i)},_executeCommands:function(e,i,n){var o=this.storage.getCommands(e);t.each(o.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n,t),n.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){if(this.hasHandler(e))return this.getHandler(e).apply(this,t.rest(arguments))}})}(n,t),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(i){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var o="vent"===e?"on":"setHandler";t.each(i,t.bind(function(i,s){this[e][o](s,t.bind(i,n))},this))}}}),n}(),n.radio=function(e,t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],t.bind(function(e){t.each(n[e],t.bind(function(t){this[e][t]=o(this,e,t)},this))},this))}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},o=function(e,i,n){return function(o){var s=e._getChannel(o)[i];return s[n].apply(s,t.rest(arguments))}};return new i}(n,t),e.Wreqr}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(e,i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(i,n)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(0,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.marionette",["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(i,n){return e.Marionette=e.Mn=t(e,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");require("backbone.wreqr"),require("backbone.babysitter");module.exports=t(e,i,n)}else e.Marionette=e.Mn=t(e,e.Backbone,e._)}(this,function(e,t,i){"use strict";var n=e.Marionette,o=e.Mn,s=t.Marionette={};s.VERSION="2.3.2",s.noConflict=function(){return e.Marionette=n,e.Mn=o,this},s.Deferred=t.$.Deferred,s.extend=t.Model.extend,s.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},s.getOption=function(e,t){if(e&&t)return e.options&&void 0!==e.options[t]?e.options[t]:e[t]},s.proxyGetOption=function(e){return s.getOption(this,e)},s._getValue=function(e,t,n){return i.isFunction(e)&&(n=n||[],e=e.apply(t,n)),e},s.normalizeMethods=function(e){return i.reduce(e,function(e,t,n){return i.isFunction(t)||(t=this[t]),t&&(e[n]=t),e},{},this)},s.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},s.normalizeUIKeys=function(e,t){return i.reduce(e,function(e,i,n){return e[s.normalizeUIString(n,t)]=i,e},{})},s.normalizeUIValues=function(e,t){return i.each(e,function(n,o){i.isString(n)&&(e[o]=s.normalizeUIString(n,t))}),e},s.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),o=[e].concat(i.toArray(arguments));return i[n].apply(i,o)}})};var r=s.deprecate=function(e,t){i.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||r._cache[e]||(r._warn("Deprecation warning: "+e),r._cache[e]=!0)};r._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},r._cache={},s._triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi;return function(n,o,s){var r=arguments.length<3;r&&(s=o,o=s[0]);var a,l="on"+o.replace(t,e),c=n[l];return i.isFunction(c)&&(a=c.apply(n,r?i.rest(s):s)),i.isFunction(n.trigger)&&(r+s.length>1?n.trigger.apply(n,r?s:[o].concat(i.rest(s,0))):n.trigger(o)),a}}(),s.triggerMethod=function(e){return s._triggerMethod(this,arguments)},s.triggerMethodOn=function(e){return(i.isFunction(e.triggerMethod)?e.triggerMethod:s.triggerMethod).apply(e,i.rest(arguments))},s.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,o()}function n(){e._isRendered=!0,o()}function o(){e._isShown&&e._isRendered&&s.isNodeAttached(e.el)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}e.on({show:t,render:n})},function(e){function t(t,n,o,s){var r=s.split(/\s+/);i.each(r,function(i){var s=t[i];if(!s)throw new e.Error('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(n,o,s)})}function n(e,t,i,n){e.listenTo(t,i,n)}function o(e,t,n,o){var s=o.split(/\s+/);i.each(s,function(i){var o=e[i];e.stopListening(t,n,o)})}function s(e,t,i,n){e.stopListening(t,i,n)}function r(t,n,o,s,r){if(n&&o){if(!i.isObject(o))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});o=e._getValue(o,t),i.each(o,function(e,o){i.isFunction(e)?s(t,n,o,e):r(t,n,o,e)})}}e.bindEntityEvents=function(e,i,o){r(e,i,o,n,t)},e.unbindEntityEvents=function(e,t,i){r(e,t,i,s,o)},e.proxyBindEntityEvents=function(t,i){return e.bindEntityEvents(this,t,i)},e.proxyUnbindEntityEvents=function(t,i){return e.unbindEntityEvents(this,t,i)}}(s);var a=["description","fileName","lineNumber","name","message","number"];return s.Error=s.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+s.VERSION+"/",constructor:function(e,t){i.isObject(e)?(t=e,e=t.message):t||(t={});var n=Error.call(this,e);i.extend(this,i.pick(n,a),i.pick(t,a)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,s.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),s.Error.extend=s.extend,s.Callbacks=function(){this._deferred=s.Deferred(),this._callbacks=[]},i.extend(s.Callbacks.prototype,{add:function(e,t){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),n.then(function(i){t&&(i.context=t),e.call(i.context,i.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=s.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),s.Controller=function(e){this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},s.Controller.extend=s.extend,i.extend(s.Controller.prototype,t.Events,{destroy:function(){return s._triggerMethod(this,"before:destroy",arguments),s._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:s.triggerMethod,getOption:s.proxyGetOption}),s.Object=function(e){this.options=i.extend({},i.result(this,"options"),e),this.initialize.apply(this,arguments)},s.Object.extend=s.extend,i.extend(s.Object.prototype,t.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:s.triggerMethod,getOption:s.proxyGetOption,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),s.Region=s.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new s.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),s.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e);var i=t||{},n=e!==this.currentView,o=!!i.preventDestroy,r=!!i.forceShow,a=!!this.currentView,l=n&&!o,c=n||r;if(a&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,l?this.empty():a&&c&&this.currentView.off("destroy",this.empty,this),c){e.once("destroy",this.empty,this),e.render(),e._parent=this,a&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),s.triggerMethodOn(e,"before:show",e,this,t),a&&this.triggerMethod("swapOut",this.currentView,this,t);var d=s.isNodeAttached(this.el),u=[],h=i.triggerBeforeAttach||this.triggerBeforeAttach,p=i.triggerAttach||this.triggerAttach;return d&&h&&(u=this._displayedViews(e),this._triggerAttach(u,"before:")),this.attachHtml(e),this.currentView=e,d&&p&&(u=this._displayedViews(e),this._triggerAttach(u)),a&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),s.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var n=(t||"")+"attach";i.each(e,function(e){s.triggerMethodOn(e,n,e,this)},this)},_displayedViews:function(e){return i.union([e],i.result(e,"_getNestedViews")||[])},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new s.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new s.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new s.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,s._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(e)return e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&(e.remove(),e.isDestroyed=!0)},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(i.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(i.isFunction(e))return this._buildRegionFromRegionClass(e);throw new s.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var n=e.regionClass||t,o=i.omit(e,"selector","regionClass");return e.selector&&!o.el&&(o.el=e.selector),new n(o)},_buildRegionFromRegionClass:function(e){return new e}}),s.RegionManager=s.Controller.extend({constructor:function(e){this._regions={},s.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=s._getValue(e,this,arguments),i.reduce(e,function(e,n,o){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,t)),e[o]=this.addRegion(o,n),e},{},this)},addRegion:function(e,t){var i;return i=t instanceof s.Region?t:s.Region.buildRegion(t,s.Region),this.triggerMethod("before:add:region",e,i),i._parent=this,this._store(e,i),this.triggerMethod("add:region",e,i),i},get:function(e){return this._regions[e]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return i.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return i.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),s.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),s.actAsCollection(s.RegionManager.prototype,"_regions"),s.TemplateCache=function(e){this.templateId=e},i.extend(s.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new s.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i.toArray(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(s.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var i=t.$(e).html();if(!i||0===i.length)throw new s.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return i},compileTemplate:function(e){return i.template(e)}}),s.Renderer={render:function(e,t){if(!e)throw new s.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(i.isFunction(e)?e:s.TemplateCache.get(e))(t)}},s.View=t.View.extend({isDestroyed:!1,constructor:function(e){i.bindAll(this,"render"),e=s._getValue(e,this),this.options=i.extend({},i.result(this,"options"),e),this._behaviors=s.Behaviors(this),t.View.apply(this,arguments),s.MonitorDOMRefresh(this),this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,i.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=s._getValue(t,this),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"_uiBindings");return s.normalizeUIKeys(e,t||i.result(this,"ui"))},normalizeUIValues:function(e){var t=i.result(this,"ui"),n=i.result(this,"_uiBindings");return s.normalizeUIValues(e,n||t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(e,function(e,t,i){return e[i]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var n=s._getValue(e||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(e)&&(this.events=n);var o={},r=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),l=i.result(this,"behaviorTriggers")||{};i.extend(o,r,n,a,l),t.View.prototype.delegateEvents.call(this,o)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new s.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var e=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),i.invoke(this._behaviors,"destroy",e),this}},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=i.isObject(e),n=i.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),o=t?n.event:e;return function(e){e&&(e.preventDefault&&n.preventDefault&&e.preventDefault(),e.stopPropagation&&n.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){for(var e=s._triggerMethod,t=e(this,arguments),i=this._behaviors,n=0,o=i&&i.length;n<o;n++)e(i[n],arguments);return t},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?i.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},normalizeMethods:s.normalizeMethods,getOption:s.proxyGetOption,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),s.ItemView=s.View.extend({constructor:function(){s.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(!1!==e){if(!e)throw new s.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.serializeData();t=this.mixinTemplateHelpers(t);var i=s.Renderer.render(e,t,this);return this.attachElContent(i),this}},attachElContent:function(e){return this.$el.html(e),this}}),s.CollectionView=s.View.extend({childViewEventPrefix:"childview",constructor:function(e){var t=e||{};i.isUndefined(this.sort)&&(this.sort=!!i.isUndefined(t.sort)||t.sort),this.once("render",this._initialEvents),this._initChildViewStorage(),s.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){s.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),i=this.collection.indexOf(e);this.addChild(e,t,i)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(e,t){var i=this.children.findByModel(e);return!i||i._index!==t},this)&&this.resortView()},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getChildView(t),this.addChild(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new t.Model;this.addEmptyView(i,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this,e,this._emptyViewIndex));var o=this.buildChildView(e,t,n);o._parent=this,this.proxyChildEvents(o),this._isShown&&s.triggerMethodOn(o,"before:show"),this.children.add(o),this.renderChildView(o,this._emptyViewIndex),this._isShown&&s.triggerMethodOn(o,"show")},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new s.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,i){var n=this.getOption("childViewOptions");n=s._getValue(n,this,[e,i]);var o=this.buildChildView(e,t,n);return this._updateIndices(o,!0,i),this._addChildView(o,i),o._parent=this,o},_updateIndices:function(e,t,i){this.sort&&(t&&(e._index=i),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1)}))},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&s.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,n){return new t(i.extend({model:e},n))},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,i)||e._insertAfter(t)},_insertBefore:function(e,t){var i;return this.sort&&t<this.children.length-1&&(i=this.children.find(function(e){return e._index===t+1})),!!i&&(i.$el.before(e.el),!0)},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),s.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var e=this.children.map(i.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var n=i.toArray(arguments),o=n[0],s=this.normalizeMethods(i.result(this,"childEvents"));n[0]=t+":"+o,n.splice(1,0,e),void 0!==s&&i.isFunction(s[o])&&s[o].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)},_getImmediateChildren:function(){return i.values(this.children._views)}}),s.CompositeView=s.CollectionView.extend({constructor:function(){s.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){return this.getOption("childView")||this.constructor},serializeData:function(){
var e={};return this.model&&(e=i.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&s.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),i=s.Renderer.render(t,e,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){this.getChildViewContainer(e).append(t)},_insertAfter:function(e){this.getChildViewContainer(this,e).append(e.el)},getChildViewContainer:function(e,t){if("$childViewContainer"in e)return e.$childViewContainer;var i,n=s.getOption(e,"childViewContainer");if(n){var o=s._getValue(n,e);if(i="@"===o.charAt(0)&&e.ui?e.ui[o.substr(4)]:e.$(o),i.length<=0)throw new s.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else i=e.$el;return e.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),s.LayoutView=s.ItemView.extend({regionClass:s.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),s.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),s.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),s.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=s._getValue(this.regions,this,[e])||{};var n=this.getOption.call(e,"regions");n=s._getValue(n,this,[e]),i.extend(t,n),t=this.normalizeUIValues(t),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new s.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),s.Behavior=s.Object.extend({constructor:function(e,t){this.view=t,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,e),s.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),s.Behaviors=function(e,t){function i(e,n){return t.isObject(e.behaviors)?(n=i.parseBehaviors(e,n||t.result(e,"behaviors")),i.wrap(e,n,t.keys(s)),n):{}}function n(e,i){this._view=e,this._viewUI=t.result(e,"ui"),this._behaviors=i,this._triggers={}}var o=/^(\S+)\s*(.*)$/,s={behaviorTriggers:function(e,t){return new n(this,t).buildBehaviorTriggers()},behaviorEvents:function(i,n){var s={},r=this._uiBindings||t.result(this,"ui");return t.each(n,function(i,n){var a={},l=t.clone(t.result(i,"events"))||{},c=i._uiBindings||t.result(i,"ui"),d=t.extend({},r,c);l=e.normalizeUIKeys(l,d);var u=0;t.each(l,function(e,s){var r=s.match(o),l=r[1]+"."+[this.cid,n,u++," "].join(""),c=r[2],d=l+c,h=t.isFunction(e)?e:i[e];a[d]=t.bind(h,i)},this),s=t.extend(s,a)},this),s}};return t.extend(i,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e._getValue(i.behaviorsLookup,this,[t,n])[n]},parseBehaviors:function(e,n){return t.chain(n).map(function(n,o){var s=i.getBehaviorClass(n,o),r=new s(n,e);return[r].concat(i.parseBehaviors(e,t.result(r,"behaviors")))}).flatten().value()},wrap:function(e,i,n){t.each(n,function(n){e[n]=t.partial(s[n],e[n],i)})}}),t.extend(n.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var o=t.extend({},this._viewUI,t.result(i,"ui")),s=t.clone(t.result(i,"triggers"))||{};s=e.normalizeUIKeys(s,o),t.each(s,t.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(e,t,i,n){var o=n.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[o]=this._view._buildViewTrigger(i)}}),i}(s,i),s.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[e];this.onRoute(e,n,t)}},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,n){var o=e[n];if(!o)throw new s.Error('Method "'+n+'" was not found on the controller');this.route(t,n,i.bind(o,e))},getOption:s.proxyGetOption,triggerMethod:s.triggerMethod,bindEntityEvents:s.proxyBindEntityEvents,unbindEntityEvents:s.proxyUnbindEntityEvents}),s.Application=s.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new s.Callbacks,this.submodules={},i.extend(this,e),this._initChannel(),s.Object.call(this,e)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=s.Module.getClass(t),o=i.toArray(arguments);return o.unshift(this),n.create.apply(n,o)},getRegionManager:function(){return new s.RegionManager},_initializeRegions:function(e){var t=i.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var n=s.getOption(e,"regions");return i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){s._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,s._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){s._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],s._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),s.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,i.isFunction(this.initialize)&&this.initialize(e,t,this.options)},s.Module.extend=s.extend,i.extend(s.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var o=i.flatten([this,this.app,t,s,t.$,i,n]);e.apply(this,o)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new s.Callbacks,this._finalizerCallbacks=new s.Callbacks},triggerMethod:s.triggerMethod}),i.extend(s.Module,{create:function(e,t,n){var o=e,s=i.rest(arguments,3);t=t.split(".");var r=t.length,a=[];return a[r-1]=n,i.each(t,function(t,i){var r=o;o=this._getModule(r,t,e,n),this._addModuleDefinition(r,o,a[i],s)},this),o},_getModule:function(e,t,n,o,s){var r=i.extend({},o),a=this.getClass(o),l=e[t];return l||(l=new a(t,n,r),e[t]=l,e.submodules[t]=l),l},getClass:function(e){var t=s.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var o=this._getDefine(i),s=this._getStartWithParent(i,t);o&&t.addDefinition(o,n),this._addStartWithParent(e,t,s)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof s.Module?(n=t.constructor.prototype.startWithParent,!!i.isUndefined(n)||n):!i.isObject(e)||(n=e.startWithParent,!!i.isUndefined(n)||n)},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof s.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),s}),define("text!runtime_dependencies/js-sdk/src/common/component/dialog/template/loadingDialogTemplate.htm",[],function(){return'<div class="panel dialog loading overlay moveable centered_horz centered_vert {{- additionalCssClasses }}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content ">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n\n        <div class="body">\n            <p class="message">{{- i18n[\'dialog.overlay.loading\'] }}<b class="percents"></b></p>\n            <button class="button action up">\n                <span class="wrap">{{- i18n[\'button.cancel\'] }}</span>\n                <span class="icon"></span>\n            </button>\n        </div>\n\n    </div>\n</div>'}),define("runtime_dependencies/js-sdk/src/common/component/dialog/LoadingDialog",["require","exports","module","underscore","./Dialog","text!./template/loadingDialogTemplate.htm","bundle!CommonBundle"],function(e,t,i){var n=e("underscore"),o=e("./Dialog"),s=e("text!./template/loadingDialogTemplate.htm"),r=e("bundle!CommonBundle");i.exports=o.extend({events:n.extend({},o.prototype.events,{"click button":"cancel"}),el:function(){return this.template({title:this.title,additionalCssClasses:this.additionalCssClasses,i18n:r})},constructor:function(e){this.options=e||{},o.prototype.constructor.call(this,{modal:!0,additionalCssClasses:this.options.additionalCssClasses,template:s,title:this.options.title||r["dialog.overlay.title"]}),this.options.showProgress&&(this.progress=n.bind(function(e){return 0===arguments.length?+this.$(".percents").text():this.$(".percents").text(e+"%")},this),this.on("open",n.bind(this.progress,this,0)))},initialize:function(){o.prototype.initialize.apply(this,arguments),this.options.cancellable?this.on("button:cancel",this.close):this.$("button").hide()},cancel:function(){this.trigger("button:cancel",this)}})}),function(e){"object"==typeof exports?module.exports=e(require("backbone"),require("underscore")):"function"==typeof define&&define.amd&&define("backbone-validation",["backbone","underscore"],e)}(function(e,t){return e.Validation=function(t){"use strict";var i={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},n={formatLabel:function(e,t){return c[i.labelFormatter](e,t)},format:function(){var e=Array.prototype.slice.call(arguments);return e.shift().replace(/\{(\d+)\}/g,function(t,i){return void 0!==e[i]?e[i]:t})}},o=function(i,n,s){return n=n||{},s=s||"",t.each(i,function(t,r){i.hasOwnProperty(r)&&(t&&"object"==typeof t&&!(t instanceof Array||t instanceof Date||t instanceof RegExp||t instanceof e.Model||t instanceof e.Collection)?o(t,n,s+r+"."):n[s+r]=t)}),n},s=function(){var e=function(e){return t.reduce(t.keys(t.result(e,"validation")||{}),function(e,t){return e[t]=void 0,e},{})},s=function(e,i){var n=e.validation?t.result(e,"validation")[i]||{}:{};return(t.isFunction(n)||t.isString(n))&&(n={fn:n}),t.isArray(n)||(n=[n]),t.reduce(n,function(e,i){return t.each(t.without(t.keys(i),"msg"),function(t){e.push({fn:d[t],val:i[t],msg:i.msg})}),e},[])},a=function(e,i,o,r){return t.reduce(s(e,i),function(s,a){var l=t.extend({},n,d),c=a.fn.call(l,o,i,a.val,e,r);return!1!==c&&!1!==s&&(c&&!s?t.result(a,"msg")||c:s)},"")},l=function(e,i){var n,s={},r=!0,l=t.clone(i),c=o(i);return t.each(c,function(t,i){(n=a(e,i,t,l))&&(s[i]=n,r=!1)}),{invalidAttrs:s,isValid:r}},c=function(i,n){return{preValidate:function(e,i){var n,o=this,s={};return t.isObject(e)?(t.each(e,function(e,t){(n=o.preValidate(t,e))&&(s[t]=n)}),t.isEmpty(s)?void 0:s):a(this,e,i,t.extend({},this.attributes))},isValid:function(e){var i=o(this.attributes);return t.isString(e)?!a(this,e,i[e],t.extend({},this.attributes)):t.isArray(e)?t.reduce(e,function(e,n){return e&&!a(this,n,i[n],t.extend({},this.attributes))},!0,this):(!0===e&&this.validate(),!this.validation||this._isValid)},validate:function(s,r){var a=this,c=!s,d=t.extend({},n,r),u=e(a),h=t.extend({},u,a.attributes,s),p=o(s||h),m=l(a,h);if(a._isValid=m.isValid,t.each(u,function(e,t){m.invalidAttrs.hasOwnProperty(t)||d.valid(i,t,d.selector)}),t.each(u,function(e,t){var n=m.invalidAttrs.hasOwnProperty(t),o=p.hasOwnProperty(t);n&&(o||c)&&d.invalid(i,t,m.invalidAttrs[t],d.selector)}),t.defer(function(){a.trigger("validated",a._isValid,a,m.invalidAttrs),a.trigger("validated:"+(a._isValid?"valid":"invalid"),a,m.invalidAttrs)}),!d.forceUpdate&&t.intersection(t.keys(m.invalidAttrs),t.keys(p)).length>0)return m.invalidAttrs}}},u=function(e,i,n){t.extend(i,c(e,n))},h=function(e){delete e.validate,delete e.preValidate,delete e.isValid},p=function(e){u(this.view,e,this.options)},m=function(e){h(e)};return{version:"0.9.1",configure:function(e){t.extend(i,e)},bind:function(e,n){n=t.extend({},i,r,n);var o=n.model||e.model,s=n.collection||e.collection;if(void 0===o&&void 0===s)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";o?u(e,o,n):s&&(s.each(function(t){u(e,t,n)}),s.bind("add",p,{view:e,options:n}),s.bind("remove",m))},unbind:function(e,i){i=t.extend({},i);var n=i.model||e.model,o=i.collection||e.collection;n?h(n):o&&(o.each(function(e){h(e)}),o.unbind("add",p),o.unbind("remove",m))},mixin:c(null,i)}}(),r=s.callbacks={valid:function(e,t,i){e.$("["+i+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,i,n){e.$("["+n+'~="'+t+'"]').addClass("invalid").attr("data-error",i)}},a=s.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},l=s.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},c=s.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(e,t){return t.labels&&t.labels[e]||c.sentenceCase(e,t)}},d=s.validators=function(){var e=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,i=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(i,"")},i=function(e){return t.isNumber(e)||t.isString(e)&&e.match(a.number)},n=function(i){return!(t.isNull(i)||t.isUndefined(i)||t.isString(i)&&""===e(i)||t.isArray(i)&&t.isEmpty(i))};return{fn:function(e,i,n,o,s){return t.isString(n)&&(n=o[n]),n.call(o,e,i,s)},required:function(e,i,o,s,r){var a=t.isFunction(o)?o.call(s,e,i,r):o;return!(!a&&!n(e))&&(a&&!n(e)?this.format(l.required,this.formatLabel(i,s)):void 0)},acceptance:function(e,i,n,o){if("true"!==e&&(!t.isBoolean(e)||!1===e))return this.format(l.acceptance,this.formatLabel(i,o))},min:function(e,t,n,o){if(!i(e)||e<n)return this.format(l.min,this.formatLabel(t,o),n)},max:function(e,t,n,o){if(!i(e)||e>n)return this.format(l.max,this.formatLabel(t,o),n)},range:function(e,t,n,o){if(!i(e)||e<n[0]||e>n[1])return this.format(l.range,this.formatLabel(t,o),n[0],n[1])},length:function(e,i,n,o){if(!t.isString(e)||e.length!==n)return this.format(l.length,this.formatLabel(i,o),n)},minLength:function(e,i,n,o){if(!t.isString(e)||e.length<n)return this.format(l.minLength,this.formatLabel(i,o),n)},maxLength:function(e,i,n,o){if(!t.isString(e)||e.length>n)return this.format(l.maxLength,this.formatLabel(i,o),n)},rangeLength:function(e,i,n,o){if(!t.isString(e)||e.length<n[0]||e.length>n[1])return this.format(l.rangeLength,this.formatLabel(i,o),n[0],n[1])},oneOf:function(e,i,n,o){if(!t.include(n,e))return this.format(l.oneOf,this.formatLabel(i,o),n.join(", "))},equalTo:function(e,t,i,n,o){if(e!==o[i])return this.format(l.equalTo,this.formatLabel(t,n),this.formatLabel(i,n))},pattern:function(e,t,i,o){if(!n(e)||!e.toString().match(a[i]||i))return this.format(l[i]||l.inlinePattern,this.formatLabel(t,o),i)}}}();return t.each(d,function(e,i){d[i]=t.bind(d[i],t.extend({},n,d))}),s}(t),e.Validation}),define("runtime_dependencies/js-sdk/src/common/util/parse/NumberUtils",["require","exports","module","underscore"],function(e,t,i){var n=e("underscore"),o=function(e){function t(e){return"."===e?e="\\.":" "===e&&(e="\\s"),e}e=e||{},this.DECIMAL_SEPARATOR=e.decimalSeparator||".",this.GROUPING_SEPARATOR=e.groupingSeparator||",",this.decimalSeparator=t(this.DECIMAL_SEPARATOR),this.groupingSeparator=t(this.GROUPING_SEPARATOR),this.DECIMAL_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*("+this.decimalSeparator+"[0-9]+)?|[1-9]{1}[0-9]{0,}("+this.decimalSeparator+"[0-9]+)?|0("+this.decimalSeparator+"[0-9]+)?)$"),this.INTEGER_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*|[1-9]{1}[0-9]{0,}|0)$")},s=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER+1:9007199254740992,r=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER-1:-9007199254740992;o.prototype.number_format=function(e,t,i,n){e=(e+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+e)?+e:0,s=isFinite(+t)?Math.abs(t):0,r=void 0===n?",":n,a=void 0===i?".":i,l=(s?function(e,t){var i=Math.pow(10,t);return""+(Math.round(e*i)/i).toFixed(t)}(o,s):""+Math.round(o)).split(".");return l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,r)),(l[1]||"").length<s&&(l[1]=l[1]||"",l[1]+=new Array(s-l[1].length+1).join("0")),l.join(a)},o.prototype.isInt=function(e){return this.isNumberInt(e)||this.isStringInt(e)},o.prototype.isNumberInt=function(e){return n.isNumber(e)&&!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY&&(e===+e&&e===(0|e)||e%1==0)},o.prototype.isStringInt=function(e){return n.isString(e)&&this.INTEGER_NUMBER_PATTERN.test(e)},o.prototype.isInt32=function(e){return this.isInt(e)&&this.parseNumber(e)>=-2147483648&&this.parseNumber(e)<=2147483647},o.prototype.isDecimal=function(e){return n.isNumber(e)&&!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY||n.isString(e)&&this.DECIMAL_NUMBER_PATTERN.test(e)},o.prototype.parseNumber=function(e){if(n.isNumber(e))return e;if(n.isString(e)&&this.DECIMAL_NUMBER_PATTERN.test(e)){e=e.replace(new RegExp(this.groupingSeparator,"g"),"").replace(new RegExp(this.decimalSeparator,"g"),".");var t=1*e;return t>=s||t<=r?(window.console&&window.console.warn(e+" is out of the ["+(r+1)+", "+(s-1)+"] bounds. Parsing results may be corrupted. Use string representation instead. For more details see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number."),!1):t}},o.prototype.formatNumber=function(e,t){t=t||{};var i=e.toString().split(".")[1],o=i?i.length:0;n.isUndefined(t.decimalPlacesAmount)||(o=t.decimalPlacesAmount);try{return this.number_format(e,o,t.decimalSeparator||this.DECIMAL_SEPARATOR,t.groupingSeparator||this.GROUPING_SEPARATOR)}catch(t){return e.toString()}},o.prototype.MaxRange=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER+1:9007199254740992,o.prototype.MinRange=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER-1:-9007199254740992,i.exports=o}),define("runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension",["require","exports","module","backbone-validation","underscore","../util/parse/NumberUtils"],function(e,t,i){var n=e("backbone-validation"),o=e("underscore"),s=e("../util/parse/NumberUtils"),r=new s,a=n.mixin.validate;n.mixin.validate=function(e,t){t||(t={});var i=this;return a.call(this,e,o.extend({valid:function(e,t){i.trigger("validate:"+t,i,t)},invalid:function(e,t,n){i.trigger("validate:"+t,i,t,n)}},t))},o.extend(n.validators,{doesNotContainSymbols:function(e,t,i){if(new RegExp("["+i+"]","g").test(e))return"Attribute '"+t+"' contains forbidden symbols"},integerNumber:function(e){if(!r.isNumberInt(e))return"Value is not a valid integer number"},type:function(e,t,i){function n(e){var t;return"string"==e?t=o.isString:"number"===e?t=o.isNumber:"object"===e?t=o.isObject:"boolean"===e?t=o.isBoolean:"null"===e?t=o.isNull:"undefined"===e&&(t=o.isUndefined),t}if(o.isArray(i)||(i=[i]),!i.some(function(t){return n(t)(e)}))return"'{attr}' is not {type}".replace("{attr}",t).replace("'{type}'",i.join(" "))},url:function(e){if(!/(http|https):\/\/.*\..*./.test(e))return"Value is not a valid url"},hexColor:function(e){if(!/^#[0-9a-f]{3,6}$/i.test(e))return"Value is not a valid hex color"},xRegExpPattern:function(e,t,i,n){if(!i.test(e))return"Value does not match pattern"},startsWithLetter:function(e,t,i,n){if(!e.substr(0,1).match(/[A-Za-z]/))return"Value should start with letter"},containsOnlyWordCharacters:function(e,t,i,n){if(e.search(/\W/)>=0)return"Value should contain only word characters (letters, digits and underscore)"},arrayMinLength:function(e,t,i,n){if(o.isArray(e)&&e.length<i)return"Array length is less than "+i}}),i.exports=n}),define("logCollectors/enum/collectorStatusEnum",["require","exports","module"],function(e,t,i){i.exports={RUNNING:"RUNNING",SHUTTING_DOWN:"SHUTTING_DOWN",STOPPED:"STOPPED"}}),define("logCollectors/model/LogCollectorModel",["require","exports","module","underscore","runtime_dependencies/js-sdk/src/jrs.configs","bundle!all","../enum/collectorStatusEnum","runtime_dependencies/js-sdk/src/common/model/BaseModel","runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension","settings!globalConfiguration"],function(e,t,i){var n=e("underscore"),o=e("runtime_dependencies/js-sdk/src/jrs.configs"),s=e("bundle!all"),r=e("../enum/collectorStatusEnum"),a=e("runtime_dependencies/js-sdk/src/common/model/BaseModel"),l=e("runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension"),c=e("settings!globalConfiguration"),d=c.resourceIdNotSupportedSymbols.slice(1,c.resourceIdNotSupportedSymbols.length-1),u=a.extend({urlRoot:o.contextPath+"/rest_v2/diagnostic/collectors/",defaults:{id:null,name:"",status:"",verbosity:"LOW",filterBy:{userId:"",resource:{uri:"",includeDataSnapshot:!1}}},validation:{name:[{required:!0,msg:s["logCollectors.form.validation.specifyCollectorName"]},{maxLength:30,msg:s["logCollectors.form.validation.too.long.name"]},{doesNotContainSymbols:d,msg:s["logCollectors.form.validation.invalid.chars.name"]}],resourceUri:function(e,t,i){if(!0===i.includeDataSnapshot&&!e)return s["logCollectors.form.validation.specifyResourceUri"]}},constructor:function(e,t){a.prototype.constructor.apply(this,arguments)},initialize:function(e,t){this.options=t},parse:function(e){return e.userId=e.filterBy.userId||"",e.resourceUri="",e.filterBy.resource&&(e.resourceUri=e.filterBy.resource.uri||""),e.name=e.name||e.id,e.includeDataSnapshot=!1,e.filterBy.resource&&(e.includeDataSnapshot=!0===e.filterBy.resource.includeDataSnapshot||"true"===e.filterBy.resource.includeDataSnapshot),delete e.filterBy,e},toJSON:function(){var e=n.cloneDeep(this.attributes);return e.filterBy={userId:e.userId,resource:{uri:e.resourceUri,includeDataSnapshot:!0===e.includeDataSnapshot?"true":"false"}},this.isNew()&&(delete e.id,delete e.status),delete e.userId,delete e.resourceUri,delete e.includeDataSnapshot,e},sendStopSignal:function(){if(this.isInRunningMode()){var e=this.get("status");this.set({status:r.STOPPED},{silent:!0});var t=this.save();return this.set({status:e},{silent:!0}),t}},isInRunningMode:function(){return this.get("status").toLowerCase()===r.RUNNING.toLowerCase()},isInShuttingDownMode:function(){return this.get("status").toLowerCase()===r.SHUTTING_DOWN.toLowerCase()},isInStoppedMode:function(){return this.get("status").toLowerCase()===r.STOPPED.toLowerCase()}});n.extend(u.prototype,l.mixin),i.exports=u}),define("runtime_dependencies/bi-repository/src/bi/repository/enum/repositoryResourceTypes",["require","exports","module"],function(e,t,i){i.exports={RESOURCE_LOOKUP:"resourceLookup",DASHBOARD:"dashboard",LEGACY_DASHBOARD:"legacyDashboard",REPORT_UNIT:"reportUnit",TOPIC:"topic",ADHOC_DATA_VIEW:"adhocDataView",FILE:"file",BUNDLE_FILE:"bundleFile",SECURITY_FILE:"securityFile",FOLDER:"folder",SECURE_FILE:"secureFile",PROP:"prop",ACCESS_GRANT_SCHEMA:"accessGrantSchema",DATA_TYPE:"dataType",JDBC_DATA_SOURCE:"jdbcDataSource",AWS_DATA_SOURCE:"awsDataSource",AZURE_SQL_DATA_SOURCE:"azureSqlDataSource",JNDI_DATA_SOURCE:"jndiJdbcDataSource",VIRTUAL_DATA_SOURCE:"virtualDataSource",CUSTOM_DATA_SOURCE:"customDataSource",BEAN_DATA_SOURCE:"beanDataSource",XMLA_CONNECTION:"xmlaConnection",LIST_OF_VALUES:"listOfValues",REPORT_OPTIONS:"reportOptions",QUERY:"query",OLAP_UNIT:"olapUnit",DOMAIN_TOPIC:"domainTopic",DOMAIN:"domain",SEMANTIC_LAYER_DATA_SOURCE:"semanticLayerDataSource",SECURE_MONDRIAN_CONNECTION:"secureMondrianConnection",MONDRIAN_XMLA_DEFINITION:"mondrianXmlaDefinition",MONDRIAN_CONNECTION:"mondrianConnection",INPUT_CONTROL:"inputControl",ORGANIZATION:"organization",OLAP_CUBE:"olapCube"}}),define("runtime_dependencies/js-sdk/src/common/component/panel/trait/collapsiblePanelTrait",["require","exports","module","underscore","jquery","./abstractPanelTrait"],function(e,t,i){function n(e,t){!t&&e.stopPropagation(),this.onCollapseControlPressed?this.onCollapseControlPressed(e):this.toggleCollapsedState()}function o(){this.$collapser&&this.$collapser.off("mousedown"),this.$el&&this.$el.find(this.expandOnDblClickSelector).off("dblclick")}var s=e("underscore"),r=e("jquery"),a=e("./abstractPanelTrait");i.exports=s.extend({},a,{onConstructor:function(e){this.collapserClass=e.collapserClass||"buttonIconToggle",this.collapserSelector=e.collapserSelector||".buttonIconToggle",this.collapsiblePanelClass=e.collapsiblePanelClass||"collapsiblePanel",this.expandOnDblClickSelector=e.expandOnDblClickSelector||"> p:first",this.allowEventPropagation=!!e.allowMouseDownEventPropagation,this.onCollapseControlPressed=e.onCollapseControlPressed},beforeSetElement:function(){o.call(this)},afterSetElement:function(){this.$el.addClass(this.collapsiblePanelClass),this.$collapser=this.$(this.collapserSelector),this.$collapser.length||(this.$collapser=r("<button></button>").addClass(this.collapserClass),this.$("> .header").prepend(this.$collapser)),this.$collapser.on("mousedown",s.bind(n,this,this.allowEventPropagation)),this.$el.find(this.expandOnDblClickSelector).on("dblclick",s.bind(n,this))},onRemove:function(){o.call(this)}})
}),define("runtime_dependencies/js-sdk/src/common/component/tree/trait/addToSelectionModelTrait",["require","exports","module","underscore","../../list/model/ScalableListModel"],function(e,t,i){var n=e("underscore"),o=e("../../list/model/ScalableListModel");i.exports={afterFetchComplete:function(e,t){o.prototype.afterFetchComplete.apply(this,arguments);var i,s;n.each(e,function(e,t){e.addToSelection&&(e.selected=!0,i=e.value,s=this.get("bufferStartIndex")+t,this.selectionContains&&!this.selectionContains(i,s)&&this.addValueToSelection(i,s),delete e.addToSelection)},this)}}}),define("runtime_dependencies/js-sdk/src/common/component/tree/dataprovider/DataProviderWithSearchCache",["require","exports","module","underscore","jquery"],function(e,t,i){var n=e("underscore"),o=e("jquery"),s=function(e){n.bindAll(this,"getData"),e=e||{},this.dataCache=[],this.dataCacheTotal=null,this.dataCachePages=[],this.pageSize=e.pageSize||999,this.criteriaKey=e.searchKey||"criteria",this.maxSearchCacheSize=e.maxSearchCacheSize||50,this.getDataByCriteriaHolder={},this.criteriaValuesCache=[],this.controlGetTotal=void 0!==e.controlGetTotal&&e.controlGetTotal,this.dataConverter=e.dataConverter,this.saveLastCriteria=void 0!==e.saveLastCriteria&&e.saveLastCriteria,this.lastCriteria=null,this.serialRequestsDelay=void 0!==e.serialRequestsDelay?e.serialRequestsDelay:50,this.serialRequestsDelayedPromise=null,this.request=e.request};n.extend(s.prototype,{getData:function(e){if(e=e||{},n.isEmpty(this.criteriaValuesCache)||void 0===e[this.criteriaKey]&&(e[this.criteriaKey]=n.first(this.criteriaValuesCache)),e[this.criteriaKey])return this._getDataByCriteria(e[this.criteriaKey])(e);if(void 0===e[this.criteriaKey]&&this.saveLastCriteria&&this.lastCriteria)return this._getDataByCriteria(this.lastCriteria)(e);this.lastCriteria=null,this.criteriaValuesCache=[];var t=o.Deferred(),i=this._getPagesToLoad(e);return i?this._requestData(e,i,t):this._resolveDeferredUsingDataFromCache(t,e),t.promise()},clear:function(){this.dataCache=[],this.dataCacheTotal=null,this.dataCachePages=[],this.getDataByCriteriaHolder={},this.criteriaValuesCache=[],this.lastCriteria=null},_requestData:function(e,t,i){var o=(t[t.length-1]-t[0]+1)*this.pageSize,s=n.extend({},e,{offset:t[0]*this.pageSize,limit:o});this.controlGetTotal&&(s.skipGetTotal=!0),o>=2147483647/this.pageSize*this.pageSize&&delete s.limit,this.controlGetTotal&&"number"!=typeof this.dataCacheTotal&&delete s.skipGetTotal,this.serialRequestsDelay>0?(clearTimeout(this.deferredTimeout),this.deferredTimeout=setTimeout(n.bind(this._requestDataDeferred,this,e,s,i),this.serialRequestsDelay)):this._requestDataDeferred(e,s,i)},_requestDataDeferred:function(e,t,i){this._getPagesToLoad(e)?this.serialRequestsDelayedPromise&&n.isEqual(t,this.serialRequestsDelayedPromise.query)?this.serialRequestsDelayedPromise.promise.done(i.resolve).fail(i.reject):(this.serialRequestsDelayedPromise={promise:i.promise(),query:t},this.request(t).done(n.bind(this._requestDone,this,e,t,i)).fail(i.reject)):this._resolveDeferredUsingDataFromCache(i,e)},_requestDone:function(e,t,i,n){this._putDataToCache(t,n),this.serialRequestsDelayedPromise=null,this._resolveDeferredUsingDataFromCache(i,e)},_resolveDeferredUsingDataFromCache:function(e,t){var i=this._getDataFromCache(t);e.resolve({total:this.dataCacheTotal,data:i})},_getPagesToLoad:function(e){var t,i=this._convertLimitOffsetToFirstLast(e),n=this._findPageIndex(i.first),o=this._findPageIndex(i.last),s=[];for(t=n;t<=o;t++)if(!this.dataCachePages[t]){s.push(t);break}for(t=o;t>=n;t--)if(!this.dataCachePages[t]){s.push(t);break}return s.length>0?s:null},_findPageIndex:function(e){return Math.floor(e/this.pageSize)},_convertLimitOffsetToFirstLast:function(e){var t=e&&e.offset?e.offset:0,i=e&&e.limit?t+e.limit-1:this.dataCacheTotal?this.dataCacheTotal-1:2147483647;return this.dataCacheTotal&&i>this.dataCacheTotal-1&&(i=this.dataCacheTotal-1),{first:t,last:i}},_getDataFromCache:function(e){e=n.defaults(e,{offset:0,limit:2147483647});var t=Math.max(0,e.offset),i=Math.min(t+e.limit,this.dataCacheTotal);return this.dataCache.slice(t,i)},_putDataToCache:function(e,t){var i;for(void 0!==t.total&&(this.dataCacheTotal=t.total),e.limit=e.limit||2147483647,i=0;i<t.data.length;i++)this.dataCache[i+e.offset]=this.dataConverter?this.dataConverter(t.data[i]):t.data[i];var n=e.offset/this.pageSize,o=Math.floor((Math.min(e.limit,t.data.length)+e.offset-1)/this.pageSize);for(i=n;i<=o;i++)this.dataCachePages[i]=!0},_getDataByCriteria:function(e){if(!this.getDataByCriteriaHolder[e]){var t,i=Number.MAX_VALUE,n=0,o=0;for(var s in this.getDataByCriteriaHolder)if(this.getDataByCriteriaHolder.hasOwnProperty(s)){o+=1;var r=this.getDataByCriteriaHolder[s];r.index<i&&(i=r.index,t=s),r.index>n&&(n=r.index)}o>=this.maxSearchCacheSize&&(delete this.getDataByCriteriaHolder[t],this.criteriaValuesCache=[]),this.getDataByCriteriaHolder[e]={getData:this._createDataProviderForCriteria(e),index:n+1},this.criteriaValuesCache.push(e)}return this.lastCriteria=e,this.getDataByCriteriaHolder[e].getData},_createDataProviderForCriteria:function(e){var t=this.request,i=this,o=new s({pageSize:this.pageSize,dataConverter:this.dataConverter,serialRequestsDelay:this.serialRequestsDelay,searchKey:this.criteriaKey,controlGetTotal:this.controlGetTotal,request:function(o){var s=n.extend({},o);return s[i.criteriaKey]=e,t(s)}}),r=o.getData;return o.getData=function(e){var t=n.extend({},e);return delete t[i.criteriaKey],r.call(o,t)},o.getData}}),i.exports=s}),define("runtime_dependencies/js-sdk/src/common/component/tree/TreeLevel",["require","exports","module","underscore","../panel/Panel","../panel/trait/collapsiblePanelTrait","../list/view/ListWithSelection","./trait/addToSelectionModelTrait","../list/model/ListWithSelectionModel","./dataprovider/DataProviderWithSearchCache"],function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){this.$el.removeClass(this.loadingClass).addClass(this.openClass),u.invoke(this.plugins,"itemsRendered",this.list.model,this.list);var e=this.list.$("> .j-view-port-chunk > ul > li").addClass(this.cid).length,t=u.isFunction(this.levelHeight)?this.levelHeight():this.levelHeight;t&&e*this.listItemHeight>t?this.list.$el.css({height:t+"px","overflow-y":"auto"}):this.list.$el.css({height:"auto",overflow:"auto"}),this.list._calcViewPortHeight(),this._isReady=!0,this.trigger("ready",this)}function s(e,t){this.listRenderError=!0,this.trigger("listRenderError",e,t,this)}function r(e){var t=[];u.chain(e).keys(e).each(function(i){t.push(e[i])}),this.selection.multiple||d(this),this.trigger("selection:change",t,this,[])}function a(e){var t=[];u.chain(e).keys(e).each(function(i){t.push(e[i])}),this.selection.multiple||d(this),this.trigger("item:dblclick",t)}function l(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return!0}function c(e,t,i,n){i&&i.exclude&&u.isArray(i.exclude)&&l(e,i.exclude)||(void 0===n||n>0)&&u.chain(e.items).keys().each(function(o){i&&i.exclude&&u.isArray(i.exclude)&&l(e.items[o],i.exclude)||t.call(e.items[o],i),c(e.items[o],t,i,void 0===n?n:--n)})}function d(e,t){t=t&&{exclude:t.exclude},c(e,function(e){this.list.clearSelection(),this.list.model.selection=[]},t)}var u=e("underscore"),h=e("../panel/Panel"),p=e("../panel/trait/collapsiblePanelTrait"),m=e("../list/view/ListWithSelection"),f=e("./trait/addToSelectionModelTrait"),g=e("../list/model/ListWithSelectionModel"),v=e("./dataprovider/DataProviderWithSearchCache"),b=g.extend(f);i.exports=h.extend({constructor:function(e){e||(e={}),u.extend(e,{traits:[p]}),h.prototype.constructor.call(this,e)},initialize:function(e){e||(e={}),this._isReady=!1,this.item=e.item||{},this.id=this.item.id,this.owner=e.owner,this.parent=e.parent,this.itemsTemplate=e.itemsTemplate,this.listItemHeight=e.listItemHeight,this.levelHeight=e.levelHeight,this.lazyLoad=!!e.lazyLoad,this.selection=e.selection||{allowed:!1,multiple:!1},this.resource=this.item.value,this.bufferSize=e.bufferSize,this.cache=void 0!==e.cache&&e.cache,this.allowMouseDownEventPropagation=e.allowMouseDownEventPropagation,this.items={},this.plugins=[];for(var t={el:this.el,model:this.model},i=0,n=e.plugins.length;i<n;i++){var o=e.plugins[i].constr;this.plugins.push(new o(u.extend({},t,e.plugins[i].options)))}this.dataLayer=this.owner.getDataLayer(this),u.invoke(this.plugins,"dataLayerObtained",this.dataLayer),h.prototype.initialize.apply(this,arguments)},render:function(){var e=new b({bufferSize:this.bufferSize,getData:this._getDataProvider(this.cache)});return this.list=new m({markerClass:"."+this.cid,eventListenerPattern:"."+this.cid+":not(.readonly) > p",el:this.$contentContainer,itemsTemplate:this.itemsTemplate,listItemHeight:this.listItemHeight,lazy:!0,selection:this.selection,allowMouseDownEventPropagation:this.allowMouseDownEventPropagation,model:e}),this.list.on("render:data",u.bind(o,this)),this.list.on("listRenderError",u.bind(s,this)),this.list.on("selection:change",u.bind(r,this)),this.list.on("item:dblclick",u.bind(a,this)),this.lazyLoad?this.on("open",this._onOpen,this):this.list.renderData(),this},_getDataProvider:function(e){var t=this,i=u.bind(function(e){return this.obtainData(e,t)},this.dataLayer),o={};return e&&("object"===n(e)&&(o=u.extend(o,e)),o.request=o.request||i,this.dataProvider=new v(o),i=this.dataProvider.getData),function(e){return e||(e={offset:0,limit:100}),e.id=t.id,i(u.extend({},t.owner.context,e),t)}},_onOpen:function(){this.$el.removeClass(this.openClass).addClass(this.loadingClass),this.list.renderData()},setElement:function(e){var t=h.prototype.setElement.apply(this,arguments);return this.list&&(this.list.setElement(this.$contentContainer),this.list.totalItems=-1),u.each(this.plugins,function(t){t.setElement(e)}),this.lazyLoad||this.list&&this.list.renderData(),this.collapsed||(this.open({silent:!0,depth:0}),this.lazyLoad&&this.list.renderData()),t},open:function(e){c(this,h.prototype.open,e,e?e.depth:0),h.prototype.open.call(this,e)},close:function(e){h.prototype.close.call(this,e),c(this,h.prototype.close,e,e?e.depth:void 0),d(this)},getLevel:function(e){return u(this.items).reduce(function(t,i){return t||(i.id===e?i:i.getLevel(e))},!1)},refresh:function(e){this.listRenderError||(this.lazyLoad&&!this.collapsed||!this.lazyLoad?(this.once("ready",u.bind(c,this,this,this.refresh,e,1)),this.list.model.fetch({top:0,bottom:this.list.model.bufferSize,force:!0}),this.list.scrollTo(0)):(this.list.model.set("bufferStartIndex",void 0,{silent:!0}),this.list.model.set("bufferEndIndex",void 0,{silent:!0}),this.list.model.set("total",void 0,{silent:!0}),c(this,this.refresh,e)))},fetch:function(e,t){this.list.fetch(t,e)},recalcConstraints:function(){this.list.resize()},fetchVisibleData:function(){this.list._fetchVisibleData()},resetSelection:function(e){d(this,e),e&&e.silent||this.trigger("selection:change",[])},hasItems:function(){return!!this.$("> .subcontainer > .j-view-port-chunk > ul > li").length},clearCache:function(){u.each(this.items,function(e){e.clearCache()}),this.dataProvider&&this.dataProvider.clear()},remove:function(){var e=this,t=-1;if(u.forEach(u.keys(this.items),function(t){e.items[t].remove()}),this.dataProvider&&this.dataProvider.clear(),this.list.remove(),this.parent){var i=this.parent.id,n=this.owner.getDataLayer(i);if(n&&n.predefinedData&&n.predefinedData[i]&&u.isArray(n.predefinedData[i])){for(var o=0;o<n.predefinedData[i].length;o++)if(n.predefinedData[i][o].id===this.id){t=o;break}t>-1&&(n.predefinedData[i].splice(t,1),delete n.predefinedData[this.id])}delete this.parent.items[this.id]}h.prototype.remove.apply(this,arguments)},isReady:function(){return this._isReady}})}),define("runtime_dependencies/js-sdk/src/common/component/tree/TreeDataLayer",["require","exports","module","underscore","jquery","../../util/classUtil","../../util/xssUtil","request"],function(e,t,i){function n(e,t){return s.call(this,o.call(this,e),t)}function o(e){for(var t=0,i=e.length;t<i;t++)e[t]={id:this.extractId(e[t]),value:e[t]};return e}function s(e,t){var i,n;if(this.processors&&this.processors.length)for(var o=0,s=this.processors.length;o<s;o++){i=[];for(var r=0,a=e.length;r<a;r++)(n=this.processors[o].processItem(e[r],t,this))&&i.push(n);e=i}return e}var r=e("underscore"),a=e("jquery"),l=e("../../util/classUtil"),c=(e("../../util/xssUtil"),e("request"));i.exports=l.extend({constructor:function(e){this.requestType=e.requestType?e.requestType:"GET",e.getDataUri&&(this.getDataUri=e.getDataUri),this.getDataUri||(this.getDataUri=r.template(e.dataUriTemplate)),e.getDataArray&&(this.getDataArray=e.getDataArray),e.getDataSize&&(this.getDataSize=e.getDataSize),e.extractId&&(this.extractId=e.extractId),this.levelDataId=e.levelDataId?e.levelDataId:"id",this.processors=e.processors||[],this.initialize(e)},initialize:function(e){},extractId:function(e){return e[this.levelDataId]},getDataSize:function(e,t,i){return this.getDataArray(e,t,i).length},getDataArray:function(e,t,i){return e},obtainData:function(e,t){var i=new a.Deferred,o=this;return this.predefinedData&&this.predefinedData[e.id]?i.resolve({total:this.predefinedData[e.id].length,data:this.predefinedData[e.id]}):c({type:this.requestType,dataType:this.dataType||"json",headers:{Accept:this.accept||"application/json","Content-Type":this.contentType||void 0},cache:!1,data:this.data||void 0,url:this.getDataUri(e)}).done(function(){var t=arguments[0];o.dataSize=o.getDataSize.call(o,t,e,arguments[2]),i.resolve({total:o.dataSize,data:n.call(o,o.getDataArray.call(o,t,e,arguments[2]),e)})}).fail(function(e){i.reject(e.status,e.responseText)}),i},_process:n})}),define("text!runtime_dependencies/js-sdk/src/common/component/tree/template/treeLevelListTemplate.htm",[],function(){return'<ul class="list collapsible folders" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n    {{ _.each(items, function(item){ }}\n    <li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n        <p class="wrap button draggable" data-tooltip="{{- item.value.label }}"><b class="icon"></b> {{- item.value.label }} </p>\n        <div class="subcontainer" ></div>\n    </li>\n    {{ }) }}\n</ul>\n'}),define("text!runtime_dependencies/js-sdk/src/common/component/tree/template/treeLevelTemplate.htm",[],function(){return'<div>\n\n    <js-templateNonce></js-templateNonce>\n    <ul class="list collapsible folders">\n        <li class="node">\n            <p class="wrap button">\n                <b class="icon" id="handler2" title=""></b>root\n            </p>\n            <div class="subcontainer"></div>\n        </li>\n    </ul>\n</div>'}),define("runtime_dependencies/js-sdk/src/common/component/tree/Tree",["require","exports","module","jquery","underscore","backbone","./TreeLevel","./TreeDataLayer","text!./template/treeLevelListTemplate.htm","text!./template/treeLevelTemplate.htm"],function(e,t,i){function n(e){var t=e.list.model.get("items"),i=this;t=s.where(t,{_node:!0}),e.$(".node").each(function(o,r){var l=t[o].id;e.items[l]?e.items[l].setElement(r):(e.items[l]=new a(s.extend({},i._options,{el:r,item:t[o],parent:e})),i.listenTo(e.items[l],"listRenderError",s.bind(function(e,t,i){this.trigger("levelRenderError",e,t,i)},i)),e.listenTo(e.items[l],"ready",s.bind(n,i)),e.listenTo(e.items[l],"selection:change",function(t,i,n){i&&n.push(i),e.list.model.clearSelection(),e.trigger("selection:change",t,e,n)}),e.listenTo(e.items[l],"item:dblclick",function(t){e.list.model.clearSelection(),e.trigger("item:dblclick",t)}),e.items[l].render())}).length&&e.$(".j-view-port-chunk").css({height:"auto"})}var o=e("jquery"),s=e("underscore"),r=e("backbone"),a=e("./TreeLevel"),l=e("./TreeDataLayer"),c=e("text!./template/treeLevelListTemplate.htm"),d=e("text!./template/treeLevelTemplate.htm"),u={ADD:"add",UPDATE:"update"},h=r.View.extend({template:s.template(d),_plugins:[],el:function(){return this.template()},constructor:function(e){e||(e={}),this.defaultDataLayer=new l(e),this.customDataLayers=e.customDataLayers,e.type?(this._type=e.type,e.type=void 0):this._type="tree",e.collapserSelector||(e.collapserSelector="b.icon:eq(0)"),e.predefinedData?(this.defaultDataLayer.predefinedData=e.predefinedData,e.predefinedData=void 0):this.defaultDataLayer.predefinedData={},e.rootless&&(this.rootless=e.rootless,e.rootless=void 0),e.additionalCssClasses&&(this.additionalCssClasses=e.additionalCssClasses,e.additionalCssClasses=void 0),e.getDataLayer&&(this.getDataLayer=e.getDataLayer,e.getDataLayer=void 0),this._options=s.extend({itemsTemplate:c,plugins:this._plugins,owner:this},e),this.context=e.context||{};for(var t=0,i=this._plugins.length;t<i;t++)this._plugins[t].processors&&(this.processors=this.processors.concat(this._plugins[t].processors));r.View.apply(this,arguments)},initialize:function(e){this.rootLevel=new a(s.extend({},this._options,{levelHeight:e.rootLevelHeight},{el:this.$("li")[0]},{item:{id:"/",value:{id:"/",resourceType:"folder"}}})),this.rootless&&this.$el.find("ul:first").addClass("hideRoot"),this.additionalCssClasses&&this.$el.find("ul:first").addClass(this.additionalCssClasses),this.listenTo(this.rootLevel,"ready",s.bind(n,this)),this.listenTo(this.rootLevel,"selection:change",s.bind(function(e,t,i){t&&i&&s.isArray(i)&&(this.rootLevel.selection.multiple||this.rootLevel.resetSelection({silent:!0,exclude:[i[0]]})),this.trigger("selection:change",e)},this)),this.listenTo(this.rootLevel,"item:dblclick",s.bind(function(e){this.trigger("item:dblclick",e)},this));for(var t=0,i=this._plugins.length;t<i;t++)this._plugins[t].constr.treeInitialized.call(this,this._plugins[t].options);this.rootLevel.render(),e.collapsed&&e.lazyLoad&&this.rootless&&this.expand("/")},remove:function(){for(var e=0,t=this._plugins.length;e<t;e++)this._plugins[e].constr.treeRemoved.call(this);this.rootLevel.remove(),r.View.prototype.remove.apply(this,arguments)},expand:function(e,t){var i=this.getLevel(e);return i&&i.open(t),this},collapse:function(e,t){var i=this.getLevel(e);return i&&i.close(t),this},_getNodeByLevelId:function(e){var t,i,n=this.getLevel(e);if(n)return n.parent?(t=n.parent.list,{node:n.item,nodeElement:n.$el,itsList:t}):null;var o=!1;if("list"===this._type)o=this.rootLevel;else if("tree"===this._type){var r=e.split("/");if(r=r.slice(0,r.length-1).join("/"),""===r&&(r="/"),!(o=this.getLevel(r)))return null}return o?(t=o.list,i=s.find(t.model.get("items"),function(t){return t.id===e}),i?{node:i,nodeElement:t.$el.find("li.leaf.selected"),itsList:t}:null):null},select:function(e){var t=this._getNodeByLevelId(e);t&&(t.itsList.model.clearSelection().addValueToSelection(t.node.value,t.node.index),this.trigger("selection:change",t.itsList.getValue()))},deselect:function(e){},addItem:function(e,t){var i=this.getLevel(e),n=u.ADD;return i&&this._getNodeItems(e,i,t,n),this},updateItem:function(e,t){var i=t?this.getLevel(t):this.rootLevel;return i&&this._getNodeItems(i.id,i,e),this},resetSelection:function(e){return this.rootLevel.list.clearSelection(),this.rootLevel.list.model.selection=[],this.rootLevel.resetSelection(e),this},refresh:function(e){e&&(this.context=e),this.rootLevel.refresh()},recalcConstraints:function(){this.rootLevel.recalcConstraints()},fetchVisibleData:function(){this.rootLevel.fetchVisibleData()},clearCache:function(){this.rootLevel.clearCache()},getLevel:function(e){return this.rootLevel.id===e?this.rootLevel:this.rootLevel.getLevel(e)},getDataLayer:function(e){return this.customDataLayers&&this.customDataLayers[e.id]?this.customDataLayers[e.id]:this.defaultDataLayer},_addItem:function(e,t,i){return!s.findWhere(e,{id:i.id})&&e.push(i),e},_updateItem:function(e,t){return s.each(e,function(e){e.id===t.id&&s.extend(e,t)},this),e},_getNodeItems:function(e,t,i,n){var o,r=this.getDataLayer(t),a=t.list.model.get("items")?t.list.model.get("items"):[];r.predefinedData=r.predefinedData||{},o=n===u.ADD?this._addItem(a,e,i):this._updateItem(a,i),r.predefinedData[e]=s.sortBy(o,"label"),t.fetch({force:!0,keepPosition:!0})},_selectTreeNode:function(e,t){if(s.isString(e)&&""!==e){var i=s.bind(function(){var n=s.bind(function(){var n=e,o=this.getLevelId(n);if(this.expand(o),this.select(o),"list"===this._type)this.rootLevel.on("ready",i);else if("tree"===this._type&&t&&t.length){var s=this.$el,r=this._getNodeByLevelId(o);if(!r)return;var a=r.nodeElement;if(!a)return;var l=a.offset().top-s.offset().top-t.height()/2+a.height()/2;t.scrollTop(l)}},this);if("/"===e||"/public"===e||"list"===this._type)n();else{var r=e.replace(/\/$/,""),a=r.substr(0,r.lastIndexOf("/"));a=a||"/";var l=new o.Deferred;this._openPath(a,l,0),l.done(n)}},this);this.rootLevel.isReady()?i():this.rootLevel.on("ready",i)}},_openPath:function(e,t,i){if(!e)return t.resolve();var n,o,r,a,l=this;if("/"===e?o=["/"]:(o=e.split("/"),o[0]="/"),"/"===o[0]&&"public"===o[1]&&(o=s.union(["/public"],s.rest(o,2))),(i=i||0)===o.length)return t.resolve();n=s.first(o,i+1).join("/"),n=n.replace(/\/\//g,"/"),a=this.getLevelId(n),(r=this.getLevel(a))&&(r.collapsed?(r.once("ready",function(){l._openPath(e,t,i+1)}),r.open()):this._openPath(e,t,i+1))},getLevelId:function(e){var t="",i=["/public"];if("/"===e||"/root"===e)t="/root";else{for(var n=!1,o=0;o<i.length;o++)if(0===e.indexOf(i[o])){n=!0;break}t=n?e:"/root/"+e.substr(1)}return t}},{instance:function(e){return new this(e)}});i.exports={use:function(e,t){return function(e){return{use:function(t,i){return e.prototype._plugins.push({constr:t,options:i}),this},create:function(){return e}}}(h.extend({_plugins:[{constr:e,options:t}]}))},create:function(){return h}}}),define("text!runtime_dependencies/js-sdk/src/common/component/panel/template/tabbedPanelButtonTemplate.htm",[],function(){return'<button class="button up">\n\n    <js-templateNonce></js-templateNonce>\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>\n'}),define("runtime_dependencies/js-sdk/src/common/component/panel/trait/tabbedPanelTrait",["require","exports","module","underscore","jquery","backbone","./abstractPanelTrait","../../base/OptionContainer","text!../template/tabbedPanelButtonTemplate.htm"],function(e,t,i){function n(e,t){var i=t.get("action");this._contentRendered[i]||(this._contentRendered[i]=!0,this.tabs[i].render&&this.tabs[i].render()),this.$tabs.hide(),this.$tabs.filter(function(){return s(this).data("tab")===i}).css("display","block"),this.selectedTab=i,this.trigger("tab:"+i,e,t)}var o=e("underscore"),s=e("jquery"),r=e("backbone"),a=e("./abstractPanelTrait"),l=e("../../base/OptionContainer"),c=e("text!../template/tabbedPanelButtonTemplate.htm");i.exports=o.extend({},a,{onConstructor:function(e){if(e||(e={}),!e.tabs||!o.isArray(e.tabs)||0===e.tabs.length)throw new Error("Tabbed panel should have at least one tab");this.tabContainerClass=e.tabContainerClass||"tabContainer",this.tabHeaderContainerSelector=e.tabHeaderContainerSelector||"> .header > .tabHeaderContainer",this.tabHeaderContainerClass=e.tabHeaderContainerClass||"tabHeaderContainer",this.tabbedPanelClass=e.tabbedPanelClass||"tabbedPanel",this.tabs={},o.each(e.tabs,o.bind(function(e){this.tabs[e.action]=e.content,delete e.content},this))},afterSetElement:function(){this.$el.addClass(this.tabbedPanelClass),this.$tabHeaderContainer=this.$(this.tabHeaderContainerSelector),this.$tabHeaderContainer.length||(this.$tabHeaderContainer=s("<div></div>").addClass(this.tabHeaderContainerClass),this.$("> .header").append(this.$tabHeaderContainer)),this.$contentContainer.empty(),o.each(this.tabs,o.bind(function(e,t){var i=s("<div></div>").addClass(this.tabContainerClass);i.data("tab",t),i.html(e instanceof r.View?e.$el:e),this.$contentContainer.append(i)},this));var e=this.tabContainerClass.split(" ");this.$tabs=this.$("."+e[0])},afterInitialize:function(e){this.tabHeaderContainer=new l({options:e.tabs,el:this.$tabHeaderContainer,contextName:"tab",toggleClass:e.toggleClass||"active",toggle:!0,optionTemplate:e.optionTemplate||c}),this._contentRendered={},this.listenTo(this.tabHeaderContainer,o.map(e.tabs,function(e){return"tab:"+e.action}).join(" "),o.bind(n,this));for(var t=0;t<e.tabs.length;t++)if(e.tabs[t].primary){this.openTab(e.tabs[t].action);break}},onRemove:function(){o.each(this.tabs,function(e){e.remove&&e.remove()}),this.tabHeaderContainer.remove()},extension:{openTab:function(e){var t=this.tabHeaderContainer.getOptionView(e);t&&t.select()},showTab:function(e){var t=this.tabHeaderContainer.getOptionView(e);t&&t.show()},hideTab:function(e){var t=this.tabHeaderContainer.getOptionView(e);t&&t.hide()}}})}),define("runtime_dependencies/js-sdk/src/common/component/tree/plugin/TreePlugin",["require","exports","module","backbone"],function(e,t,i){var n=e("backbone");i.exports=n.View.extend({dataLayerObtained:function(){},itemsRendered:function(){}},{processors:null,treeInitialized:function(){},treeRemoved:function(){}})}),define("text!runtime_dependencies/js-sdk/src/common/component/tree/template/searchPluginTemplate.htm",[],function(){return'<span class="control searchLockup ">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="wrap">\n        <input type="text" tabindex="">\n    </div>\n    <b class="right">\n        <a class="button searchClear"></a>\n    </b>\n    <a class="button search up"></a>\n</span>\n'}),define("runtime_dependencies/js-sdk/src/common/component/tree/plugin/SearchPlugin",["require","exports","module","underscore","jquery","backbone","./TreePlugin","text!../template/searchPluginTemplate.htm"],function(e,t,i){var n=e("underscore"),o=e("jquery"),s=e("backbone"),r=e("./TreePlugin"),a=e("text!../template/searchPluginTemplate.htm"),l=s.View.extend({template:n.template(a),el:function(){return this.template()},events:{"click .button.search":"clickHandler","click .button.searchClear":"clear","keydown input[type=text]":"keyHandler"},initialize:function(e){this.owner=e.owner,this.$searchInput=this.$el.find("input[type=text]")},search:function(e){var t=this.$searchInput.val();this.owner.refresh(n.extend({searchString:t},e)),t?this.$el.find(".button.searchClear").addClass("up"):this.$el.find(".button.searchClear").removeClass("up")},clearInput:function(){this.$searchInput.val("")},clear:function(){this.clearInput(),this.clickHandler(),this.trigger("clear",this)},clearSilently:function(){this.clearInput(),delete this.owner.context.searchString,this.owner.refresh(n.extend({searchString:""},this.owner.context)),this.$el.find(".button.searchClear").removeClass("up")},clickHandler:function(){delete this.owner.context.searchString,this.search(this.owner.context),this.trigger("search",this.owner.context)},keyHandler:function(e){13===e.which&&this.clickHandler()},setSearchString:function(e){this.$searchInput.val(e)}});i.exports=r.extend({initialize:function(e){this.searchParameter=e&&e.searchParameter||"q",this.additionalParams=e&&e.additionalParams},dataLayerObtained:function(e){var t=this;if(!e.__searchPluginExtended){var i=e.getDataUri,s=this.searchParameter;e.getDataUri=function(e){var r=i.apply(this,arguments),a={};return e.searchString&&(a[s]=e.searchString),t.additionalParams&&n.extend(a,t.additionalParams,n.pick(e,n.keys(t.additionalParams))),r+=(-1===r.indexOf("?")?"?":"&")+o.param(a,!0)},e.__searchPluginExtended=!0}}},{treeInitialized:function(e){e=e||{};var t=this;this.searchForm=new l({owner:this}),e.dfdRenderTo?e.dfdRenderTo.done(function(e){e.prepend(t.searchForm.render().el)}):this.$el.prepend(this.searchForm.render().el)},treeRemoved:function(){this.searchForm.remove()}})}),define("text!runtime_dependencies/js-sdk/src/common/component/tooltip/template/tooltipTemplate.htm",[],function(){return'<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'}),define("runtime_dependencies/js-sdk/src/common/component/tooltip/Tooltip",["require","exports","module","jquery","underscore","backbone","text!./template/tooltipTemplate.htm"],function(e,t,i){var n=e("jquery"),o=e("underscore"),s=e("backbone"),r=e("text!./template/tooltipTemplate.htm");i.exports=s.View.extend({template:o.template(r),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(e){if(e||(e={}),!e.attachTo||0===n(e.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!e.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=n(e.attachTo),this.$attachTo[0].tooltip=this,e.delay&&(this.delay=e.delay),e.offset&&(this.offset=e.offset),e.attribute&&(this.attribute=e.attribute),e.cssClasses&&(this.cssClasses=e.cssClasses),this.contentTemplate=e.contentTemplate,this.i18n=e.i18n||{},!o.isUndefined(e.triggerEvents)&&(this.triggerEvents=e.triggerEvents),this.selector="["+this.attribute+"]",o.bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),s.View.prototype.constructor.apply(this,arguments)},_render:function(e,t,i){if(this._event){e=e instanceof s.Model?e.toJSON():e;var n=o.template(this.contentTemplate)({model:e,i18n:this.i18n,options:t||{}});this.$el.find(".body").empty().append(n),this._showTooltip()}i.resolve()},show:function(e,t){var i=new n.Deferred;return this._timer=setTimeout(o.bind(this._render,this,e,t,i),this.delay),i},_showTooltip:function(){n("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var e=this.$el.innerHeight(),t=this.$el.innerWidth(),i=n(window).height(),o=n(window).width(),s=this.offset.y,r=this.offset.x;e+this._event.pageY+this.offset.y+3>=i&&(s=-this.offset.y-e),t+this._event.pageX+this.offset.x+3>=o&&(r=-this.offset.x-t),this.$el.css({top:this._event.pageY+s,left:this._event.pageX+r})},_onMouseMove:function(e){this._event=e},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),s.View.prototype.remove.apply(this,arguments)}},{attachTo:function(e,t){var i=this;return t||(t={}),t.attachTo=e||"body",new i(t)},detachFrom:function(e){e=n(e)[0],e.tooltip&&e.tooltip.remove()}})}),define("runtime_dependencies/js-sdk/src/common/component/tree/plugin/TooltipPlugin",["require","exports","module","./TreePlugin","underscore","../../tooltip/Tooltip"],function(e,t,i){var n=e("./TreePlugin"),o=e("underscore"),s=e("../../tooltip/Tooltip");i.exports=n.extend({initialize:function(e){this.tooltip=s.attachTo(e.attachTo,o.omit(e,"el")),this.listensToList=!1,n.prototype.initialize.apply(this,arguments)},itemsRendered:function(e,t){var i=this;this.listensToList||(this.listensToList=!0,this.listenTo(t,"list:item:mouseover",function(e,t){i.tooltip.show(e)}),this.listenTo(t,"list:item:mouseout",function(){i.tooltip.hide()}))},remove:function(){s.detachFrom(this.$el),this.tooltip.remove(),n.prototype.remove.apply(this,arguments)}})}),define("runtime_dependencies/js-sdk/src/common/component/tree/plugin/InfiniteScrollPlugin",["require","exports","module","./TreePlugin"],function(e,t,i){var n=e("./TreePlugin");i.exports=n.extend({itemsRendered:function(){
this.$("> .subcontainer > .j-view-port-chunk").css({height:"auto"})}})}),define("text!runtime_dependencies/js-sdk/src/common/component/tree/template/noResourcesFoundMessageTemplate.htm",[],function(){return'<div class="noSearchResults">\n\n    <js-templateNonce></js-templateNonce>\n    {{- msg}}</div>'}),define("runtime_dependencies/js-sdk/src/common/component/tree/plugin/NoSearchResultsMessagePlugin",["require","exports","module","underscore","bundle!CommonBundle","./TreePlugin","text!../template/noResourcesFoundMessageTemplate.htm"],function(e,t,i){var n=e("underscore"),o=e("bundle!CommonBundle"),s=e("./TreePlugin"),r=e("text!../template/noResourcesFoundMessageTemplate.htm"),a=function(e){!e.list.totalItems&&e.list.$el.html(this.noResourcesFoundMessage)};i.exports=s.extend({},{treeInitialized:function(e){this.noResourcesFoundMessage=n.template(r,{msg:o["no.resources.found"]}),this.listenTo(this.rootLevel,"ready",a)},treeRemoved:function(){this.stopListening(this.rootLevel,"ready",a)}})}),define("runtime_dependencies/bi-repository/src/bi/repository/util/resourcesTreeGetDataUriFnUtil",["require","exports","module","underscore"],function(e,t,i){var n=e("underscore");i.exports=function(e){return function(t){var i="";if(i+=e.contextPath+"/rest_v2/api/resources?",e.getFolderUri){var o=e.getFolderUri(t.id);o&&(i+="folderUri="+encodeURIComponent(o))}else i+="folderUri="+encodeURIComponent(t.id);return e.recursive?i+="&recursive=true":i+="&recursive=false",e.type&&(i+=e.type.reduce(function(e,t){return e+="&type="+t},"")),e.containerType&&(i+="&containerType="+e.containerType),e.exclude&&(i+="&excludeFolder="+e.exclude),i+="&offset={{= offset }}&limit={{= limit }}",e.forceTotalCount&&(i+="&forceTotalCount=true"),e.forceFullPage&&(i+="&forceFullPage=true"),n.template(i,t)}}}),define("runtime_dependencies/bi-repository/src/bi/repository/util/extractRootLevelDataFromHtmlResponse",["require","exports","module"],function(e,t,i){i.exports=function(e){var t=e.trim().match(/^<div\s?(?:(?:.*)=(?:['"]).*(?:['"]))*>(.*)<\/div>/);return JSON.parse(t?t[1]:"{}")}}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/itemDialog/resourceDialogTemplate.htm",[],function(){return'<div class="jr-mDialog jr-uWidth-450px jr reportChooserDialog {{- additionalCssClasses }}" tabindex="-1">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="jr-mDialog-header mover jr">\n        <h1 class="jr-mDialog-header-title jr">{{- title }}</h1>\n    </div>\n    <div class="sub header tabHeaderContainer"></div>\n    <div class="jr-mDialog-body jr subcontainer u-height-300px">\n    </div>\n    <p class="itemDescription"></p>\n    <div class="jr-mDialog-footer jr"></div>\n\n</div>\n'}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/itemDialog/sidebarTreeLeafTemplate.htm",[],function(){return'<ul class="list collapsible" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n    {{ _.each(items, function(item){ }}\n    <li class="{{- item._node ? \'node folders closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}} {{- item.cssClass }}" data-index="{{- item.index }}" tabindex="-1">\n        <p class="wrap button {{- item._node ? \'\' : \'draggable\'}} " {{ if (item.value.description || item.value.uri) { }}data-tooltip=\'{{ if (item.value.description) { }}<p class="message label">Description: </p><p class="message">{{- item.value.description }}</p>{{ } }} {{ if (item.value.uri) { }} <p class="message label">Path: </p><p class="message">{{- item.value.uri }}</p> {{ } }}\' {{ } }}><b class="icon"></b> {{- item.value.label }} </p>\n        <div class="subcontainer"></div>\n    </li>\n    {{ }) }}\n</ul>'}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/itemDialog/tabPanelButtonTemplate.htm",[],function(){return'<button class="button {{- additionalCssClasses }}{{ if (exposeAction) { }} {{- action}} {{ } }} up" title="{{ if(action === \'list\') { }} {{- i18n["Repository.ItemSelectDialog.listTabToolip"] }} {{ } else { }} {{- i18n["Repository.ItemSelectDialog.foldersTabToolip"] }} {{ } }}">\n\n    <js-templateNonce></js-templateNonce>\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>'}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/itemDialog/treeTooltipTemplate.htm",[],function(){return'{{ if (model.value.description) { }}\n    <p class="message label">{{- i18n["tooltip.description"] }} </p>\n    <p class="message">{{- model.value.description }}</p>\n{{ } }}\n{{ if (model.value.uri) { }}\n    <p class="message label">{{- i18n["tooltip.path"] }}</p>\n    <p class="message">{{- model.value.uri }}</p>\n{{ } }}\n\n    <js-templateNonce></js-templateNonce>'}),define("runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/view/RepositoryItemChooserDialogView",["require","exports","module","underscore","jquery","bundle!all","runtime_dependencies/js-sdk/src/jrs.configs","runtime_dependencies/js-sdk/src/common/component/dialog/Dialog","runtime_dependencies/js-sdk/src/common/component/dialog/AlertDialog","runtime_dependencies/js-sdk/src/common/component/tree/Tree","runtime_dependencies/js-sdk/src/common/component/tree/TreeDataLayer","runtime_dependencies/js-sdk/src/common/component/panel/trait/tabbedPanelTrait","runtime_dependencies/js-sdk/src/common/component/tree/plugin/SearchPlugin","runtime_dependencies/js-sdk/src/common/component/tree/plugin/TooltipPlugin","runtime_dependencies/js-sdk/src/common/component/tree/plugin/InfiniteScrollPlugin","runtime_dependencies/js-sdk/src/common/component/tree/plugin/NoSearchResultsMessagePlugin","../../../enum/repositoryResourceTypes","../../../util/resourcesTreeGetDataUriFnUtil","../../../util/extractRootLevelDataFromHtmlResponse","runtime_dependencies/js-sdk/src/common/util/browserDetection","text!../template/itemDialog/resourceDialogTemplate.htm","text!../template/itemDialog/sidebarTreeLeafTemplate.htm","text!../template/itemDialog/tabPanelButtonTemplate.htm","text!../template/itemDialog/treeTooltipTemplate.htm"],function(e,t,i){function n(e){switch(e.value.resourceType){case v.REPORT_UNIT:e.cssClass="report";break;case v.DOMAIN_TOPIC:e.cssClass="domain topic";break;case v.SEMANTIC_LAYER_DATA_SOURCE:e.cssClass="domain";break;case v.ADHOC_DATA_VIEW:e.cssClass="adhocDataView";break;case v.OLAP_CUBE:e.cssClass="olap";break;default:e.cssClass="adhocDataView"}return e}var o=e("underscore"),s=e("jquery"),r=e("bundle!all"),a=e("runtime_dependencies/js-sdk/src/jrs.configs"),l=e("runtime_dependencies/js-sdk/src/common/component/dialog/Dialog"),c=e("runtime_dependencies/js-sdk/src/common/component/dialog/AlertDialog"),d=e("runtime_dependencies/js-sdk/src/common/component/tree/Tree"),u=e("runtime_dependencies/js-sdk/src/common/component/tree/TreeDataLayer"),h=e("runtime_dependencies/js-sdk/src/common/component/panel/trait/tabbedPanelTrait"),p=e("runtime_dependencies/js-sdk/src/common/component/tree/plugin/SearchPlugin"),m=e("runtime_dependencies/js-sdk/src/common/component/tree/plugin/TooltipPlugin"),f=e("runtime_dependencies/js-sdk/src/common/component/tree/plugin/InfiniteScrollPlugin"),g=e("runtime_dependencies/js-sdk/src/common/component/tree/plugin/NoSearchResultsMessagePlugin"),v=e("../../../enum/repositoryResourceTypes"),b=e("../../../util/resourcesTreeGetDataUriFnUtil"),C=e("../../../util/extractRootLevelDataFromHtmlResponse"),y=e("runtime_dependencies/js-sdk/src/common/util/browserDetection"),_=e("text!../template/itemDialog/resourceDialogTemplate.htm"),w=e("text!../template/itemDialog/sidebarTreeLeafTemplate.htm"),T=e("text!../template/itemDialog/tabPanelButtonTemplate.htm"),D=e("text!../template/itemDialog/treeTooltipTemplate.htm"),x=a.contextPath,E=!1,F=x+"/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1";i.exports=l.extend({constructor:function(e){e||(e={}),this.options=e,!0===this.options.disableListTab&&(E=!0),this.options.resourcesTypeToSelect&&this.options.resourcesTypeToSelect.length||(this.options.resourcesTypeToSelect=[v.REPORT_UNIT]),this.options.resourcesTypeToSelectTree&&this.options.resourcesTypeToSelectTree.length||(this.options.resourcesTypeToSelectTree=this.options.resourcesTypeToSelect),this._dfdRenderSerachFormTo=s.Deferred();var t={treeNodeProcessor:{processItem:function(e){return e._node=o.contains([v.FOLDER],e.value.resourceType),e}},filterPublicFolderProcessor:{processItem:function(e){if("/public"!==e.value.uri)return e}},filterTempFolderProcessor:{processItem:function(e){if(-1===e.value.uri.indexOf("/temp"))return e}},filterEmptyFoldersProcessor:{processItem:function(e){if("folder"!==e.value.resourceType||""!==e.value._links.content)return e}},cssClassItemProcessor:{processItem:e.cssClassItemProcessor||n}};this.resourcesTreeView=d.use(f).use(m,{i18n:r,attachTo:this.$el,contentTemplate:D}).create().instance({type:"tree",itemsTemplate:w,listItemHeight:22,selection:{allowed:!0,multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,bufferSize:e.treeBufferSize||5e3,additionalCssClasses:"folders",getDataUri:b({getFolderUri:function(e){return"/root"===e?"":e},contextPath:x,recursive:!1,type:this.options.resourcesTypeToSelectTree,containerType:v.FOLDER,forceTotalCount:!0,forceFullPage:!0}),levelDataId:"uri",customDataLayers:{"/":o.extend(new u({dataUriTemplate:F,processors:o.chain(t).omit("filterPublicFolderProcessor").values().value(),getDataArray:function(e){e=C(e);var t=[{id:"/root",label:e.label,uri:"/",resourceType:"folder",_links:{content:"@fakeContentLink"}}];if(a.isProVersion){var i=o.find(e.children,function(e){return"/public"===e.uri});i&&t.push({id:"/public",label:i.label,uri:"/public",resourceType:"folder",_links:{content:"@fakeContentLink"}})}return t}}),{accept:"text/html",dataType:"text"})},processors:o.values(t),getDataArray:function(e,t,i){return e&&e[v.RESOURCE_LOOKUP]?e[v.RESOURCE_LOOKUP]:[]},getDataSize:function(e,t,i){return+i.getResponseHeader("Total-Count")}}),this.resourcesListView=d.use(g).use(m,{i18n:r,attachTo:this.$el,contentTemplate:D}).use(p,{dfdRenderTo:this._dfdRenderSerachFormTo}).create().instance({type:"list",rootLevelHeight:o.bind(this._getContentHeight,this),itemsTemplate:w,listItemHeight:22,selection:{allowed:!0,multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,getDataUri:b({getFolderUri:function(e){return"/root"===e?"":e},contextPath:x,recursive:!0,type:this.options.resourcesTypeToSelect,forceTotalCount:!0,forceFullPage:!0}),levelDataId:"uri",cache:{searchKey:"searchString",pageSize:100},processors:[t.cssClassItemProcessor,t.filterTempFolderProcessor],getDataArray:function(e,t,i){return e&&e[v.RESOURCE_LOOKUP]?e[v.RESOURCE_LOOKUP]:[]},getDataSize:function(e,t,i){return+i.getResponseHeader("Total-Count")}}),l.prototype.constructor.call(this,{template:_,modal:!0,resizable:!0,minWidth:400,minHeight:400,additionalCssClasses:"sourceDialogNew"+(E?" listDisabled":""),title:e.title||r["Repository.ItemSelectDialog.dialogTitle"],traits:[h],tabHeaderContainerSelector:".tabHeaderContainer",tabContainerClass:"tabContainer control groupBox treeBox",optionTemplate:T,toggleClass:"down",tabs:[{label:r["Repository.ItemSelectDialog.foldersTab"],action:"tree",content:this.resourcesTreeView,exposeAction:!0,additionalCssClasses:"action square small",i18n:r},{label:r["Repository.ItemSelectDialog.listTab"],action:"list",content:this.resourcesListView,exposeAction:!0,additionalCssClasses:"action square small",i18n:r}],buttons:[{label:r["Repository.ItemSelectDialog.okButton"],action:"apply",primary:!0},{label:r["Repository.ItemSelectDialog.cancelButton"],action:"cancel",primary:!1}]})},initialize:function(e){this.listenTo(this.resourcesTreeView,"selection:change",this._selectionListener),this.listenTo(this.resourcesTreeView,"levelRenderError",this._onLevelRenderError),this.listenTo(this.resourcesTreeView,"item:dblclick",this._onOkButtonClick),this.listenTo(this.resourcesListView,"selection:change",this._selectionListener),this.listenTo(this.resourcesListView,"levelRenderError",this._onLevelRenderError),this.listenTo(this.resourcesListView,"item:dblclick",this._onOkButtonClick),this.listenTo(this.resourcesListView.searchForm,"search",this._onSearch),this.listenTo(this.resourcesListView.searchForm,"clear",this._resetTreeAndList),this.listenTo(this,"button:apply",o.bind(this._onOkButtonClick,this)),this.listenTo(this,"button:cancel",o.bind(this._onCancelButtonClick,this)),this.listenTo(this,"tab:tree tab:list",this._tabChangedEvent),l.prototype.initialize.apply(this,arguments),this._haveBeenOpened=!1,this._isOpened=!1,this.selectedResource=null,this._lastSelectedResource=null},events:{resize:"_onResize"},render:function(){return l.prototype.render.apply(this,arguments),this._dfdRenderSerachFormTo.resolve(this.$tabHeaderContainer),this},open:function(){this._openDialog()},close:function(){this._closeDialog()},remove:function(){this._closeDialog(),this.resourcesTreeView.remove(),this.resourcesListView.remove(),l.prototype.remove.apply(this,arguments)},setDefaultSelectedItem:function(e){this._defaultSelectedItem=e},_onOkButtonClick:function(){this.selectedResource&&(this._closeDialog(),this.trigger("item:select",this.selectedResource),this._lastSelectedResource=this.selectedResource)},_onCancelButtonClick:function(){this.selectedResource=null,this._lastSelectedResource&&(this.selectedResource=this._lastSelectedResource),this._closeDialog()},_openDialog:function(){if(!this._isOpened){var e=this;this._resizableContainerShiftHeight=6-(E?40:0),!1===this._haveBeenOpened?(this._initialDialogWidth=this.$el.css("width"),this._initialDialogHeight=this.$el.css("height"),this._haveBeenOpened=!0):this.$el.css({width:this._initialDialogWidth,height:this._initialDialogHeight}),l.prototype.open.apply(this,arguments);var t=o.bind(function(){this.$contentContainer.find(".tabContainer").css({height:"inherit","overflow-y":"auto"})},this);y.isIE8()||y.isIE9()?setTimeout(t,1):t(),this.$el.children().not(".subcontainer").not(".ui-resizable-e").not(".ui-resizable-se").each(function(){e._resizableContainerShiftHeight+=e.$(this).outerHeight(!0)}),this.$contentContainer.height(this.$el.height()-this._resizableContainerShiftHeight),this.resourcesListView.searchForm.clearSilently(),this._resetTreeAndList(),this.disableButton("apply"),this.resourcesTreeView._onceVisible=new s.Deferred,this.resourcesListView._onceVisible=new s.Deferred,this._preselectItem(),this._openTab(E?"tree":"list"),this._isOpened=!0}},_closeDialog:function(){this._isOpened&&(this.resourcesTreeView._onceVisible.reject(),this.resourcesListView._onceVisible.reject(),l.prototype.close.apply(this,arguments),this._isOpened=!1)},_selectionListener:function(e){var t=Object.keys(e),i=e&&(o.isArray(e)||o.isObject(e))&&e[t[0]],n=i?i.uri:void 0,s=i?i.resourceType:void 0;return i||n||s?(s===v.FOLDER?this.$(".itemDescription").empty():this.$(".itemDescription").text(i.description||""),o.contains(o.union([v.FOLDER]),s)?(this.selectedResource=null,void this.disableButton("apply")):(this.selectedResource={resourceUri:n,event:this._getAdHocFlowEvent(s)},void this.enableButton("apply"))):(this.disableButton("apply"),void this.$(".itemDescription").empty())},_resetTreeAndList:function(){this.resourcesTreeView.collapse("/root",{silent:!0}),this.resourcesTreeView.collapse("/public",{silent:!0}),this.resourcesTreeView.resetSelection(),this.resourcesListView.resetSelection(),this.$(".itemDescription").empty()},_preselectItem:function(){var e=!1;if(this._lastSelectedResource?e=this._lastSelectedResource.resourceUri:this._defaultSelectedItem&&(e=this._defaultSelectedItem),e){var t=this.resourcesTreeView.$el.parent();this.resourcesTreeView._onceVisible.done(o.bind(function(){this.resourcesTreeView._selectTreeNode(e,t)},this));s(this.resourcesListView.$el.find("div.subcontainer")[0]);this.resourcesListView._onceVisible.done(o.bind(function(){},this))}},_onResize:function(){this.$contentContainer.height(this.$el.height()-this._resizableContainerShiftHeight),this.resourcesListView.rootLevel.list.$el.height(this.$el.height()-this._resizableContainerShiftHeight-6),this.resourcesTreeView.rootLevel.list.$el.css("height","100%")},_getContentHeight:function(){return this.$el.height()-this._resizableContainerShiftHeight-6},_onSearch:function(){this._openTab("list"),this.disableButton("apply")},_tabChangedEvent:function(){"tree"===this.selectedTab?this.resourcesTreeView._onceVisible.resolve():"list"===this.selectedTab&&this.resourcesListView._onceVisible.resolve()},_openTab:function(e){this.openTab.apply(this,arguments)},_getAdHocFlowEvent:function(e){var t="";return e==v.REPORT_UNIT||e==v.DOMAIN_TOPIC?t="startAdHocWithTopic":e==v.SEMANTIC_LAYER_DATA_SOURCE&&(t="startQueryBuilder"),t},_getErrorDialog:function(){return this.errorDialog?this.errorDialog:this.errorDialog=new c},_onLevelRenderError:function(e,t,i){t=JSON.parse(t);var n=this._getErrorDialog();n.setMessage(t.parameters[0].substring(t.parameters[0].indexOf(": ")+2,t.parameters[0].indexOf("\n"))),n.open(),i.$el.removeClass(i.loadingClass).addClass(i.openClass)}})}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFolderChooserDialogTemplate.htm",[],function(){return'<div class="control groupBox treeBox">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="content">\n\t\t<div class="header ">\n\t\t\t<div class="title"></div>\n\t\t</div>\n\t\t<div class="body"></div>\n\t</div>\n</div>'}),define("runtime_dependencies/bi-repository/src/bi/repository/enum/olapConnectionTypesEnum",["require","exports","module","../enum/repositoryResourceTypes"],function(e,t,i){var n=e("../enum/repositoryResourceTypes");i.exports=[n.MONDRIAN_CONNECTION,n.SECURE_MONDRIAN_CONNECTION,n.XMLA_CONNECTION]}),define("runtime_dependencies/bi-repository/src/bi/repository/dialog/processor/factory/processorFactory",["require","exports","module","underscore","runtime_dependencies/js-sdk/src/jrs.configs","../../../enum/olapConnectionTypesEnum","../../../enum/repositoryResourceTypes","bundle!CommonBundle"],function(e,t,i){function n(e){switch(e.value.resourceType){case l.REPORT_UNIT:e.cssClass="report";break;case l.DOMAIN_TOPIC:e.cssClass="domain topic";break;case l.SEMANTIC_LAYER_DATA_SOURCE:e.cssClass="domain";break;case l.OLAP_CUBE:e.cssClass="olap"}return e}function o(e){return d[e]}var s=e("underscore"),r=e("runtime_dependencies/js-sdk/src/jrs.configs"),a=e("../../../enum/olapConnectionTypesEnum"),l=e("../../../enum/repositoryResourceTypes"),c=e("bundle!CommonBundle"),d={folderTreeProcessor:{processItem:function(e){return e._readonly=!(1==e.value.permissionMask||4&e.value.permissionMask),e}},treeNodeProcessor:{processItem:function(e){return e._node=s.contains(s.union([l.FOLDER],a),e.value.resourceType),e}},i18nItemProcessor:{processItem:function(e){return e.i18n=c,e}},filterPublicFolderProcessor:{processItem:function(e){if(e.value.uri!=="/root"+r.publicFolderUri&&e.value.uri!=="/root"+r.tempFolderUri)return e}},filterEmptyFoldersProcessor:{processItem:function(e){if("folder"!==e.value.resourceType||""!==e.value._links.content)return e}},cssClassItemProcessor:{processItem:n},fakeUriProcessor:{processItem:function(e){return e.value.uri&&e.value.uri.match(/^\/root/)&&(e.value.uri=e.value.uri.replace("/root","")),e}}};i.exports=o}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm",[],function(){return'<p class="message label">\n\n    <js-templateNonce></js-templateNonce>\n    {{- model.i18n[\'tooltip.name\'] }}</p>\n<p class="message">{{- model.value.label }}</p>\n<p class="message label">{{- model.i18n[\'tooltip.path\'] }}</p>\n<p class="message">{{- model.value.uri }}</p>'}),define("text!runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm",[],function(){return'<ul class="list collapsible" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n\t{{ _.each(items, function(item){ }}\n\t<li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}} {{- item._readonly ? \'readonly\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n\t\t<p class="wrap button draggable" data-tooltip=\'true\'><b class="icon"></b> {{- item.value.label }} </p>\n\t\t<div class="subcontainer" ></div>\n\t</li>\n\t{{ }) }}\n</ul>\n'}),define("runtime_dependencies/bi-repository/src/bi/repository/factory/repositoryTreeFactory",["require","exports","module","runtime_dependencies/js-sdk/src/common/component/tree/Tree","jquery","underscore","bundle!CommonBundle","runtime_dependencies/js-sdk/src/common/component/tree/TreeDataLayer","../dialog/processor/factory/processorFactory","runtime_dependencies/js-sdk/src/common/component/tree/plugin/TooltipPlugin","../enum/repositoryResourceTypes","../enum/olapConnectionTypesEnum","../util/resourcesTreeGetDataUriFnUtil","../util/extractRootLevelDataFromHtmlResponse","text!../dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm","text!../dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm","runtime_dependencies/js-sdk/src/jrs.configs"],function(e,t,i){function n(e){var t=p.extend({},{i18n:m,contentTemplate:w},e.tooltipOptions);return e.constr||h.use(v,t).create()}function o(e){e=e||{};var t=e.processors=p.map(e.processors,function(e){return g(e)});return n(e).instance({listItemHeight:x,bufferSize:e.treeBufferSize||E,additionalCssClasses:"folders",collapserSelector:e.collapserSelector,openClass:e.openClass,closedClass:e.closedClass,levelDataId:"uri",itemsTemplate:e.treeItemsTemplate||T,collapsed:!0,lazyLoad:!0,rootless:!0,getDataUri:y({getFolderUri:d,contextPath:D.contextPath,recursive:!1,type:e.types,containerType:e.containerType,forceTotalCount:!0,forceFullPage:!0}),selection:{allowed:!0,multiple:!1},customDataLayers:{"/":r(e)},processors:t,getDataArray:function(e){if(e&&e[b.RESOURCE_LOOKUP]){e=e[b.RESOURCE_LOOKUP];var t=this.levelDataId;return p.first(e)[t].match(/^\/public/)||(e=p.map(e,function(e){return e.uri="/root"+e[t],e})),e}return[]},getDataSize:function(e,t,i){return+i.getResponseHeader("Total-Count")},getDataLayer:c})}function s(e){var t=[],i=g("filterPublicFolderProcessor");return p.each(e,function(e){e!==i&&t.push(e)}),t}function r(e){var t=e.processors,i=s(t);return p.extend(new f({dataUriTemplate:e.contextPath+"/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1",processors:i,getDataArray:function(e){e=_(e);var t=p.find(e.children,function(e){return"/public"===e.uri}),i=[{id:"/root",label:e.label,uri:"/",resourceType:"folder",permissionMask:u(e.extra),_links:{content:"@fakeContentLink"}}];return t&&i.push({id:"/public",label:t.label,uri:"/public",resourceType:"folder",permissionMask:u(t.extra),_links:{content:"@fakeContentLink"}}),i}}),{accept:"text/html",dataType:"text"})}function a(e){var t=l(),i=e.processors;return n(e).instance({itemsTemplate:e.treeItemsTemplate||T,listItemHeight:x,selection:{allowed:!0,multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,getDataUri:y({getFolderUri:d,contextPath:D.contextPath,recursive:!0,type:e.types,containerType:e.containerType,forceTotalCount:!0,forceFullPage:!0}),levelDataId:"uri",cache:{searchKey:"searchString",pageSize:100},processors:i,customDataLayers:{olapDataLayer:t},getDataLayer:c,getDataArray:function(e){return e&&e[b.RESOURCE_LOOKUP]?e[b.RESOURCE_LOOKUP]:[]},getDataSize:function(e,t,i){return+i.getResponseHeader("Total-Count")}})}function l(){return new f({requestType:"POST",dataUriTemplate:D.contextPath+"/rest_v2/connections",processors:[g("i18nItemProcessor"),g("cssClassItemProcessor")],levelDataId:"uri",getDataArray:function(e){return e&&e[b.RESOURCE_LOOKUP]?e[b.RESOURCE_LOOKUP]:[]}})}function c(e){var t;if(e=e.item?e:this.getLevel(e.id)){if(t=e.item.value.resourceType,p.contains(C,t)){var i=p.clone(this.customDataLayers.olapDataLayer);return p.extend(i,{accept:"application/repository."+t+".metadata+json",contentType:"application/repository."+t+"+json",data:JSON.stringify(t)}),i}return this.customDataLayers&&this.customDataLayers[e.id]?this.customDataLayers[e.id]:this.defaultDataLayer}}function d(e){return e.match(/^\/root/)?e.replace("/root",""):e}function u(e){var t=2;return e.isWritable&&(t|=4),e.isRemovable&&(t|=16),e.isAdministrable&&(t=1),t}var h=e("runtime_dependencies/js-sdk/src/common/component/tree/Tree"),p=(e("jquery"),e("underscore")),m=e("bundle!CommonBundle"),f=e("runtime_dependencies/js-sdk/src/common/component/tree/TreeDataLayer"),g=e("../dialog/processor/factory/processorFactory"),v=e("runtime_dependencies/js-sdk/src/common/component/tree/plugin/TooltipPlugin"),b=e("../enum/repositoryResourceTypes"),C=e("../enum/olapConnectionTypesEnum"),y=e("../util/resourcesTreeGetDataUriFnUtil"),_=e("../util/extractRootLevelDataFromHtmlResponse"),w=e("text!../dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm"),T=e("text!../dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm"),D=e("runtime_dependencies/js-sdk/src/jrs.configs"),x=22,E=5e3,F=function(e){if(e=e||{},!e.types)throw"Resources types required";return e.listView?a(e):o(e)};F.settings=D,i.exports=F}),define("runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/view/RepositoryFolderChooserDialogView",["require","exports","module","underscore","bundle!all","runtime_dependencies/js-sdk/src/common/component/dialog/Dialog","text!../template/repositoryFolderChooserDialogTemplate.htm","../../../factory/repositoryTreeFactory","../../../enum/repositoryResourceTypes"],function(e,t,i){var n=e("underscore"),o=e("bundle!all"),s=e("runtime_dependencies/js-sdk/src/common/component/dialog/Dialog"),r=e("text!../template/repositoryFolderChooserDialogTemplate.htm"),a=e("../../../factory/repositoryTreeFactory"),l=e("../../../enum/repositoryResourceTypes");i.exports=s.extend({constructor:function(e){e||(e={});var t="selectFolder";e.additionalCssClasses&&(t+=" "+e.additionalCssClasses),this.foldersTree=a({processors:["folderTreeProcessor","treeNodeProcessor","i18nItemProcessor","filterPublicFolderProcessor","cssClassItemProcessor","fakeUriProcessor"],treeBufferSize:e.treeBufferSize,types:[l.FOLDER],tooltipOptions:{}}),s.prototype.constructor.call(this,{modal:!0,resizable:!0,minWidth:400,minHeight:400,setMinSizeAsSize:e.setMinSizeAsSize,additionalCssClasses:t,title:o["repository.content"],content:n.template(r)({i18n:o}),buttons:[{label:o["button.select"],action:"select",primary:!0},{label:o["button.cancel"],action:"cancel",primary:!1}]}),this.$contentContainer.find(".control.groupBox .body").append(this.foldersTree.render().el)},initialize:function(e){this.listenTo(this.foldersTree,"selection:change",this._selectionListener),this.listenTo(this,"button:select",this._onOkButtonClick),this.listenTo(this,"button:cancel",this._onCancelButtonClick),s.prototype.initialize.apply(this,arguments),this._isOpened=!1,this.selectedResource=null,this._lastSelectedResource=null},open:function(){this._openDialog()},close:function(){this._closeDialog()},remove:function(){this._closeDialog(),this.foldersTree.remove(),s.prototype.remove.apply(this,arguments)},setDefaultSelectedItem:function(e){this._defaultSelectedItem=e},_onOkButtonClick:function(){this.selectedResource&&(this._closeDialog(),this._lastSelectedResource=this.selectedResource)},_onCancelButtonClick:function(){this.selectedResource=null,this._lastSelectedResource&&(this.selectedResource=this._lastSelectedResource),this._closeDialog()},_openDialog:function(){this._isOpened||(s.prototype.open.apply(this,arguments),this._resetTree(),this.disableButton("select"),this._preselectItem(),this._isOpened=!0)},_closeDialog:function(){this._isOpened&&(s.prototype.close.apply(this,arguments),this._isOpened=!1)},_onDialogResize:function(){var e=this.$contentContainer.find(".treeBox > .content > .body"),t=this.$contentContainer.closest(".jr-mDialog > .jr-mDialog-body");e.width(t.outerWidth(!0)-55),e.height(t.outerHeight(!0)-50)},_selectionListener:function(e){var t=Object.keys(e),i=e&&(n.isArray(e)||n.isObject(e))&&e[t[0]],o=i?i.uri:void 0,s=i?i.resourceType:void 0;if(!(i||o||s))return void this.disableButton("select");this.selectedResource={resourceUri:o},this.enableButton("select")},_resetTree:function(){this.foldersTree.collapse("/root",{silent:!0}),this.foldersTree.collapse("/public",{silent:!0}),this.foldersTree.resetSelection()},_preselectItem:function(){var e=!1;if(this._lastSelectedResource?e=this._lastSelectedResource.resourceUri:this._defaultSelectedItem&&(e=this._defaultSelectedItem),e){var t=this.foldersTree.$el.parent();this.foldersTree._selectTreeNode(e,t)}}})}),define("runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/RepositoryChooserDialogFactory",["require","exports","module","./view/RepositoryItemChooserDialogView","./view/RepositoryFolderChooserDialogView"],function(e,t,i){var n=e("./view/RepositoryItemChooserDialogView"),o=e("./view/RepositoryFolderChooserDialogView"),s={item:n,folder:o};i.exports={getDialog:function(e){var t;return t=n,s[e]&&(t=s[e]),t}}}),define("text!logCollectors/templates/createLogCollector.htm",[],function(){
return'<div class="content hasFooter">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="header">\n\t\t<div class="title">{{- i18n["logCollectors.form.title"] }}</div>\n\t</div>\n\n\t<div class="body">\n\t\t<div class="CreateLogCollector">\n\t\t\t<fieldset class="group shortFields createLogCollectorForm">\n\t\t\t\t<label class="control input text">\n\t\t\t\t\t<span class="wrap">{{- i18n["logCollectors.form.collectorName"] }} ({{- i18n[\'required.field\']}}):</span>\n\t\t\t\t\t<input name="name" type="text" value="{{- name }}">\n\t\t\t\t\t<span class="message hint">{{- i18n["logCollectors.form.collectorName.hint"] }}</span>\n\t\t\t\t\t<span class="message warning"></span>\n\t\t\t\t</label>\n\n\t\t\t\t<label class="control input text userId">\n\t\t\t\t\t<span class="wrap">{{- i18n["logCollectors.form.userId"] }}:</span>\n\t\t\t\t\t<input name="userId" type="text" value="{{- userId }}">\n\t\t\t\t\t<span class="message hint">{{- i18n["logCollectors.form.userId.hint"] }}</span>\n\t\t\t\t\t<span class="message warning"></span>\n\t\t\t\t</label>\n\n\t\t\t\t<div class="control browser resourceUri">\n\t\t\t\t\t<span class="wrap">{{- i18n["logCollectors.form.resourceUri"] }}:</span>\n\t\t\t\t\t<input type="text" id="resourceUri" name="resourceUri" value="{{- resourceUri }}">\n\t\t\t\t\t<button id="resourceUriBrowseButton" name="resourceUriBrowseButton" class="button action" type="button">\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["form.browse"] }}\n\t\t\t\t\t\t\t<span class="icon"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span class="message hint">{{- i18n["logCollectors.form.resourceUri.hint"] }}</span>\n\t\t\t\t\t<span class="message warning"></span>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="control checkBox includeDataSnapshot">\n\t\t\t\t\t<label class="wrap" for="__jrs__includeDataSnapshot">{{- i18n["logCollectors.form.includeDataSnapshot"] }}</label>\n\t\t\t\t\t<input id="__jrs__includeDataSnapshot" type="checkbox" name="includeDataSnapshot">\n\t\t\t\t</div>\n\n\t\t\t\t<label class="control select verbosity">\n\t\t\t\t\t<span class="wrap">{{- i18n["logCollectors.form.verbosityLevel"] }}:</span>\n\t\t\t\t\t<select name="verbosity">\n\t\t\t\t\t\t<option value="low">{{- i18n["logCollectors.form.low"] }}</option>\n\t\t\t\t\t\t<option value="medium">{{- i18n["logCollectors.form.medium"] }}</option>\n\t\t\t\t\t\t<option value="high">{{- i18n["logCollectors.form.high"] }}</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<span class="message warning"></span>\n\t\t\t\t</label>\n\t\t\t</fieldset>\n\t\t</div>\n\t</div>\n\n\t<div class="footer">\n\t\t<fieldset>\n\t\t\t<button class="button primary action up" name="save">\n\t\t\t\t<span class="wrap">{{- i18n["form.edit.save"] }}</span><span class="icon"></span>\n\t\t\t</button>\n\t\t\t<button class="button action up" name="cancel">\n\t\t\t\t<span class="wrap">{{- i18n["form.edit.cancel"] }}</span><span class="icon"></span>\n\t\t\t</button>\n\t\t</fieldset>\n\t</div>\n</div>\n'}),define("text!runtime_dependencies/js-sdk/src/common/templates/dialogErrorPopupTemplate.htm",[],function(){return"{{- message }}\n\n{{\nvar errorLbl = (typeof errorLabel !== 'undefined' ? errorLabel : 'The reason is');\n}}\n\n{{ if (typeof message2 !== 'undefined') { }}\n<br/>{{- errorLbl }}: {{- message2 }}\n{{ } else if (errorCode) { }}\n<br/>{{- errorLbl }}: {{- errorCode }}\n{{ } else if (errorMsg) { }}\n<br/>{{- errorLbl }}: {{- errorMsg }}\n{{ } }}\n\n{{ var respTextLbl = (typeof respTextLabel  !== 'undefined' ? respTextLabel : 'The full response from the server is') }}\n<br/><br/>{{- respTextLbl }}: {{- respText }}"}),define("logCollectors/view/CreateLogCollectorView",["require","exports","module","jquery","underscore","underscore.string","bundle!all","backbone.marionette","runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension","../model/LogCollectorModel","runtime_dependencies/bi-repository/src/bi/repository/enum/repositoryResourceTypes","runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/RepositoryChooserDialogFactory","text!../templates/createLogCollector.htm","text!runtime_dependencies/js-sdk/src/common/templates/dialogErrorPopupTemplate.htm","settings!treeComponent","runtime_dependencies/jrs-ui/src/components/components.dialogs"],function(e,t,i){var n=e("jquery"),o=e("underscore"),s=e("underscore.string"),r=e("bundle!all"),a=e("backbone.marionette"),l=e("runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension"),c=e("../model/LogCollectorModel"),d=e("runtime_dependencies/bi-repository/src/bi/repository/enum/repositoryResourceTypes"),u=e("runtime_dependencies/bi-repository/src/bi/repository/dialog/resourceChooser/RepositoryChooserDialogFactory"),h=e("text!../templates/createLogCollector.htm"),p=e("text!runtime_dependencies/js-sdk/src/common/templates/dialogErrorPopupTemplate.htm"),m=e("settings!treeComponent"),f=e("runtime_dependencies/jrs-ui/src/components/components.dialogs");i.exports=a.ItemView.extend({initialize:function(e){this.options=e||{},this.prepareNewModel()},prepareNewModel:function(){this.unbindValidation(),this.model=new c(o.cloneDeep(c.prototype.defaults),o.extend({},this.options,{parse:!0})),this.reportChooserDialog&&(this.reportChooserDialog.remove(),this.reportChooserDialog=null),this.bindValidation()},render:function(){this.setElement(o.template(h,o.extend({},this.model.attributes,{i18n:r})))},events:{"keyup input[type='text'], input[type='password'], textarea, select":"updateModelProperty","change input[type='text'], input[type='password'], input[type='checkbox'], textarea, select":"updateModelProperty","click button[name=resourceUriBrowseButton]":"onBrowseButtonClick","click button[name=save]":"onSaveButtonClick","click button[name=cancel]":"onCancelButtonClick"},onShow:function(){this.$el.find("[name=name]").focus()},bindValidation:function(){l.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0,selector:"name"})},unbindValidation:function(){l.unbind(this)},fieldIsValid:function(e,t,i){var n=e.$("["+i+"="+t+"]").parent();n.removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,i,n){var o=e.$("["+n+"="+t+"]");o.focus();var s=o.parent();s.addClass("error"),s.find(".message.warning").text(i.toString())},updateModelProperty:function(e){var t=n(e.target),i={},o=t.attr("name");i[o]="checkbox"===t.attr("type")?t.is(":checked"):n.trim(t.val()),"userId"===o&&this.fieldIsValid(this,"userId","name"),this.model.set(i),this.model.validate(i)},getReportChooserDialog:function(){if(this.reportChooserDialog)return this.reportChooserDialog;var e=u.getDialog("item");return this.reportChooserDialog=new e({treeBufferSize:parseInt(m.treeLevelLimit,10),resourcesTypeToSelect:[d.REPORT_UNIT,d.ADHOC_DATA_VIEW]}),this.listenTo(this.reportChooserDialog,"close",function(){var e;if(this.reportChooserDialog.selectedResource){e=this.reportChooserDialog.selectedResource.resourceUri;var t=this.$el.find("[name=resourceUri]").val(e);this.model.set("resourceUri",e),t.trigger("change")}}),this.reportChooserDialog},onBrowseButtonClick:function(){this.getReportChooserDialog().open()},onSaveButtonClick:function(){if(this.model.isValid(!0)){var e=this;this.model.save().done(function(){var t=e.model.toJSON();e.trigger("logCollectorHasBeenCreated",t)}).fail(o.bind(this._saveErrorCallback,this))}},onCancelButtonClick:function(){this.trigger("cancelButtonClick")},_saveErrorCallback:function(e){var t=!1;try{t=JSON.parse(e.responseText)}catch(e){}var i=this;t.errorDescriptor&&(t=t.errorDescriptor);var n="";t&&t.parameters?n=t.parameters[0]:-1!==t.message.indexOf("com.jaspersoft.ji.diagnostic.")&&(n=t.message),n=n.replace("com.jaspersoft.ji.diagnostic.",""),"Verbosity"===n&&(n="verbosity"),"collector"!==n&&"Name"!==n||(n="name"),"reportURI"!=n&&"URI"!=n||(n="resourceUri");var o="";if("mandatory.parameter.error"===t.errorCode)o=r["logCollectors.form.parameterIsMissing"];else if("illegal.parameter.value.error"===t.errorCode)o="userId"===n?r["logCollectors.form.userNameIsWrong"]:"resourceUri"===n?r["logCollectors.form.resourceNotFound"].replace("{0}",t.parameters[1]):r["logCollectors.form.parameterIsWrong"];else if("resource.already.exists"===t.errorCode)n="name",o=r["logCollectors.form.nameExists"];else if("access.denied"===t.errorCode)o=r["jsp.accessDenied.errorMsg"],n="resourceUri";else if("resource.not.found"===t.errorCode){var a=t.parameters[0];t.parameters[0].length>50&&(a='"'+s.truncate(t.parameters[0],50)+'"'),o=r["logCollectors.form.resourceNotFound"].replace("{0}",a),n="resourceUri"}else"unsupported.resource.type"===t.errorCode?(o=r["logCollectors.form.resourceNotSupported"],n="resourceUri"):"unsupported.olap.based.resource.type"===t.errorCode&&(o=r["logCollectors.form.unsupported.olap.based.resource.type"],n="resourceUri");if(n)return void this.fieldIsInvalid(i,n,o,"name");this._displayErrorPopup(o||!1,t,e)},_displayErrorPopup:function(e,t,i){var n,s=o.template(p,{message:r["logCollectors.form.failedToSave"],message2:e,errorCode:t[0]?t[0].errorCode:null,errorMsg:t.message,errorLabel:r["logCollectors.form.theReasonIs"],respText:i.responseText,respTextLabel:r["logCollectors.form.fullResponseFromServerIs"]});n=r["logCollectors.form.failedToSave"],e?n+="<br/>"+r["logCollectors.form.theReasonIs"]+": "+e:t[0]&&t[0].errorCode?n+="<br/>"+r["logCollectors.form.theReasonIs"]+": "+t[0].errorCode:t.message&&(n+="<br/>"+r["logCollectors.form.theReasonIs"]+": "+t.message),n+="<br/><br/>"+r["logCollectors.form.fullResponseFromServerIs"]+": "+i.responseText,f.errorPopup.show(s)}})}),define("text!logCollectors/templates/logCollector.htm",[],function(){return'<tr class="collectorColumns" status="{{- status.toLowerCase() }}">\n\n    <js-templateNonce></js-templateNonce>\n\t<td class="cOne">{{- name }}</td>\n\t<td class="cTwo" title="{{- userId }}">{{- userId }}</td>\n\t<td class="cThree">\n\t\t{{ if (status.toLowerCase() === collectorStatusEnum.RUNNING.toLowerCase()) { }}\n\t\t\t<select name="verbosity">\n\t\t\t\t<option value="low" {{ if (verbosity.toLowerCase() === "low") { }} selected {{ } }} >{{- i18n["logCollectors.form.low"] }}</option>\n\t\t\t\t<option value="medium" {{ if (verbosity.toLowerCase() === "medium") { }} selected {{ } }} >{{- i18n["logCollectors.form.medium"] }}</option>\n\t\t\t\t<option value="high" {{ if (verbosity.toLowerCase() === "high") { }} selected {{ } }} >{{- i18n["logCollectors.form.high"] }}</option>\n\t\t\t</select>\n\t\t{{ } else { }}\n\t\t\t<span name="verbosity">\n\t\t\t{{- i18n["logCollectors.form." + verbosity.toLowerCase()] }}\n\t\t\t</span>\n\t\t{{ } }}\n\t</td>\n\t<td class="cFour">{{ if (includeDataSnapshot === true) { }} {{- i18n["logCollectors.list.yes"] }} {{ } else { }} {{- i18n["logCollectors.list.no"] }} {{ } }}</td>\n\t<td class="cFive" name="status">{{- i18n["logCollectors.list.status." + status.toLowerCase()] }}</td>\n\t<td class="cSix actionIcons" name="icons">\n\t\t<div name="stopIcon" class="stop {{- status.toLowerCase() }}"></div>\n\t\t<div name="downloadIcon" class="download {{ if (status.toLowerCase() !== collectorStatusEnum.STOPPED.toLowerCase()) { }} notAvailable {{ } }}"></div>\n\t\t<div name="deleteIcon" class="remove {{ if (status.toLowerCase() === collectorStatusEnum.SHUTTING_DOWN.toLowerCase()) { }} notAvailable {{ } }}"></div>\n\t</td>\n</tr>\n'}),define("logCollectors/view/LogCollectorView",["require","exports","module","jquery","underscore","bundle!all","backbone","runtime_dependencies/js-sdk/src/jrs.configs","runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension","runtime_dependencies/js-sdk/src/common/component/dialog/AlertDialog","../enum/collectorStatusEnum","../model/LogCollectorModel","runtime_dependencies/js-sdk/src/common/component/dialog/ConfirmationDialog","text!../templates/logCollector.htm"],function(e,t,i){var n=e("jquery"),o=e("underscore"),s=e("bundle!all"),r=e("backbone"),a=e("runtime_dependencies/js-sdk/src/jrs.configs"),l=e("runtime_dependencies/js-sdk/src/common/extension/backboneValidationExtension"),c=e("runtime_dependencies/js-sdk/src/common/component/dialog/AlertDialog"),d=e("../enum/collectorStatusEnum"),u=e("../model/LogCollectorModel"),h=e("runtime_dependencies/js-sdk/src/common/component/dialog/ConfirmationDialog"),p=e("text!../templates/logCollector.htm");i.exports=r.View.extend({events:{"keyup input, textarea, select":"updateModelProperty","change input, textarea, select":"updateModelProperty","change [name=verbosity]":"verbosityChange","click [name=stopIcon]":"stopIconClick","click [name=downloadIcon]":"downloadIconClick","click [name=deleteIcon]":"deleteIconClick"},constructor:function(e){var t=n.extend(!0,[],arguments);e=n.extend(!0,{},e),t[0]=e,r.View.apply(this,t)},initialize:function(e){this.options=e,this._updatingModeData={inProgress:!1,timeoutHandler:!1,startTimestamp:0,updateNumber:0,secondsToWaitForShutdown:300},this.model=new u(e.collectorModelFromServer,o.extend({},e,{parse:!0})),l.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0,selector:"name"}),this.listenTo(this.model,"change:verbosity change:status",this.updateUI),this.listenTo(this.model,"change:status",this.statusChange),this.listenTo(this.model,"server_communication_error",this.showServerCommunicationError),this.model.isInShuttingDownMode()&&this._startUpdateProcess()},getErrorDialog:function(){return this.errorDialog?this.errorDialog:this.errorDialog=new c},updateModelProperty:function(e){var t=n(e.target),i={};i[t.attr("realName")||t.attr("name")]="checkbox"===t.attr("type")?t.is(":checked"):n.trim(t.val()),this.model.set(i),this.model.validate(i)},render:function(){return this.setElement(o.template(p,o.extend({},this.model.attributes,{i18n:s,collectorStatusEnum:d}))),this},updateUI:function(e){this.undelegateEvents();var t=o.extend({},this.model.attributes,{i18n:s,collectorStatusEnum:d});e&&(t=o.extend(t,e));var i=n(o.template(p,t));this.$el.find("[name=verbosity]").replaceWith(i.find("[name=verbosity]")),this.$el.find("[name=status]").replaceWith(i.find("[name=status]")),this.$el.find("[name=icons]").children().remove(),this.$el.find("[name=icons]").append(i.find("[name=icons]").children()),this.$el.attr("status",this.model.get("status").toLowerCase()),this.delegateEvents()},fieldIsValid:function(e,t,i){var n=e.$("["+i+'="'+t+'"]').parent();n.removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,i,n){if(!0!==i){var o=e.$("["+n+'="'+t+'"]').parent();o.addClass("error"),o.find(".message.warning").text(i)}},verbosityChange:function(){var e=this;this.model.save().fail(function(){e.showServerCommunicationError()})},statusChange:function(){this.trigger("modelStatusChange")},showServerCommunicationError:function(){var e=this.getErrorDialog();e.setMessage(s["logCollectors.alert.server.communication.error"]),e.open()},_startUpdateProcess:function(){!0!==this._updatingModeData.inProgress&&(this._updatingModeData.inProgress=!0,this._updatingModeData.startTimestamp=Math.floor((new Date).getTime()/1e3),this._updatingModeData.updateNumber=0,this._scheduleModelUpdate())},_scheduleModelUpdate:function(){this._updatingModeData.updateNumber++;var e=5;this._updatingModeData.updateNumber<5&&(e=1),this._updatingModeData.timeoutHandler=setTimeout(o.bind(this.updateItsModelFromServer,this),1e3*e)},_stopUpdateProcess:function(){!1!==this._updatingModeData.inProgress&&(clearTimeout(this._updatingModeData.timeoutHandler),this._updatingModeData.timeoutHandler=!1,this._updatingModeData.updateNumber=0,this._updatingModeData.inProgress=!1)},updateItsModelFromServer:function(){this.model.fetch().done(o.bind(function(){if(this.model.isInShuttingDownMode()){if(Math.floor((new Date).getTime()/1e3)-this._updatingModeData.startTimestamp>this._updatingModeData.secondsToWaitForShutdown)return void this._stopUpdateProcess();this._scheduleModelUpdate()}else this._stopUpdateProcess(),this.trigger("stopped")},this)).fail(o.bind(function(){this._stopUpdateProcess()},this))},stopIconClick:function(){if(this.model.isInRunningMode()){var e=this,t=this.model.sendStopSignal();if(!t)return;this.model.set({status:d.SHUTTING_DOWN}),t.fail(function(){e.showServerCommunicationError()}).done(function(){e._startUpdateProcess()})}},downloadIconClick:function(){if(this.model.isInStoppedMode()){var e=a.contextPath+"/rest_v2/diagnostic/collectors/"+this.model.get("id")+"/content",t=document.createElement("iframe");t.src=e,t.style.display="none",n(t).on("load",o.bind(this._onDownloadIframeLoad,this,t)),n("body").append(t)}},_onDownloadIframeLoad:function(e){if(e.contentWindow||e.contentDocument){var t=(e.contentWindow||e.contentDocument).document,i=!1;t.getElementsByTagName("errorDescriptor").length>0&&(i=!0),n("body > *",t).length>0&&(i=!0),!0===i&&this.showServerCommunicationError()}else setTimeout(function(){o.bind(this._onDownloadIframeLoad,this,e)},1e3)},deleteIconClick:function(){if(!this.model.isInShuttingDownMode()){var e=this,t=s["logCollectors.confirm.deleteOne"].replace("{name}",this.model.get("name")).replace("{newline}","<br><br>"),i=new h({title:s["logCollectors.confirm.title"],text:t});this.listenTo(i,"button:yes",function(){e.model.destroy({dataType:"text"}).done(function(){e.remove(),e.trigger("removed",e.model.get("id"))}).fail(function(){e.showServerCommunicationError()})}),i.open()}}})}),define("text!logCollectors/templates/LogCollectorsList.htm",[],function(){return'<div class="content">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="header">\n\t\t<div class="title">{{- i18n["logCollectors.title"] }}</div>\n\t</div>\n\n\t<div class="body">\n\t\t<div class="LogCollectors">\n\n\t\t\t<div class="subheader">\n\t\t\t\t<div class="toolbar">\n\t\t\t\t\t<ul class="list buttonSet">\n\t\t\t\t\t\t<li class="leaf"><button name="createNewBtn" class="button capsule text up"><span class="wrap">{{- i18n["logCollectors.list.createLogCollector"] }}</span><span class="icon"></span></button></li>\n\t\t\t\t\t\t<li class="leaf"><button name="stopAllBtn" class="button capsule text up"><span class="wrap">{{- i18n["logCollectors.list.stopAll"] }}</span><span class="icon"></span></button></li>\n\t\t\t\t\t\t<li class="leaf"><button name="deleteAllBtn" class="button capsule text up"><span class="wrap">{{- i18n["logCollectors.list.deleteAll"] }}</span><span class="icon"></span></button></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<table class="collectorsList">\n\t\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class="cOne">{{- i18n["logCollectors.list.collectorName"] }}</td>\n\t\t\t\t\t<td class="cTwo">{{- i18n["logCollectors.list.userId"] }}</td>\n\t\t\t\t\t<td class="cThree">{{- i18n["logCollectors.list.verbosity"] }}</td>\n\t\t\t\t\t<td class="cFour">{{- i18n["logCollectors.list.dataSnapshot"] }}</td>\n\t\t\t\t\t<td class="cFive">{{- i18n["logCollectors.list.status"] }}</td>\n\t\t\t\t\t<td class="cSix"></td>\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody name="collectors">\n\t\t\t\t</tbody>\n\t\t\t</table>\n\n\t\t\t<div name="nothingToDisplay" class="panel info nothingToDisplay centered_vert centered_horz hidden">\n\t\t\t\t{{- i18n["logCollectors.list.noCollectorsFound"] }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}),define("logCollectors/collectionView/LogCollectorCollectionView",["require","exports","module","jquery","underscore","bundle!all","runtime_dependencies/js-sdk/src/jrs.configs","request","backbone.marionette","runtime_dependencies/js-sdk/src/common/component/dialog/AlertDialog","../enum/collectorStatusEnum","../view/LogCollectorView","runtime_dependencies/js-sdk/src/common/component/dialog/ConfirmationDialog","text!../templates/LogCollectorsList.htm"],function(e,t,i){var n=e("jquery"),o=e("underscore"),s=e("bundle!all"),r=e("runtime_dependencies/js-sdk/src/jrs.configs"),a=e("request"),l=e("backbone.marionette"),c=e("runtime_dependencies/js-sdk/src/common/component/dialog/AlertDialog"),d=e("../enum/collectorStatusEnum"),u=e("../view/LogCollectorView"),h=e("runtime_dependencies/js-sdk/src/common/component/dialog/ConfirmationDialog"),p=e("text!../templates/LogCollectorsList.htm");i.exports=l.CollectionView.extend({initialize:function(e,t){this.options=t,this.setElement(o.template(p,{i18n:s})),this.$collectors=this.$el.find("[name=collectors]"),this.$nothingToDisplay=this.$el.find("[name=nothingToDisplay]"),this.ui={},this.ui.createNewButton=this.$el.find("[name=createNewBtn]"),this.ui.stopAllButton=this.$el.find("[name=stopAllBtn]"),this.ui.deleteAllButton=this.$el.find("[name=deleteAllBtn]"),this.ui.createNewButton.on("click",o.bind(this.createNewLogCollector,this)),this.ui.stopAllButton.on("click",o.bind(this.confirmStopAll,this)),this.ui.deleteAllButton.on("click",o.bind(this.confirmDeleteAll,this)),this.views=[]},getErrorDialog:function(){return this.errorDialog?this.errorDialog:this.errorDialog=new c},removeOverClassOnButtons:function(){this.$el.find("button").removeClass("over")},parse:function(e){var t=e.CollectorSettingsList;return t=o.sortBy(t,function(e){return e.name})},showServerCommunicationError:function(){var e=this.getErrorDialog();e.setMessage(s["logCollectors.alert.server.communication.error"]),e.open()},appendNewlyCreatedLogCollector:function(e){var t=this._buildViewFromModel(e);this.views.push(t),t.render(),this.$collectors.append(t.$el),this._reRenderAllButtons(),this._reRenderNothingToDisplay()},refreshListOfCollectors:function(){var e=this,t=new n.Deferred;return a({type:"GET",url:r.contextPath+"/rest_v2/diagnostic/collectors",cache:!1,headers:{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}}).done(function(i){i=i?e.parse(i):[],e._refreshListOfCollectorsDone(i),t.resolve()}).fail(function(i){if(404===i.status)return e._refreshListOfCollectorsDone([]),void t.resolve();t.reject(),e.showServerCommunicationError()}),t},_refreshListOfCollectorsDone:function(e){var t=this;this.removeCollectorsFromDOM(),this.views=[],o.each(e,function(e){var i=t._buildViewFromModel(e);t.views.push(i),i.render(),t.$collectors.append(i.$el)}),this._reRenderAllButtons(),this._reRenderNothingToDisplay()},_buildViewFromModel:function(e){var t=new u({collectorModelFromServer:e});return this.listenTo(t,"removed",this.onCollectorViewRemoved),this.listenTo(t,"modelStatusChange",this._reRenderAllButtons),this.listenTo(t,"stopped",this._reRenderAllButtons),t},triggerButtons:function(e,t){"all"===t&&(t=["stopAll","deleteAll"]);for(var i,n=0;n<t.length;n++){switch(i=t[n]){case"stopAll":i=this.ui.stopAllButton;break;case"deleteAll":i=this.ui.deleteAllButton;break;default:return}e?i.removeAttr("disabled"):i.attr("disabled","true")}},createNewLogCollector:function(){this.trigger("createNewCollectorClick")},confirmStopAll:function(){if(0!==this.views.length){var e=s["logCollectors.confirm.stopAll"].replace("{newline}","<br/><br/>"),t=new h({title:s["logCollectors.confirm.title"],text:e});this.listenTo(t,"button:yes",this.stopAll),t.open()}},stopAll:function(){var e=this,t=JSON.stringify({version:0,patch:[{field:"status",value:d.STOPPED}]});o.each(this.views,function(e){e.model.isInRunningMode()&&(e.model.set({status:d.SHUTTING_DOWN},{silent:!0}),e.updateUI({status:d.SHUTTING_DOWN}))}),this.triggerButtons(!1,"all"),a({type:"PATCH",url:r.contextPath+"/rest_v2/diagnostic/collectors/",cache:!1,headers:{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"},data:t}).always(function(){e.triggerButtons(!0,"all")}).done(function(){e.refreshListOfCollectors()}).fail(function(){e.showServerCommunicationError()})},confirmDeleteAll:function(){if(0!==this.views.length){var e=s["logCollectors.confirm.deleteAll"].replace("{newline}","<br><br>"),t=new h({title:s["logCollectors.confirm.title"],text:e});this.listenTo(t,"button:yes",this.deleteAll),t.open()}},deleteAll:function(){var e=this;e.triggerButtons(!1,"all"),a({type:"DELETE",url:r.contextPath+"/rest_v2/diagnostic/collectors",cache:!1,headers:{Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}}).always(function(){e.triggerButtons(!0,"all")}).done(function(){e.removeCollectorsFromDOM(),e.views=[],e._reRenderAllButtons(),e._reRenderNothingToDisplay()}).fail(function(){e.showServerCommunicationError()})},removeCollectorsFromDOM:function(){o.each(this.views,function(e){e.$el.detach()})},onCollectorViewRemoved:function(e){this.views=o.filter(this.views,function(t){return t.model.get("id")!==e},this),this._reRenderAllButtons(),this._reRenderNothingToDisplay()},_reRenderNothingToDisplay:function(){this.$nothingToDisplay.addClass("hidden"),0===this.views.length&&this.$nothingToDisplay.removeClass("hidden")},_reRenderAllButtons:function(){var e=!1,t=!1;this.ui.stopAllButton.attr("disabled","true"),this.ui.deleteAllButton.attr("disabled","true"),o.each(this.views,function(i){i.model.isInRunningMode()&&(e=!0),i.model.isInShuttingDownMode()&&(t=!0)}),e&&!t&&this.ui.stopAllButton.removeAttr("disabled"),this.views.length>0&&!t&&this.ui.deleteAllButton.removeAttr("disabled")}})}),define("logCollectors/LogCollectorsController",["require","exports","module","jquery","bundle!all","runtime_dependencies/js-sdk/src/jrs.configs","backbone.marionette","runtime_dependencies/js-sdk/src/common/component/dialog/LoadingDialog","./view/CreateLogCollectorView","./collectionView/LogCollectorCollectionView"],function(e,t,i){var n=e("jquery"),o=e("bundle!all"),s=e("runtime_dependencies/js-sdk/src/jrs.configs"),r=e("backbone.marionette"),a=e("runtime_dependencies/js-sdk/src/common/component/dialog/LoadingDialog"),l=e("./view/CreateLogCollectorView"),c=e("./collectionView/LogCollectorCollectionView");i.exports=r.Application.extend({initialize:function(e){this.options=e,this.$el=n(this.options.container),this.addRegions({LogCollectorRegion:r.Region.extend({el:this.$el})}),this.loadingDialog=new a({content:o["dialog.overlay.loading"]}),this.createLogCollectorView=new l(null,this.options),this.listenTo(this.createLogCollectorView,"logCollectorHasBeenCreated",this.logCollectorHasBeenCreated),this.listenTo(this.createLogCollectorView,"cancelButtonClick",this.creatingFormCancelButtonClick),this.logCollectorCollectionView=new c([],this.options),this.listenTo(this.logCollectorCollectionView,"createNewCollectorClick",this.createNewCollectorClick),this.logCollectorCollectionView.render(),this.LogCollectorRegion.show(this.logCollectorCollectionView,{preventDestroy:!0}),this.logCollectorCollectionView.refreshListOfCollectors()},createNewCollectorClick:function(){this.createLogCollectorView.prepareNewModel(),this.createLogCollectorView.render(),this.LogCollectorRegion.show(this.createLogCollectorView,{preventDestroy:!0}),this.logCollectorCollectionView.removeOverClassOnButtons()},logCollectorHasBeenCreated:function(e){this.logCollectorCollectionView.appendNewlyCreatedLogCollector(e),this.openLoadingDialog();var t=this;this.logCollectorCollectionView.refreshListOfCollectors().done(function(){t.closeLoadingDialog()}),this.LogCollectorRegion.show(this.logCollectorCollectionView,{preventDestroy:!0})},creatingFormCancelButtonClick:function(){this.LogCollectorRegion.show(this.logCollectorCollectionView,{preventDestroy:!0})},setTitle:function(e){n(s.logCollectors.initParams.container+" div.content .title").text(e)},openLoadingDialog:function(e){if(!0!==this.loadingDialogIsOpened){e=e||250;var t=this;this.loadingDialogTimerHandler=setTimeout(function(){t.loadingDialogIsOpened=!0,t.loadingDialog.open()},e)}},closeLoadingDialog:function(){this.loadingDialogTimerHandler&&(clearTimeout(this.loadingDialogTimerHandler),this.loadingDialogTimerHandler=!1),!1!==this.loadingDialogIsOpened&&(this.loadingDialog.close(),this.loadingDialogIsOpened=!1)}})}),define("logCollectors/logCollectorsMain",["require","exports","module","requirejs-domready","runtime_dependencies/jrs-ui/src/administer/administer.logging","runtime_dependencies/js-sdk/src/jrs.configs","./LogCollectorsController","runtime_dependencies/jrs-ui/src/core/core.layout","runtime_dependencies/jrs-ui/src/administer/administer.base"],function(e,t,i){var n=e("requirejs-domready"),o=e("runtime_dependencies/jrs-ui/src/administer/administer.logging"),s=e("runtime_dependencies/js-sdk/src/jrs.configs"),r=e("./LogCollectorsController"),a=e("runtime_dependencies/jrs-ui/src/core/core.layout"),l=e("runtime_dependencies/jrs-ui/src/administer/administer.base");n(function(){o.initialize(),l.urlContext=s.urlContext,new r({container:s.logCollectors.initParams.container}),a.resizeOnClient("serverSettingsMenu",s.logCollectors.initParams.container.replace("#",""))})});