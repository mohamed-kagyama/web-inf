/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define(["require","exports","module","underscore","requirejs-domready","backbone","runtime_dependencies/js-sdk/src/jrs.configs","runtime_dependencies/jrs-ui/src/scheduler/view/SchedulerApp","../model/JobModelPro","../enum/scheduledResourceTypeEnum","../view/JobsViewPro","../view/JobEditorViewPro","runtime_dependencies/jrs-ui/src/controls/controls.base"],function(e,r,o){var i=e("underscore"),s=e("requirejs-domready"),n=e("backbone"),t=e("runtime_dependencies/js-sdk/src/jrs.configs"),d=e("runtime_dependencies/jrs-ui/src/scheduler/view/SchedulerApp"),c=e("../model/JobModelPro"),a=e("../enum/scheduledResourceTypeEnum"),u=e("../view/JobsViewPro"),l=e("../view/JobEditorViewPro"),p=e("runtime_dependencies/jrs-ui/src/controls/controls.base"),h=p.ControlsBase;s(function(){i.extend(h,t.inputControlsConstants)}),o.exports=d.extend({_createJobModel:function(){return new c},_createJobsView:function(e){return new u(e)},_createJobEditorView:function(e){return new l(e)},_getChildViewInitParams:function(){var e=d.prototype._getChildViewInitParams.apply(this,arguments);return e.isDashboard="DashboardModelResource"===this.schedulerStartupParams.resourceType,e.model.resourceType=this.schedulerStartupParams.resourceType,e},openEditJobInterface:function(e){var r=this,o=arguments;if(this.masterViewMode){var s=new n.Model;s.urlRoot=this.childViewInitParams.model.urlRoot,s.set({id:e}),s.fetch({headers:{Accept:"application/job+json"}}).done(function(){var e=s.get("source");r.childViewInitParams.isDashboard=!i.isUndefined(e.referenceWidth)&&!i.isUndefined(e.referenceHeight),r.childViewInitParams.model.resourceType=r.childViewInitParams.isDashboard?a.DASHBOARD:"",r.childViewInitParams.model._fetched=s.attributes,d.prototype.openEditJobInterface.call(r,o)})}else d.prototype.openEditJobInterface.apply(this,arguments)}})});