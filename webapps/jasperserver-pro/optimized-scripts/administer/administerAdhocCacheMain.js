/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define("runtime_dependencies/jrs-ui/src/administer/administer.base",["require","exports","module","prototype","underscore","../core/core.ajax","../core/core.ajax.utils"],function(e,t,n){var i=e("prototype"),r=i.Template,o=e("underscore"),s=e("../core/core.ajax"),d=s.ajaxTargettedUpdate,a=s.AjaxRequester,l=e("../core/core.ajax.utils"),u=l.baseErrorHandler;void 0===window.Administer&&(window.Administer={}),window.Administer=o.extend({_messages:{},urlContext:null,getMessage:function(e,t){var n=this._messages[e];return n?new r(n).evaluate(t||{}):""},menuActions:{"p#navAnalysisOptions":function(){return window.Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return window.Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return window.Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return window.Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return window.Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return window.Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return window.Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return window.Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return window.Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return window.Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return window.Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,n){d(e,{postData:t,callback:n,mode:a.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):u(e)}},window.Administer),n.exports=window.Administer}),define("administer/administer.cache",["require","exports","module","prototype","runtime_dependencies/jrs-ui/src/core/core.layout","runtime_dependencies/jrs-ui/src/components/components.webHelp","runtime_dependencies/jrs-ui/src/util/utils.common","runtime_dependencies/jrs-ui/src/core/core.events.bis","runtime_dependencies/jrs-ui/src/components/components.dialogs","runtime_dependencies/jrs-ui/src/administer/administer.base","jquery"],function(e,t,n){var i=e("prototype"),r=i.$,o=i.$$,s=e("runtime_dependencies/jrs-ui/src/core/core.layout"),d=e("runtime_dependencies/jrs-ui/src/components/components.webHelp"),a=e("runtime_dependencies/jrs-ui/src/util/utils.common"),l=a.centerElement,u=a.matchAny,c=e("runtime_dependencies/jrs-ui/src/core/core.events.bis"),m=e("runtime_dependencies/jrs-ui/src/components/components.dialogs"),p=e("runtime_dependencies/jrs-ui/src/administer/administer.base"),_=e("jquery"),w={DS_CONTAINER:"dsContainer",BUTTON_CLOSE:"#detail #close",BUTTON_CLEAR_ALL_CACHE:"clearAllCache",Q_ITEM_PFX:"qItem_",SORTING_FORM:"changeSortType",SORTING_SELECT_ITEMS:"#sortMode .tab",initialize:function(){if(s.resizeOnClient("serverSettingsMenu","settings"),d.setCurrentContext("admin"),!r(this.DS_CONTAINER)){var e=r("nothingToDisplay");e.removeClassName(s.HIDDEN_CLASS),l(e,{horz:!0,vert:!0}),_(document.body).addClass(s.NOTHING_TO_DISPLAY_CLASS)}r("display").observe("click",function(e){var t=e.element(),n=u(t,[s.BUTTON_PATTERN],!0);if(n){for(var i in p.menuActions)if(n.match(i)&&!n.up("li").hasClassName("selected"))return void(document.location=p.menuActions[i]());if(n.match("button#"+w.BUTTON_CLEAR_ALL_CACHE)&&(e.stop(),w._clearAll()),n.match("div.five > button"))return void w._clearQuery(n)}if(t.match("a")&&u(t,["div.two"],!0))return void w._getDetails(t)}),document.body.appendChild(r("detail")),o(w.BUTTON_CLOSE)[0].observe("click",function(e){e.stop(),m.popup.hide(r("detail"))});var t=r(w.SORTING_FORM),n=t.sort.value;o(w.SORTING_SELECT_ITEMS).each(function(e){n&&r(e)[n===e.id?"addClassName":"removeClassName"]("selected"),r(e).observe("click",function(e){return function(){t.sort.setAttribute("value",e),t.submit()}}(e.id))})},_getDetails:function(e){var t="flow.html?_flowExecutionKey="+p.flowExecutionKey+"&_eventId=isServerAvailable";p._sendRequest(t,null,function(t){if(t.data&&"Yes"==t.data.strip()){var n="id="+e.readAttribute("name"),i="flow.html?_flowExecutionKey="+p.flowExecutionKey+"&_eventId=getDetails";p._sendRequest(i,n,w._getDetailsCallback)}})},_clearQuery:function(e){var t="id="+e.name,n="flow.html?_flowExecutionKey="+p.flowExecutionKey+"&_eventId=clearQuery";p._sendRequest(n,t,w._clearCallback)},_clearAll:function(){var e="flow.html?_flowExecutionKey="+p.flowExecutionKey+"&_eventId=clearAll";p._sendRequest(e,null,w._clearCallback)},_getDetailsCallback:function(e){var t=r("detail");r("detAge").update(e.age),r("detQuery").update(e.query.replace(new RegExp("\n","g"),"<br/>")),r("detDataSourceURI").update(e.datasourceURI),r("detParameters").update(e.params),r("detTime").update(e.idle),r("detRows").update(e.rows),r("detQueryTime").update(e.queryTime),r("detFetchTime").update(e.fetchTime),m.popup.show(t)},_clearCallback:function(e){if(r("detail").hide(),e.empty){var t=r("nothingToDisplay");t.removeClassName(s.HIDDEN_CLASS),l(t,{horz:!0,vert:!0}),_(document.body).addClass(s.NOTHING_TO_DISPLAY_CLASS),w._disableClearAll()}else e.id&&r(w.Q_ITEM_PFX+e.id).remove();m.systemConfirm.show(p.getMessage(e.result))},_disableClearAll:function(e){c.disable(r(w.BUTTON_CLEAR_ALL_CACHE))}};void 0===e&&document.observe("dom:loaded",w.initialize.bind(w)),n.exports=w}),define("administer/administerAdhocCacheMain",["require","exports","module","requirejs-domready","runtime_dependencies/jrs-ui/src/administer/administer.base","./administer.cache","runtime_dependencies/js-sdk/src/jrs.configs"],function(e,t,n){var i=e("requirejs-domready"),r=e("runtime_dependencies/jrs-ui/src/administer/administer.base"),o=e("./administer.cache"),s=e("runtime_dependencies/js-sdk/src/jrs.configs");i(function(){r.urlContext=s.urlContext,o.initialize()})});