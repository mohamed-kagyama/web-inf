/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define("runtime_dependencies/jrs-ui/src/resource/resource.add.mondrianxmla",["require","exports","module","prototype","./resource.base","../util/utils.common","../components/components.pickers"],function(e,i,t){var s=e("prototype"),r=s.$,n=e("./resource.base"),o=e("../util/utils.common"),a=o.ValidationModule,d=e("../components/components.pickers"),c={LABEL_ID:"label",RESOURCE_ID_ID:"resourceID",DESCRIPTION_ID:"description",CATALOG_ID:"catalog",SAVE_BUTTON_ID:"save",_canGenerateId:!0,initialize:function(e){this._form=r(document.body).select("form")[0],this._label=r(this.LABEL_ID),this._resourceId=r(this.RESOURCE_ID_ID),this._description=r(this.DESCRIPTION_ID),this._catalog=r(this.CATALOG_ID),this._saveButton=r(this.SAVE_BUTTON_ID),this._isEditMode=e.isEditMode,this._label.validator=n.labelValidator.bind(this),this._resourceId.validator=n.resourceIdValidator.bind(this),this._description.validator=n.descriptionValidator.bind(this),this._catalog.validator=this._catalogValidator.bind(this),new d.FileSelector({treeId:"resourceTreeRepoLocation",providerId:"mondrianTreeDataProvider",uriTextboxId:"mondrianConnectionReference",browseButtonId:"browser_button",title:n.messages["resource.Add.Files.Title"],selectLeavesOnly:!0}),this._initEvents()},_initEvents:function(){this._saveButton.observe("click",function(e){this._isDataValid()||e.stop()}.bindAsEventListener(this)),this._form.observe("keyup",function(e){var i=e.element();[this._label,this._resourceId,this._description,this._catalog].include(i)&&(a.validate(n.getValidationEntries([i])),i==this._resourceId&&this._resourceId.getValue()!=n.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),i==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(n.generateResourceId(this._label.getValue())),a.validate(n.getValidationEntries([this._resourceId]))))}.bindAsEventListener(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description,this._catalog];return a.validate(n.getValidationEntries(e))},_catalogValidator:function(e){var i=!0,t="";return e.blank()&&(t=n.messages.catalogIsEmpty,i=!1),{isValid:i,errorMessage:t}}};void 0===e&&document.observe("dom:loaded",function(){c.initialize(window.localContext.initOptions)}),t.exports=c}),define("runtime_dependencies/jrs-ui/src/addResource/mondrianXml/addMondrianXmlMain",["require","exports","module","requirejs-domready","underscore","runtime_dependencies/js-sdk/src/jrs.configs","../../resource/resource.base","../../resource/resource.add.mondrianxmla","../../util/utils.common"],function(e,i,t){var s=e("requirejs-domready"),r=e("underscore"),n=e("runtime_dependencies/js-sdk/src/jrs.configs"),o=e("../../resource/resource.base"),a=e("../../resource/resource.add.mondrianxmla"),d=e("../../util/utils.common"),c=d.isIPad;s(function(){var e=n.addMondrianXML.localContext.initOptions;r.extend(window.localContext,n.addMondrianXML.localContext),r.extend(o.messages,n.addMondrianXML.resource.messages),a.initialize(e),c()&&o.initSwipeScroll()})}),define("addResource/mondrianXml/addMondrianXmlMain",["require","exports","module","runtime_dependencies/jrs-ui/src/addResource/mondrianXml/addMondrianXmlMain"],function(e,i,t){e("runtime_dependencies/jrs-ui/src/addResource/mondrianXml/addMondrianXmlMain")});