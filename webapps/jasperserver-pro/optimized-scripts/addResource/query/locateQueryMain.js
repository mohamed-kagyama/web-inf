/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define("runtime_dependencies/jrs-ui/src/resource/resource.locate",["require","exports","module","prototype","underscore","./resource.base","../components/components.pickers","jquery"],function(e,r,t){var i=e("prototype"),o=i.$,s=e("underscore"),n=e("./resource.base"),u=e("../components/components.pickers"),c=e("jquery"),a={CONTENT_REPOSITORY:"CONTENT_REPOSITORY",LOCAL:"LOCAL",NONE:"NONE",FILE_SYSTEM:"FILE_SYSTEM",LOCATE_EVENT:"resource:locate",ALLOWED_FILE_RESOURCE_EXTENSIONS:["css","ttf","jpg","jpeg","gif","bmp","png","jar","jrxml","properties","jrtx","xml","agxml","docx","doc","ppt","pptx","xls","xlsx","ods","odt","odp","pdf","rtf","html"],initialize:function(e){var r=function(e){return s.isObject(e)?e:o(e)};this.resourceUri=r(e.resourceInput),this.browseButton=r(e.browseButton),this.filePath=r(e.fileUploadInput),this.fakeFilePath=r(e.fakeFileUploadInput),this.fakeFileInput=r(e.fakeFileUploadInputText),this.newResourceLink=r(e.newResourceLink);try{this._initFileSelector(e)}catch(e){}finally{this._initEvents(e)}return this},_initEvents:function(e){c(document).on("click","#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL",this._clickHandler),"fileResourceTreeDataProvider"===e.providerId&&(c("#next").on("click",a._nextClickHandler),c("#filePath").on("change",a._uploadChangeHandler))},_nextClickHandler:function(e){c("#fileUpload").hasClass("error")&&e.preventDefault()},_uploadChangeHandler:function(e){c("#fileUpload").removeClass("error");var r=!0;if(c("#filePath")[0].value){var t=c("#filePath")[0].value.match(/.*\.([^\.]+)$/);if(t){var i=t[1];s.indexOf(a.ALLOWED_FILE_RESOURCE_EXTENSIONS,i)<0&&(r=!1)}else r=!1}else r=!1;if(!r){var o=n.messages["resource.report.unsupportedFileType.error"]+" "+a.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(", ");c("#fileUpload").addClass("error").find("span.warning").html(o)}},_clickHandler:function(e){a._updateResourceSelectorState(e.target.id)},_updateResourceSelectorState:function(e){n.switchButtonState(this.filePath,e===this.FILE_SYSTEM),n.switchButtonState(this.fakeFilePath,e===this.FILE_SYSTEM),n.switchButtonState(this.fakeFileInput,e===this.FILE_SYSTEM),n.switchButtonState(this.browseButton,e===this.CONTENT_REPOSITORY),n.switchDisableState(this.resourceUri,e!==this.CONTENT_REPOSITORY);var r=e===this.LOCAL?["disabled","launcher"]:[];this._switchElementClasses(this.newResourceLink,r)},_initFileSelector:function(e){this.fileSelector=new u.FileSelector(s.extend({},e,{uriTextboxId:this.resourceUri,browseButtonId:this.browseButton,title:e.dialogTitle}))},remove:function(e){this.fileSelector.remove()},_switchElementClasses:function(e,r){e&&r&&e.removeClassName(r[0]).addClassName(r[1])}};t.exports=a}),define("runtime_dependencies/jrs-ui/src/resource/resource.query.locate",["require","exports","module","prototype","./resource.locate"],function(e,r,t){var i=e("prototype"),o=i.$,s=e("./resource.locate"),n={messages:[],initialize:function(){s.initialize({resourceInput:"resourceUri",browseButton:"browser_button",newResourceLink:"newQueryLink",treeId:"queryTreeRepoLocation",providerId:"queryTreeDataProvider",dialogTitle:n.messages["resource.QueryLocate.Title"],selectLeavesOnly:!0});var e=o("newQueryLink");e&&e.observe("click",function(){o("LOCAL").checked&&o("next").click()})},jumpTo:function(e){return o("jumpToPage").setValue(e),o("jumpButton").click(),!1}};void 0===e&&document.observe("dom:loaded",function(){n.initialize()}),t.exports=n}),define("runtime_dependencies/jrs-ui/src/addResource/query/locateQueryMain",["require","exports","module","requirejs-domready","underscore","runtime_dependencies/js-sdk/src/jrs.configs","../../resource/resource.base","../../resource/resource.query.locate","jquery","../../util/utils.common"],function(e,r,t){var i=e("requirejs-domready"),o=e("underscore"),s=e("runtime_dependencies/js-sdk/src/jrs.configs"),n=e("../../resource/resource.base"),u=e("../../resource/resource.query.locate"),c=e("jquery"),a=e("../../util/utils.common"),l=a.isIPad;i(function(){o.extend(u.messages,s.addJasperReport.resourceQueryLocate.messages),u.initialize(),l()&&n.initSwipeScroll(),c("#steps1_2").on("click",function(){return u.jumpTo("reportNaming")}),c("#step3").on("click",function(){return u.jumpTo("resources")}),c("#step4").on("click",function(){return u.jumpTo("dataSource")}),c("#step5").on("click",function(){return u.jumpTo("query")}),c("#step6").on("click",function(){return u.jumpTo("customization")})})}),define("addResource/query/locateQueryMain",["require","exports","module","runtime_dependencies/jrs-ui/src/addResource/query/locateQueryMain"],function(e,r,t){e("runtime_dependencies/jrs-ui/src/addResource/query/locateQueryMain")});