/*
 * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.
 * Licensed pursuant to commercial TIBCO End User License Agreement.
 */

define("runtime_dependencies/jrs-ui/src/resource/resource.listofvalues",["require","exports","module","prototype","./resource.base","../util/utils.common","../util/utils.common"],function(e,i,t){var s=e("prototype"),a=s.$,r=e("./resource.base"),n=e("../util/utils.common"),d=n.matchAny,o=e("../util/utils.common"),l=o.ValidationModule,u={LABEL_ID:"labelID",RESOURCE_ID_ID:"resourceID",DESCRIPTION_ID:"description",ITEM_NAME_ID:"name",ITEM_VALUE_ID:"value",SUBMIT_EVENT_ID:"submitEvent",ITEM_TO_DELETE_ID:"itemToDelete",SAVE_BUTTON_PATTERN:"#save",CANCEL_BUTTON_PATTERN:"#cancel",ADD_LINK_ID:"add",LINK_PATTERN:"a.launcher",_canGenerateId:!0,initialize:function(e){this._form=a(document.body).select("form")[0],this._label=a(this.LABEL_ID),this._resourceId=a(this.RESOURCE_ID_ID),this._description=a(this.DESCRIPTION_ID),this._itemName=a(this.ITEM_NAME_ID),this._itemValue=a(this.ITEM_VALUE_ID),this._submitEvent=a(this.SUBMIT_EVENT_ID),this._itemToDelete=a(this.ITEM_TO_DELETE_ID),this._addLink=a(this.ADD_LINK_ID),this._isEditMode=e.isEditMode,this._label.validator=r.labelValidator.bind(this),this._resourceId.validator=r.resourceIdValidator.bind(this),this._description.validator=r.descriptionValidator.bind(this),this._itemName.validator=this._itemNameValidator.bind(this),this._itemValue.validator=this._itemValueValidator.bind(this),this._initEvents()},_initEvents:function(){this._form.observe("click",function(e){var i=e.element();if(e.stop(),d(i,[this.SAVE_BUTTON_PATTERN],!0))this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_save"),this._form.submit());else if(i==this._addLink)this._isValueDataValid()&&this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_addItem"),this._form.submit());else if(d(i,[this.LINK_PATTERN],!0)&&i!=this._addLink){var t=i.identify();this._itemToDelete.setValue(t),this._submitEvent.writeAttribute("name","_eventId_removeItem"),this._form.submit()}else d(i,[this.CANCEL_BUTTON_PATTERN],!0)&&(this._submitEvent.writeAttribute("name","_eventId_cancel"),this._form.submit())}.bindAsEventListener(this)),this._form.observe("keyup",function(e){var i=e.element();[this._label,this._resourceId,this._description,this._itemName,this._itemValue].include(i)&&(l.validate(r.getValidationEntries([i])),i==this._resourceId&&this._resourceId.getValue()!=r.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),i==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(r.generateResourceId(this._label.getValue())),l.validate(r.getValidationEntries([this._resourceId]))))}.bindAsEventListener(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description];return l.validate(r.getValidationEntries(e))},_isValueDataValid:function(){var e=[this._itemName,this._itemValue];return l.validate(r.getValidationEntries(e))},_itemNameValidator:function(e){var i=!0,t="";return e.blank()&&(t=r.messages.itemNameIsEmpty,i=!1),{isValid:i,errorMessage:t}},_itemValueValidator:function(e){var i=!0,t="";return e.blank()&&(t=r.messages.itemValueIsEmpty,i=!1),{isValid:i,errorMessage:t}}};void 0===e&&document.observe("dom:loaded",function(){u.initialize(window.localContext.initOptions)}),t.exports=u}),define("runtime_dependencies/jrs-ui/src/addResource/listOfValues/addListOfValuesMain",["require","exports","module","requirejs-domready","underscore","runtime_dependencies/js-sdk/src/jrs.configs","../../resource/resource.base","../../resource/resource.listofvalues","../../util/utils.common"],function(e,i,t){var s=e("requirejs-domready"),a=e("underscore"),r=e("runtime_dependencies/js-sdk/src/jrs.configs"),n=e("../../resource/resource.base"),d=e("../../resource/resource.listofvalues"),o=e("../../util/utils.common"),l=o.isIPad;s(function(){var e=r.addListOfValues.localContext.initOptions;a.extend(window.localContext,r.addListOfValues.localContext),a.extend(n.messages,r.addListOfValues.resource.messages),d.initialize(e),l()&&n.initSwipeScroll()})}),define("addResource/listOfValues/addListOfValuesMain",["require","exports","module","runtime_dependencies/jrs-ui/src/addResource/listOfValues/addListOfValuesMain"],function(e,i,t){e("runtime_dependencies/jrs-ui/src/addResource/listOfValues/addListOfValuesMain")});